<div class="container"
     id="backup">
  <div class="row">
    <div class="col-xs-12 section">
      <label>Import</label>
    </div>
    <div class="col-xs-6">
      <label>Choose a backup file :</label>
    </div>
    <div class="col-xs-6">
      <strong ng-class="{
              'text-success': backup.read_result === 'loaded file',
              'text-danger': backup.read_result !== 'loaded file'
              }">{{backup.read_result | capitalise}}</strong>
    </div>
    <div class="clearfix"></div>
    <div class="col-xs-12">
      <input id="import-file"
             type="file"
             onchange="angular.element(this).scope().readBackupFile(this.files[0])" />
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 section">
      <label>Export</label>
    </div>
    <div class="col-xs-4">
      <label>Download the backup file</label>
    </div>
    <div class="col-xs-8">
      <a ng-show="backup.save_url !== null"
         ng-href="{{backup.save_url}}"
         download="{{backup.save_name}}">
        {{backup.save_name}}
      </a>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 section">
      <label>Upload</label>
    </div>
    <div class="col-xs-6">
      <button class="btn btn-default"
              ng-click="uploadData()">
        Upload To Server
        <span class="glyphicon glyphicon-cloud-upload"></span>
      </button>
    </div>
    <div class="col-xs-6 result">
      <strong ng-class="{
              'text-success': backup.upload.status,
              'text-danger': !backup.upload.status
              }">{{backup.upload.msg | capitalise }}</strong>
    </div>
    <div class="clearfix"></div>
    <div class="col-xs-12"
         ng-hide="backup.upload.status">
      You can temporarily upload your data to the web server.
      This will generate an Id that you can use in the download section
      on another device to synchronize your data.
      The generated Id and the uploaded data are not permanent and
      will be cleared after a given period of time.
    </div>
    <div class="col-xs-12"
         ng-show="backup.upload.status">
      <label>Id : </label>
      <span>{{backup.upload.id}}</span><br/>
      Use this ID on your other device, in the download input below.
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 section">
      <label>Download</label>
    </div>
    <div class="col-xs-6">
      <div class="input-group">
        <input type="text"
               class="form-control"
               ng-model="backup.download.id"
               placeholder="Id..." />
        <span class="input-group-btn">
          <button style="min-width:30px" class="btn btn-default"
                  ng-click="downloadData()">
            <span class="glyphicon glyphicon-cloud-download"></span>
          </button>
        </span>
      </div>
    </div>
    <div class="col-xs-6 result">
      <strong ng-class="{
            'text-success': backup.download.status,
            'text-danger': !backup.download.status
            }">{{backup.download.msg | capitalise}}</strong>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 section">
      <label>Debug</label>
    </div>
    <div class="col-xs-6">
      <button class="btn btn-default"
              ng-click="onClearStorage()">
        Clear Local Storage
      </button>
    </div>
    <div class="clearfix"></div>
    <div class="col-xs-12">
      This will clear all data stored in memory.
      You can then reload the data from a backup file to restart in a clean state.
    </div>
  </div>
</div>
