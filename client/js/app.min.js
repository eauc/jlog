"use strict";(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.6.0";var y=x.each=x.forEach=function(a,b,d){if(null==a)return a;if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return;return a};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,x.property(b))},x.where=function(a,b){return x.filter(a,x.matches(b))},x.findWhere=function(a,b){return x.find(a,x.matches(b))},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-(1/0),e=-(1/0);return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=x.values(a)),a[x.random(a.length-1)]):x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return null==a?x.identity:x.isFunction(a)?a:x.property(a)};x.sortBy=function(a,b,c){return b=B(b),x.pluck(x.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={};return c=B(c),y(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};x.groupBy=C(function(a,b,c){x.has(a,b)?a[b].push(c):a[b]=[c]}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.partition=function(a,b){var c=[],d=[];return y(a,function(a){(b(a)?c:d).push(a)}),[c,d]},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.contains(b,a)})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===x&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:x.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=x.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=x.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=x.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return x.partial(b,a)},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=function(a){if(!x.isObject(a))return[];if(v)return v(a);var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.constant=function(a){return function(){return a}},x.property=function(a){return function(b){return b[a]}},x.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},x.now=Date.now||function(){return(new Date).getTime()};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this),function(a){var b=a._||require("underscore"),c=Array.prototype.slice,d=Array.prototype.concat,e=function(a){return null!=a};b.mixin({cat:function(){return b.reduce(arguments,function(a,e){return b.isArguments(e)?d.call(a,c.call(e)):d.call(a,e)},[])},cons:function(a,c){return b.cat([a],c)},chunk:function(a,c,d){var e=function(a){if(null==a)return[];var f=b.take(a,c);return c===b.size(f)?b.cons(f,e(b.drop(a,c))):d?[b.take(b.cat(f,d),c)]:[]};return e(a)},chunkAll:function(a,c,d){d=null!=d?d:c;var e=function(a,c,d){return b.isEmpty(a)?[]:b.cons(b.take(a,c),e(b.drop(a,d),c,d))};return e(a,c,d)},mapcat:function(a,c){return b.cat.apply(null,b.map(a,c))},interpose:function(a,d){if(!b.isArray(a))throw new TypeError;var e=b.size(a);return 0===e?a:1===e?a:c.call(b.mapcat(a,function(a){return b.cons(a,[d])}),0,-1)},weave:function(){return b.some(arguments)?1==arguments.length?arguments[0]:b.filter(b.flatten(b.zip.apply(null,arguments),!0),function(a){return null!=a}):[]},interleave:b.weave,repeat:function(a,c){return b.times(a,function(){return c})},cycle:function(a,c){return b.flatten(b.times(a,function(){return c}),!0)},splitAt:function(a,c){return[b.take(a,c),b.drop(a,c)]},iterateUntil:function(a,b,c){for(var d=[],e=a(c);b(e);)d.push(e),e=a(e);return d},takeSkipping:function(a,c){var d=[],e=b.size(a);if(0>=c)return[];if(1===c)return a;for(var f=0;e>f;f+=c)d.push(a[f]);return d},reductions:function(a,c,d){var e=[],f=d;return b.each(a,function(b,d){f=c(f,a[d]),e.push(f)}),e},keepIndexed:function(a,c){return b.filter(b.map(b.range(b.size(a)),function(b){return c(b,a[b])}),e)},reverseOrder:function(a){if("string"==typeof a)throw new TypeError("Strings cannot be reversed by _.reverseOrder");return c.call(a).reverse()}})}(this),function(a){var b=a._||require("underscore"),c=Array.prototype.slice,d=Array.prototype.concat,e=function(a){return null!=a},f=function(a){return a!==!1&&e(a)},g=function(a){return b.isArray(a)||b.isArguments(a)};b.mixin({second:function(a,b,d){return null==a?void 0:null==b||d?a[1]:c.call(a,1,b)},third:function(a,b,d){return null==a?void 0:null==b||d?a[2]:c.call(a,2,b)},nth:function(a,b,c){return null==b||c?void 0:a[b]},takeWhile:function(a,c){if(!g(a))throw new TypeError;for(var d=b.size(a),e=0;d>e&&f(c(a[e]));e++);return b.take(a,e)},dropWhile:function(a,c){if(!g(a))throw new TypeError;for(var d=b.size(a),e=0;d>e&&f(c(a[e]));e++);return b.drop(a,e)},splitWith:function(a,c){return[b.takeWhile(a,c),b.dropWhile(a,c)]},partitionBy:function(a,c){if(b.isEmpty(a)||!e(a))return[];var f=b.first(a),g=c(f),h=d.call([f],b.takeWhile(b.rest(a),function(a){return b.isEqual(g,c(a))}));return d.call([h],b.partitionBy(b.drop(a,b.size(h)),c))},best:function(a,c){return b.reduce(a,function(a,b){return c(a,b)?a:b})},keep:function(a,c){if(!g(a))throw new TypeError("expected an array as the first argument");return b.filter(b.map(a,function(a){return c(a)}),e)}})}(this),function(a){function b(a){return e.isElement(a)?a.children:a}function c(a,b,c,d,i,j){var k=[];return function l(a,m,n){if(e.isObject(a)){if(k.indexOf(a)>=0)throw new TypeError(h);k.push(a)}if(c){var o=c.call(i,a,m,n);if(o===g)return g;if(o===f)return}var p,q=b(a);if(e.isObject(q)&&!e.isEmpty(q)){j&&(p=e.isArray(a)?[]:{});var r=e.any(q,function(b,c){var d=l(b,c,a);return d===g?!0:void(p&&(p[c]=d))});if(r)return g}return d?d.call(i,a,m,n,p):void 0}(a)}function d(a,b,c){var d=[];return this.preorder(a,function(a,g){return c||g!=b?void(e.has(a,b)&&(d[d.length]=a[b])):f}),d}var e=a._||require("underscore"),f={},g={},h="Not a tree: same object found in two different branches",i={find:function(a,b,c){var d;return this.preorder(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,g):void 0},c),d},filter:function(a,b,c,d){var e=[];return null==a?e:(b(a,function(a,b,f){c.call(d,a,b,f)&&e.push(a)},null,this._traversalStrategy),e)},reject:function(a,b,c,d){return this.filter(a,b,function(a,b,e){return!c.call(d,a,b,e)})},map:function(a,b,c,d){var e=[];return b(a,function(a,b,f){e[e.length]=c.call(d,a,b,f)},null,this._traversalStrategy),e},pluck:function(a,b){return d.call(this,a,b,!1)},pluckRec:function(a,b){return d.call(this,a,b,!0)},postorder:function(a,b,d,e){e=e||this._traversalStrategy,c(a,e,null,b,d)},preorder:function(a,b,d,e){e=e||this._traversalStrategy,c(a,e,b,null,d)},reduce:function(a,b,d,e){var f=function(a,c,e,f){return b(f||d,a,c,e)};return c(a,this._traversalStrategy,null,f,e,!0)}};i.collect=i.map,i.detect=i.find,i.select=i.filter,e.walk=function(a){var c=e.clone(i);return e.bindAll.apply(null,[c].concat(e.keys(c))),c._traversalStrategy=a||b,c},e.extend(e.walk,e.walk())}(this),function(a){function b(a){return function(){if(1===arguments.length)return a.apply(this,arguments);throw new RangeError("Only a single argument may be accepted.")}}var c=a._||require("underscore"),d=function(){function a(c,d,e,f,g,h){return h===!0?f.unshift(g):f.push(g),f.length==e?c.apply(d,f):b(function(){return a(c,d,e,f.slice(0),arguments[0],h)})}return function(c,d){var e=this;return b(function(){return a(c,e,c.length,[],arguments[0],d)})}}(),e=function(){var a=[];return function(b){if("function"!=typeof b)throw new Error("Argument 1 must be a function.");var c=b.length;return void 0===a[c]&&(a[c]=function(a){return function(){if(arguments.length!==c)throw new RangeError(c+" arguments must be applied.");return a.apply(this,arguments)}}),a[c](b)}}();c.mixin({fix:function(a){var b=c.rest(arguments),d=function(){for(var d=b.slice(),e=0,f=0;f<(d.length||e<arguments.length);f++)d[f]===c&&(d[f]=arguments[e++]);return a.apply(null,d)};return d._original=a,d},unary:function(a){return function(b){return a.call(this,b)}},binary:function(a){return function(b,c){return a.call(this,b,c)}},ternary:function(a){return function(b,c,d){return a.call(this,b,c,d)}},quaternary:function(a){return function(b,c,d,e){return a.call(this,b,c,d,e)}},curry:d,rCurry:function(a){return d.call(this,a,!0)},curry2:function(a){return b(function(c){return b(function(b){return a.call(this,c,b)})})},curry3:function(a){return b(function(c){return b(function(d){return b(function(b){return a.call(this,c,d,b)})})})},rcurry2:function(a){return b(function(c){return b(function(b){return a.call(this,b,c)})})},rcurry3:function(a){return b(function(c){return b(function(d){return b(function(b){return a.call(this,b,d,c)})})})},enforce:e}),c.arity=function(){var a={};return function b(c,d){if(null==a[c]){for(var e=new Array(c),f=0;c>f;++f)e[f]="__"+f;var g=e.join(),h="return function ("+g+") { return fun.apply(this, arguments); };";a[c]=new Function(["fun"],h)}return null==d?function(a){return b(c,a)}:a[c](d)}}()}(this),function(a){function b(a,b){return c.arity(a.length,function(){return a.apply(this,h.call(arguments,b))})}var c=a._||require("underscore"),d=function(a){return null!=a},e=function(a){return a!==!1&&d(a)},f=[].reverse,g=[].slice,h=[].map,i=function(a){return function(b,c){return 1===arguments.length?function(c){return a(b,c)}:a(b,c)}};c.mixin({always:c.constant,pipeline:function(){var a=c.isArray(arguments[0])?arguments[0]:arguments;return function(b){return c.reduce(a,function(a,b){return b(a)},b)}},conjoin:function(){var a=arguments;return function(b){return c.every(b,function(b){return c.every(a,function(a){return a(b)})})}},disjoin:function(){var a=arguments;return function(b){return c.some(b,function(b){return c.some(a,function(a){return a(b)})})}},comparator:function(a){return function(b,c){return e(a(b,c))?-1:e(a(c,b))?1:0}},complement:function(a){return function(){return!a.apply(this,arguments)}},splat:function(a){return function(b){return a.apply(this,b)}},unsplat:function(a){var b=a.length;return 1>b?a:1===b?function(){return a.call(this,g.call(arguments,0))}:function(){var c=arguments.length,d=g.call(arguments,0,b-1),e=Math.max(b-c-1,0),f=new Array(e),h=g.call(arguments,a.length-1);return a.apply(this,d.concat(f).concat([h]))}},unsplatl:function(a){var b=a.length;return 1>b?a:1===b?function(){return a.call(this,g.call(arguments,0))}:function(){var c=arguments.length,d=g.call(arguments,Math.max(c-b+1,0)),e=g.call(arguments,0,Math.max(c-b+1,0));return a.apply(this,[e].concat(d))}},mapArgs:i(b),juxt:function(){var a=arguments;return function(){var b=arguments;return c.map(a,function(a){return a.apply(this,b)},this)}},fnull:function(a){var b=c.rest(arguments);return function(){for(var e=c.toArray(arguments),f=c.size(b),g=0;f>g;g++)d(e[g])||(e[g]=b[g]);return a.apply(this,e)}},flip2:function(a){return function(){var b=g.call(arguments);return b[0]=arguments[1],b[1]=arguments[0],a.apply(this,b)}},flip:function(a){return function(){var b=f.call(arguments);return a.apply(this,b)}},functionalize:function(a){return function(b){return a.apply(b,c.rest(arguments))}},methodize:function(a){return function(){return a.apply(null,c.cons(this,arguments))}},k:c.always,t:c.pipeline}),c.unsplatr=c.unsplat,c.mapArgsWith=i(c.flip(b)),c.bound=function(a,b){var d=a[b];if(!c.isFunction(d))throw new TypeError("Expected property to be a function");return c.bind(d,a)}}(this),function(a){var b=a._||require("underscore"),c=Array.prototype.slice;b.mixin({attempt:function(a,d){if(null==a)return void 0;var e=a[d],f=c.call(arguments,2);return b.isFunction(e)?e.apply(a,f):void 0}})}(this),function(a,b){function c(a){return function(b){return a.call(this,b)}}function d(a,b,c){var d,e;for(d=void 0!==c?c:a(),e=a();null!=e;)d=b.call(e,d,e),e=a();return d}function e(a,b){var c=y;return function(){return c===y?c=a:null!=c&&(c=b.call(c,c)),c}}function f(a,b){var c,d,e=a;return function(){return null!=e?(c=b.call(e,e),d=c[1],e=null!=d?c[0]:void 0,d):void 0}}function g(a,b,c){var d=c;return function(){var c=a();return null==c?c:d=void 0===d?c:b.call(c,d,c)}}function h(a,b,c){var d,e,f=c;return function(){return e=a(),null==e?e:void 0===f?f=e:(d=b.call(e,f,e),f=d[0],d[1])}}function i(a,b){return function(){var c;return c=a(),null!=c?b.call(c,c):void 0}}function j(a,b){var c=null;return function(){var d,e;if(null==c){if(e=a(),null==e)return void(c=null);c=b.call(e,e)}for(;null==d;)if(d=c(),null==d){if(e=a(),null==e)return void(c=null);c=b.call(e,e)}return d}}function l(a,b){return function(){var c;for(c=a();null!=c;){if(b.call(c,c))return c;c=a()}return void 0}}function m(a,b){return l(a,function(a){return!b(a)})}function n(a,b){return l(a,b)()}function o(a,b,c){for(var d=0;b-->0;)a();return null!=c?function(){return++d<=c?a():void 0}:a}function p(a,b){return o(a,null==b?1:b)}function q(a,b){return o(a,0,null==b?1:b)}function r(a){var b=0;return function(){return a[b++]}}function s(a){var b,c,d;return b=0,d=[],c=function(){var e,f;return e=a[b++],e instanceof Array?(d.push({array:a,index:b}),a=e,b=0,c()):void 0===e?d.length>0?(f=d.pop(),a=f.array,b=f.index,c()):void 0:e}}function t(a){return function(){return a}}function u(a,b,c){return function(){var d;return a>b?void 0:(d=a,a+=c,d)}}function v(a,b,c){return function(){var d;return b>a?void 0:(d=a,a-=c,d)}}function w(a,b,c){return null==a?u(1,1/0,1):null==b?u(a,1/0,1):null==c?b>=a?u(a,b,1):v(a,b,1):c>0?u(a,b,c):0>c?v(a,b,Math.abs(c)):k(a)}var x=a._||require("underscore"),y={},z=c(w);x.iterators={accumulate:g,accumulateWithReturn:h,foldl:d,reduce:d,unfold:e,unfoldWithReturn:f,map:i,mapcat:j,select:l,reject:m,filter:l,find:n,slice:o,drop:p,take:q,List:r,Tree:s,constant:t,K:t,numbers:z,range:w}}(this,void 0),function(a){var b=a._||require("underscore");b.mixin({isInstanceOf:function(a,b){return a instanceof b},isAssociative:function(a){return b.isArray(a)||b.isObject(a)||b.isArguments(a)},isIndexed:function(a){return b.isArray(a)||b.isString(a)||b.isArguments(a)},isSequential:function(a){return b.isArray(a)||b.isArguments(a)},isPlainObject:function(c){return b.isObject(c)&&c.constructor===a.Object},isZero:function(a){return 0===a},isEven:function(a){return b.isFinite(a)&&0===(1&a)},isOdd:function(a){return b.isFinite(a)&&!b.isEven(a)},isPositive:function(a){return a>0},isNegative:function(a){return 0>a},isValidDate:function(a){return b.isDate(a)&&!b.isNaN(a.getTime())},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isInteger:function(a){return b.isNumeric(a)&&a%1===0},isFloat:function(a){return b.isNumeric(a)&&!b.isInteger(a)},isJSON:function(a){try{JSON.parse(a)}catch(b){return!1}return!0},isIncreasing:function(){var a=b.size(arguments);if(1===a)return!0;if(2===a)return arguments[0]<arguments[1];for(var c=1;a>c;c++)if(arguments[c-1]>=arguments[c])return!1;return!0},isDecreasing:function(){var a=b.size(arguments);if(1===a)return!0;if(2===a)return arguments[0]>arguments[1];for(var c=1;a>c;c++)if(arguments[c-1]<=arguments[c])return!1;return!0}})}(this),function(a){var b=a._||require("underscore"),c=(Array.prototype.slice,Array.prototype.concat),d=function(a){return null!=a},e=function(a){return a!==!1&&d(a)},f=function(a){return b.isArray(a)||b.isObject(a)},g=function(a){return function(b){return function(c){return a(c,b)}}};b.mixin({merge:function(){var a=b.some(arguments)?{}:null;return e(a)&&b.extend.apply(null,c.call([a],b.toArray(arguments))),a},renameKeys:function(a,e){return b.reduce(e,function(b,c,e){return d(a[e])?(b[c]=a[e],b):b},b.omit.apply(null,c.call([a],b.keys(e))))},snapshot:function(a){if(null==a||"object"!=typeof a)return a;var c=new a.constructor;for(var d in a)a.hasOwnProperty(d)&&(c[d]=b.snapshot(a[d]));return c},updatePath:function(a,c,e,g){if(!f(a))throw new TypeError("Attempted to update a non-associative object.");if(!d(e))return c(a);var h=b.isArray(e),i=h?e:[e],j=h?b.snapshot(a):b.clone(a),k=b.last(i),l=j;return b.each(b.initial(i),function(a){g&&!b.has(l,a)&&(l[a]=b.clone(g)),l=l[a]}),l[k]=c(l[k]),j},setPath:function(a,c,e,f){if(!d(e))throw new TypeError("Attempted to set a property at a null path.");return b.updatePath(a,function(){return c},e,f)},frequencies:g(b.countBy)(b.identity)})}(this),function(a){var b=a._||require("underscore"),c=Array.prototype.concat,d=Array.prototype;d.slice;b.mixin({accessor:function(a){return function(b){return b&&b[a]}},dictionary:function(a){return function(b){return a&&b&&a[b]}},selectKeys:function(a,d){return b.pick.apply(null,c.call([a],d))},kv:function(a,c){return b.has(a,c)?[c,a[c]]:void 0},getPath:function e(a,c){return"string"==typeof c&&(c=c.split(".")),void 0===a?void 0:0===c.length?a:null===a?void 0:e(a[b.first(c)],b.rest(c))},hasPath:function f(a,c){"string"==typeof c&&(c=c.split("."));var d=c.length;return null==a&&d>0?!1:c[0]in a?1===d?!0:f(a[b.first(c)],b.rest(c)):!1},pickWhen:function(a,c){var d={};return b.each(a,function(b,e){c(a[e])&&(d[e]=a[e])}),d},omitWhen:function(a,c){return b.pickWhen(a,function(a){return!c(a)})}})}(this),function(a){var b=a._||require("underscore");b.mixin({exists:function(a){return null!=a},truthy:function(a){return a!==!1&&b.exists(a)},falsey:function(a){return!b.truthy(a)},not:function(a){return!a},firstExisting:function(){for(var a=0;a<arguments.length;a++)if(null!=arguments[a])return arguments[a]}})}(this),function(a){function b(a){return function(){return A.reduce(arguments,a)}}function c(a){return function(){for(var b,c=0;c<arguments.length-1;c++)if(b=a(arguments[c],arguments[c+1]),b===!1)return b;return b}}function d(a){return function(){return!a.apply(this,arguments)}}function e(a,b){return a+b}function f(a,b){return a-b}function g(a,b){return a*b}function h(a,b){return a/b}function i(a,b){return a%b}function j(a){return++a}function k(a){return--a}function l(a){return-a}function m(a,b){return a&b}function n(a,b){return a|b}function o(a,b){return a^b}function p(a,b){return a<<b}function q(a,b){return a>>b}function r(a,b){return a>>>b}function s(a){return~a}function t(a,b){return a==b}function u(a,b){return a===b}function v(a){return!a}function w(a,b){return a>b}function x(a,b){return b>a}function y(a,b){return a>=b}function z(a,b){return b>=a}var A=a._||require("underscore");A.mixin({add:b(e),sub:b(f),mul:b(g),div:b(h),mod:i,inc:j,dec:k,neg:l,eq:c(t),seq:c(u),neq:d(c(t)),sneq:d(c(u)),not:v,gt:c(w),lt:c(x),gte:c(y),lte:c(z),bitwiseAnd:b(m),bitwiseOr:b(n),bitwiseXor:b(o),bitwiseNot:s,bitwiseLeft:b(p),bitwiseRight:b(q),bitwiseZ:b(r)})}(this),function(a){var b=a._||require("underscore"),c=/\+/g,d=/\%20/g,e=/(?:([^\[]+))|(?:\[(.*?)\])/g,f=function(a){return decodeURIComponent(a.replace(c,"%20"))},g=function(a){return encodeURIComponent(a).replace(d,"+")},h=function(a,c,d){return b.isUndefined(d)&&(d=!0),b.isArray(c)?b.map(c,function(b,c){return h(d?c:a+"[]",b,!1)}).join("&"):b.isObject(c)?b.map(c,function(b,c){return h(d?c:a+"["+c+"]",b,!1)}).join("&"):g(a)+"="+g(c)};b.mixin({explode:function(a){return a.split("")},fromQuery:function(a){var c,d,g,h,i,j=a.split("&"),k={};return b.each(j,function(a){for(a=a.split("="),c=f(a[0]),g=c,i=k,e.lastIndex=0;null!==(d=e.exec(c));)b.isUndefined(d[1])?(h=d[2],i[g]=i[g]||(h?{}:[]),i=i[g]):h=d[1],g=h||b.size(i);i[g]=f(a[1])}),k},implode:function(a){return a.join("")},camelCase:function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},toDash:function(a){return a=a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),"-"==a.charAt(0)?a.substr(1):a},toQuery:function(a){return h("",a)},strContains:function(a,b){if("string"!=typeof a)throw new TypeError;return-1!=a.indexOf(b)}})}(this),function(a){var b=a._||require("underscore");b.mixin({done:function(a){var c=b(a);return c.stopTrampoline=!0,c},trampoline:function(a){for(var c=a.apply(a,b.rest(arguments));b.isFunction(c)&&(c=c(),!(c instanceof b&&c.stopTrampoline)););return c.value()}})}(this),!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{
var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.s=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./trim"),e=a("./decapitalize");b.exports=function(a,b){return a=d(a).replace(/[-_\s]+(.)?/g,function(a,b){return b?b.toUpperCase():""}),b===!0?e(a):a}},{"./decapitalize":9,"./trim":60}],2:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a){return a=d(a),a.charAt(0).toUpperCase()+a.slice(1)}},{"./helper/makeString":19}],3:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a){return d(a).split("")}},{"./helper/makeString":19}],4:[function(a,b,c){b.exports=function(a,b){return null==a?[]:(a=String(a),b=~~b,b>0?a.match(new RegExp(".{1,"+b+"}","g")):[a])}},{}],5:[function(a,b,c){var d=a("./capitalize"),e=a("./camelize"),f=a("./helper/makeString");b.exports=function(a){return a=f(a),d(e(a.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":1,"./capitalize":2,"./helper/makeString":19}],6:[function(a,b,c){var d=a("./trim");b.exports=function(a){return d(a).replace(/\s+/g," ")}},{"./trim":60}],7:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b){if(a=d(a),b=d(b),0===a.length||0===b.length)return 0;for(var c=0,e=0,f=b.length;;){if(e=a.indexOf(b,e),-1===e)break;c++,e+=f}return c}},{"./helper/makeString":19}],8:[function(a,b,c){var d=a("./trim");b.exports=function(a){return d(a).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":60}],9:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a){return a=d(a),a.charAt(0).toLowerCase()+a.slice(1)}},{"./helper/makeString":19}],10:[function(a,b,c){function d(a){for(var b=a.match(/^[\s\\t]*/gm),c=b[0].length,d=1;d<b.length;d++)c=Math.min(b[d].length,c);return c}var e=a("./helper/makeString");b.exports=function(a,b){a=e(a);var c,f=d(a);return 0===f?a:(c="string"==typeof b?new RegExp("^"+b,"gm"):new RegExp("^[ \\t]{"+f+"}","gm"),a.replace(c,""))}},{"./helper/makeString":19}],11:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/toPositive");b.exports=function(a,b,c){return a=d(a),b=""+b,c="undefined"==typeof c?a.length-b.length:Math.min(e(c),a.length)-b.length,c>=0&&a.indexOf(b,c)===c}},{"./helper/makeString":19,"./helper/toPositive":21}],12:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/escapeChars"),f={};for(var g in e)f[e[g]]=g;f["'"]="#39",b.exports=function(a){return d(a).replace(/[&<>"']/g,function(a){return"&"+f[a]+";"})}},{"./helper/escapeChars":17,"./helper/makeString":19}],13:[function(a,b,c){b.exports=function(){var a={};for(var b in this)this.hasOwnProperty(b)&&!b.match(/^(?:include|contains|reverse|join)$/)&&(a[b]=this[b]);return a}},{}],14:[function(a,b,c){function d(a){return this instanceof d?void(this._wrapped=a):new d(a)}function e(a,b){"function"==typeof b&&(d.prototype[a]=function(){var a=[this._wrapped].concat(Array.prototype.slice.call(arguments)),c=b.apply(null,a);return"string"==typeof c?new d(c):c})}function f(a){e(a,function(b){var c=Array.prototype.slice.call(arguments,1);return String.prototype[a].apply(b,c)})}d.VERSION="3.0.3",d.isBlank=a("./isBlank"),d.stripTags=a("./stripTags"),d.capitalize=a("./capitalize"),d.decapitalize=a("./decapitalize"),d.chop=a("./chop"),d.trim=a("./trim"),d.clean=a("./clean"),d.count=a("./count"),d.chars=a("./chars"),d.swapCase=a("./swapCase"),d.escapeHTML=a("./escapeHTML"),d.unescapeHTML=a("./unescapeHTML"),d.splice=a("./splice"),d.insert=a("./insert"),d.replaceAll=a("./replaceAll"),d.include=a("./include"),d.join=a("./join"),d.lines=a("./lines"),d.dedent=a("./dedent"),d.reverse=a("./reverse"),d.startsWith=a("./startsWith"),d.endsWith=a("./endsWith"),d.pred=a("./pred"),d.succ=a("./succ"),d.titleize=a("./titleize"),d.camelize=a("./camelize"),d.underscored=a("./underscored"),d.dasherize=a("./dasherize"),d.classify=a("./classify"),d.humanize=a("./humanize"),d.ltrim=a("./ltrim"),d.rtrim=a("./rtrim"),d.truncate=a("./truncate"),d.prune=a("./prune"),d.words=a("./words"),d.pad=a("./pad"),d.lpad=a("./lpad"),d.rpad=a("./rpad"),d.lrpad=a("./lrpad"),d.sprintf=a("./sprintf"),d.vsprintf=a("./vsprintf"),d.toNumber=a("./toNumber"),d.numberFormat=a("./numberFormat"),d.strRight=a("./strRight"),d.strRightBack=a("./strRightBack"),d.strLeft=a("./strLeft"),d.strLeftBack=a("./strLeftBack"),d.toSentence=a("./toSentence"),d.toSentenceSerial=a("./toSentenceSerial"),d.slugify=a("./slugify"),d.surround=a("./surround"),d.quote=a("./quote"),d.unquote=a("./unquote"),d.repeat=a("./repeat"),d.naturalCmp=a("./naturalCmp"),d.levenshtein=a("./levenshtein"),d.toBoolean=a("./toBoolean"),d.exports=a("./exports"),d.escapeRegExp=a("./helper/escapeRegExp"),d.strip=d.trim,d.lstrip=d.ltrim,d.rstrip=d.rtrim,d.center=d.lrpad,d.rjust=d.lpad,d.ljust=d.rpad,d.contains=d.include,d.q=d.quote,d.toBool=d.toBoolean,d.camelcase=d.camelize,d.prototype={value:function(){return this._wrapped}};for(var g in d)e(g,d[g]);e("tap",function(a,b){return b(a)});var h=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var g in h)f(h[g]);b.exports=d},{"./camelize":1,"./capitalize":2,"./chars":3,"./chop":4,"./classify":5,"./clean":6,"./count":7,"./dasherize":8,"./decapitalize":9,"./dedent":10,"./endsWith":11,"./escapeHTML":12,"./exports":13,"./helper/escapeRegExp":18,"./humanize":22,"./include":23,"./insert":24,"./isBlank":25,"./join":26,"./levenshtein":27,"./lines":28,"./lpad":29,"./lrpad":30,"./ltrim":31,"./naturalCmp":32,"./numberFormat":33,"./pad":34,"./pred":35,"./prune":36,"./quote":37,"./repeat":38,"./replaceAll":39,"./reverse":40,"./rpad":41,"./rtrim":42,"./slugify":43,"./splice":44,"./sprintf":45,"./startsWith":46,"./strLeft":47,"./strLeftBack":48,"./strRight":49,"./strRightBack":50,"./stripTags":51,"./succ":52,"./surround":53,"./swapCase":54,"./titleize":55,"./toBoolean":56,"./toNumber":57,"./toSentence":58,"./toSentenceSerial":59,"./trim":60,"./truncate":61,"./underscored":62,"./unescapeHTML":63,"./unquote":64,"./vsprintf":65,"./words":66}],15:[function(a,b,c){var d=a("./makeString");b.exports=function(a,b){return a=d(a),0===a.length?"":a.slice(0,-1)+String.fromCharCode(a.charCodeAt(a.length-1)+b)}},{"./makeString":19}],16:[function(a,b,c){var d=a("./escapeRegExp");b.exports=function(a){return null==a?"\\s":a.source?a.source:"["+d(a)+"]"}},{"./escapeRegExp":18}],17:[function(a,b,c){var d={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};b.exports=d},{}],18:[function(a,b,c){var d=a("./makeString");b.exports=function(a){return d(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":19}],19:[function(a,b,c){b.exports=function(a){return null==a?"":""+a}},{}],20:[function(a,b,c){b.exports=function(a,b){if(1>b)return"";for(var c="";b>0;)1&b&&(c+=a),b>>=1,a+=a;return c}},{}],21:[function(a,b,c){b.exports=function(a){return 0>a?0:+a||0}},{}],22:[function(a,b,c){var d=a("./capitalize"),e=a("./underscored"),f=a("./trim");b.exports=function(a){return d(f(e(a).replace(/_id$/,"").replace(/_/g," ")))}},{"./capitalize":2,"./trim":60,"./underscored":62}],23:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b){return""===b?!0:-1!==d(a).indexOf(b)}},{"./helper/makeString":19}],24:[function(a,b,c){var d=a("./splice");b.exports=function(a,b,c){return d(a,b,0,c)}},{"./splice":44}],25:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a){return/^\s*$/.test(d(a))}},{"./helper/makeString":19}],26:[function(a,b,c){var d=a("./helper/makeString"),e=[].slice;b.exports=function(){var a=e.call(arguments),b=a.shift();return a.join(d(b))}},{"./helper/makeString":19}],27:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b){a=d(a),b=d(b);for(var c,e,f=[],g=0;g<=b.length;g++)for(var h=0;h<=a.length;h++)e=g&&h?a.charAt(h-1)===b.charAt(g-1)?c:Math.min(f[h],f[h-1],c)+1:g+h,c=f[h],f[h]=e;return f.pop()}},{"./helper/makeString":19}],28:[function(a,b,c){b.exports=function(a){return null==a?[]:String(a).split(/\r?\n/)}},{}],29:[function(a,b,c){var d=a("./pad");b.exports=function(a,b,c){return d(a,b,c)}},{"./pad":34}],30:[function(a,b,c){var d=a("./pad");b.exports=function(a,b,c){return d(a,b,c,"both")}},{"./pad":34}],31:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/defaultToWhiteSpace"),f=String.prototype.trimLeft;b.exports=function(a,b){return a=d(a),!b&&f?f.call(a):(b=e(b),a.replace(new RegExp("^"+b+"+"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],32:[function(a,b,c){b.exports=function(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=/(\.\d+)|(\d+)|(\D+)/g,d=String(a).match(c),e=String(b).match(c),f=Math.min(d.length,e.length),g=0;f>g;g++){var h=d[g],i=e[g];if(h!==i){var j=+h,k=+i;return j===j&&k===k?j>k?1:-1:i>h?-1:1}}return d.length!=e.length?d.length-e.length:b>a?-1:1}},{}],33:[function(a,b,c){b.exports=function(a,b,c,d){if(isNaN(a)||null==a)return"";a=a.toFixed(~~b),d="string"==typeof d?d:",";var e=a.split("."),f=e[0],g=e[1]?(c||".")+e[1]:"";return f.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+d)+g}},{}],34:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/strRepeat");b.exports=function(a,b,c,f){a=d(a),b=~~b;var g=0;switch(c?c.length>1&&(c=c.charAt(0)):c=" ",f){case"right":return g=b-a.length,a+e(c,g);case"both":return g=b-a.length,e(c,Math.ceil(g/2))+a+e(c,Math.floor(g/2));default:return g=b-a.length,e(c,g)+a}}},{"./helper/makeString":19,"./helper/strRepeat":20}],35:[function(a,b,c){var d=a("./helper/adjacent");b.exports=function(a){return d(a,-1)}},{"./helper/adjacent":15}],36:[function(a,b,c){var d=a("./helper/makeString"),e=a("./rtrim");b.exports=function(a,b,c){if(a=d(a),b=~~b,c=null!=c?String(c):"...",a.length<=b)return a;var f=function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "},g=a.slice(0,b+1).replace(/.(?=\W*\w*$)/g,f);return g=g.slice(g.length-2).match(/\w\w/)?g.replace(/\s*\S+$/,""):e(g.slice(0,g.length-1)),(g+c).length>a.length?a:a.slice(0,g.length)+c}},{"./helper/makeString":19,"./rtrim":42}],37:[function(a,b,c){var d=a("./surround");b.exports=function(a,b){return d(a,b||'"')}},{"./surround":53}],38:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/strRepeat");b.exports=function f(a,b,c){if(a=d(a),b=~~b,null==c)return e(a,b);for(var f=[];b>0;f[--b]=a);return f.join(c)}},{"./helper/makeString":19,"./helper/strRepeat":20}],39:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b,c,e){var f=e===!0?"gi":"g",g=new RegExp(b,f);return d(a).replace(g,c)}},{"./helper/makeString":19}],40:[function(a,b,c){var d=a("./chars");b.exports=function(a){return d(a).reverse().join("")}},{"./chars":3}],41:[function(a,b,c){var d=a("./pad");b.exports=function(a,b,c){return d(a,b,c,"right")}},{"./pad":34}],42:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/defaultToWhiteSpace"),f=String.prototype.trimRight;b.exports=function(a,b){return a=d(a),!b&&f?f.call(a):(b=e(b),a.replace(new RegExp(b+"+$"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],43:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/defaultToWhiteSpace"),f=a("./trim"),g=a("./dasherize");b.exports=function(a){var b="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșšŝťțŭùúüűûñÿýçżźž",c="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssttuuuuuunyyczzz",h=new RegExp(e(b),"g");return a=d(a).toLowerCase().replace(h,function(a){var d=b.indexOf(a);return c.charAt(d)||"-"}),f(g(a.replace(/[^\w\s-]/g,"-")),"-")}},{"./dasherize":8,"./helper/defaultToWhiteSpace":16,"./helper/makeString":19,"./trim":60}],44:[function(a,b,c){var d=a("./chars");b.exports=function(a,b,c,e){var f=d(a);return f.splice(~~b,~~c,e),f.join("")}},{"./chars":3}],45:[function(a,b,c){var d=a("./helper/strRepeat"),e=Object.prototype.toString,f=function(){function a(a){return e.call(a).slice(8,-1).toLowerCase()}var b=d,c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var e,g,h,i,j,k,l,m=1,n=c.length,o="",p=[];for(g=0;n>g;g++)if(o=a(c[g]),"string"===o)p.push(c[g]);else if("array"===o){if(i=c[g],i[2])for(e=d[m],h=0;h<i[2].length;h++){if(!e.hasOwnProperty(i[2][h]))throw new Error(f('[_.sprintf] property "%s" does not exist',i[2][h]));e=e[i[2][h]]}else e=i[1]?d[i[1]]:d[m++];if(/[^s]/.test(i[8])&&"number"!=a(e))throw new Error(f("[_.sprintf] expecting number but found %s",a(e)));switch(i[8]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e,10);break;case"e":e=i[7]?e.toExponential(i[7]):e.toExponential();break;case"f":e=i[7]?parseFloat(e).toFixed(i[7]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&i[7]?e.substring(0,i[7]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(i[8])&&i[3]&&e>=0?"+"+e:e,k=i[4]?"0"==i[4]?"0":i[4].charAt(1):" ",l=i[6]-String(e).length,j=i[6]?b(k,l):"",p.push(i[5]?e+j:j+e)}return p.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw new Error("[_.sprintf] huh?");if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw new Error("[_.sprintf] huh?");for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw new Error("[_.sprintf] huh?");f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");d.push(c)}b=b.substring(c[0].length)}return d},c}();b.exports=f},{"./helper/strRepeat":20}],46:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/toPositive");b.exports=function(a,b,c){return a=d(a),b=""+b,c=null==c?0:Math.min(e(c),a.length),a.lastIndexOf(b,c)===c}},{"./helper/makeString":19,"./helper/toPositive":21}],47:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b){a=d(a),b=d(b);var c=b?a.indexOf(b):-1;return~c?a.slice(0,c):a}},{"./helper/makeString":19}],48:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b){a=d(a),b=d(b);var c=a.lastIndexOf(b);return~c?a.slice(0,c):a}},{"./helper/makeString":19}],49:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b){a=d(a),b=d(b);var c=b?a.indexOf(b):-1;return~c?a.slice(c+b.length,a.length):a}},{"./helper/makeString":19}],50:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b){a=d(a),b=d(b);var c=b?a.lastIndexOf(b):-1;return~c?a.slice(c+b.length,a.length):a}},{"./helper/makeString":19}],51:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a){return d(a).replace(/<\/?[^>]+>/g,"")}},{"./helper/makeString":19}],52:[function(a,b,c){var d=a("./helper/adjacent");b.exports=function(a){return d(a,1)}},{"./helper/adjacent":15}],53:[function(a,b,c){b.exports=function(a,b){return[b,a,b].join("")}},{}],54:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a){return d(a).replace(/\S/g,function(a){return a===a.toUpperCase()?a.toLowerCase():a.toUpperCase()})}},{"./helper/makeString":19}],55:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a){return d(a).toLowerCase().replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()})}},{"./helper/makeString":19}],56:[function(a,b,c){function d(a,b){var c,d,e=a.toLowerCase();for(b=[].concat(b),c=0;c<b.length;c+=1)if(d=b[c]){if(d.test&&d.test(a))return!0;if(d.toLowerCase()===e)return!0}}var e=a("./trim");b.exports=function(a,b,c){return"number"==typeof a&&(a=""+a),"string"!=typeof a?!!a:(a=e(a),d(a,b||["true","1"])?!0:d(a,c||["false","0"])?!1:void 0)}},{"./trim":60}],57:[function(a,b,c){a("./trim");b.exports=function(a,b){if(null==a)return 0;var c=Math.pow(10,isFinite(b)?b:0);return Math.round(a*c)/c}},{"./trim":60}],58:[function(a,b,c){var d=a("./rtrim");b.exports=function(a,b,c,e){b=b||", ",c=c||" and ";var f=a.slice(),g=f.pop();return a.length>2&&e&&(c=d(b)+c),f.length?f.join(b)+c+g:g}},{"./rtrim":42}],59:[function(a,b,c){var d=a("./toSentence");b.exports=function(a,b,c){return d(a,b,c,!0)}},{"./toSentence":58}],60:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/defaultToWhiteSpace"),f=String.prototype.trim;b.exports=function(a,b){return a=d(a),!b&&f?f.call(a):(b=e(b),a.replace(new RegExp("^"+b+"+|"+b+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],61:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b,c){return a=d(a),c=c||"...",b=~~b,a.length>b?a.slice(0,b)+c:a}},{"./helper/makeString":19}],62:[function(a,b,c){var d=a("./trim");b.exports=function(a){return d(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},{"./trim":60}],63:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/escapeChars");b.exports=function(a){return d(a).replace(/\&([^;]+);/g,function(a,b){var c;return b in e?e[b]:(c=b.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(c[1],16)):(c=b.match(/^#(\d+)$/))?String.fromCharCode(~~c[1]):a})}},{"./helper/escapeChars":17,"./helper/makeString":19}],64:[function(a,b,c){b.exports=function(a,b){return b=b||'"',a[0]===b&&a[a.length-1]===b?a.slice(1,a.length-1):a}},{}],65:[function(a,b,c){var d=a("./sprintf");b.exports=function(a,b){return b.unshift(a),d.apply(null,b)}},{"./sprintf":45}],66:[function(a,b,c){var d=a("./isBlank"),e=a("./trim");b.exports=function(a,b){return d(a)?[]:e(a,b).split(b||/\s+/)}},{"./isBlank":25,"./trim":60}]},{},[14])(14)});var LZString=function(){function a(a,b){if(!e[a]){e[a]={};for(var c=0;c<a.length;c++)e[a][a.charAt(c)]=c}return e[a][b]}var b=String.fromCharCode,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e={},f={compressToBase64:function(a){if(null==a)return"";var b=f._compress(a,6,function(a){return c.charAt(a)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:f._decompress(b.length,32,function(d){return a(c,b.charAt(d))})},compressToUTF16:function(a){return null==a?"":f._compress(a,15,function(a){return b(a+32)})+" "},decompressFromUTF16:function(a){return null==a?"":""==a?null:f._decompress(a.length,16384,function(b){return a.charCodeAt(b)-32})},compressToUint8Array:function(a){for(var b=f.compress(a),c=new Uint8Array(2*b.length),d=0,e=b.length;e>d;d++){var g=b.charCodeAt(d);c[2*d]=g>>>8,c[2*d+1]=g%256}return c},decompressFromUint8Array:function(a){if(null===a||void 0===a)return f.decompress(a);for(var c=new Array(a.length/2),d=0,e=c.length;e>d;d++)c[d]=256*a[2*d]+a[2*d+1];var g=[];return c.forEach(function(a){g.push(b(a))}),f.decompress(g.join(""))},compressToEncodedURIComponent:function(a){return null==a?"":f._compress(a,6,function(a){return d.charAt(a)})},decompressFromEncodedURIComponent:function(b){return null==b?"":""==b?null:(b=b.replace(/ /g,"+"),f._decompress(b.length,32,function(c){return a(d,b.charAt(c))}))},compress:function(a){return f._compress(a,16,function(a){return b(a)})},_compress:function(a,b,c){if(null==a)return"";var d,e,f,g={},h={},i="",j="",k="",l=2,m=3,n=2,o=[],p=0,q=0;for(f=0;f<a.length;f+=1)if(i=a.charAt(f),Object.prototype.hasOwnProperty.call(g,i)||(g[i]=m++,h[i]=!0),j=k+i,Object.prototype.hasOwnProperty.call(g,j))k=j;else{if(Object.prototype.hasOwnProperty.call(h,k)){if(k.charCodeAt(0)<256){for(d=0;n>d;d++)p<<=1,q==b-1?(q=0,o.push(c(p)),p=0):q++;for(e=k.charCodeAt(0),d=0;8>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}else{for(e=1,d=0;n>d;d++)p=p<<1|e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e=0;for(e=k.charCodeAt(0),d=0;16>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}l--,0==l&&(l=Math.pow(2,n),n++),delete h[k]}else for(e=g[k],d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;l--,0==l&&(l=Math.pow(2,n),n++),g[j]=m++,k=String(i)}if(""!==k){if(Object.prototype.hasOwnProperty.call(h,k)){if(k.charCodeAt(0)<256){for(d=0;n>d;d++)p<<=1,q==b-1?(q=0,o.push(c(p)),p=0):q++;for(e=k.charCodeAt(0),d=0;8>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}else{for(e=1,d=0;n>d;d++)p=p<<1|e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e=0;for(e=k.charCodeAt(0),d=0;16>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}l--,0==l&&(l=Math.pow(2,n),n++),delete h[k]}else for(e=g[k],d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;l--,0==l&&(l=Math.pow(2,n),n++)}for(e=2,d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;for(;;){if(p<<=1,q==b-1){o.push(c(p));break}q++}return o.join("")},decompress:function(a){return null==a?"":""==a?null:f._decompress(a.length,32768,function(b){return a.charCodeAt(b)})},_decompress:function(a,c,d){var e,f,g,h,i,j,k,l,m=[],n=4,o=4,p=3,q="",r=[],s={val:d(0),position:c,index:1};for(f=0;3>f;f+=1)m[f]=f;for(h=0,j=Math.pow(2,2),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;switch(e=h){case 0:for(h=0,j=Math.pow(2,8),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;l=b(h);break;case 1:for(h=0,j=Math.pow(2,16),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;l=b(h);break;case 2:return""}for(m[3]=l,g=l,r.push(l);;){if(s.index>a)return"";for(h=0,j=Math.pow(2,p),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;switch(l=h){case 0:for(h=0,j=Math.pow(2,8),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;m[o++]=b(h),l=o-1,n--;break;case 1:for(h=0,j=Math.pow(2,16),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;m[o++]=b(h),l=o-1,n--;break;case 2:return r.join("")}if(0==n&&(n=Math.pow(2,p),p++),m[l])q=m[l];else{if(l!==o)return null;q=g+g.charAt(0)}r.push(q),m[o++]=g+q.charAt(0),n--,g=q,0==n&&(n=Math.pow(2,p),p++)}}};return f}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),_.mixin({apply:function(a,b){var c=_.rest(_.rest(arguments));return b.apply(null,_.cons(a,c))}}),_.mixin({deepExtend:function a(b,c){return _.each(c,function(c,d){void 0!==c&&(!_.isObject(c)||_.isArray(c)||_.isFunction(c)||!_.isObject(b[d])||_.isArray(b[d])||_.isFunction(b[d])?b[d]=c:a(b[d],c))}),b}}),_.mixin({mapWith:function(a,b){var c=_.rest(_.rest(arguments)),d=_.partial.apply(null,_.cat([b,_],c));return _.map(a,d)}}),_.mixin({spy:function(a){_.rest(arguments);return a}}),function(a,b,c){function d(a,b){return b=b||Error,function(){var c,d,e=arguments[0],f="["+(a?a+":":"")+e+"] ",g=arguments[1],h=arguments;for(c=f+g.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1);return b+2<h.length?ma(h[b+2]):a}),c=c+"\nhttp://errors.angularjs.org/1.3.20/"+(a?a+"/":"")+e,d=2;d<arguments.length;d++)c=c+(2==d?"?":"&")+"p"+(d-2)+"="+encodeURIComponent(ma(arguments[d]));return new b(c)}}function e(a){if(null==a||z(a))return!1;var b="length"in Object(a)&&a.length;return a.nodeType===td&&b?!0:u(a)||md(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d,g;if(a)if(x(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(md(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);return a}function g(a){return Object.keys(a).sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){return++kd}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){for(var b=a.$$hashKey,c=1,d=arguments.length;d>c;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;h>g;g++){var i=f[g];a[i]=e[i]}}return k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(Object.create(a),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===hd.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===hd.call(a)}function z(a){return a&&a.window===a}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===hd.call(a)}function C(a){return"[object FormData]"===hd.call(a)}function D(a){return"[object Blob]"===hd.call(a)}function E(a){return"boolean"==typeof a}function F(a){return a&&x(a.then)}function G(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function H(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function I(a){return Xc(a.nodeName||a[0]&&a[0].nodeName)}function J(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),b}function K(a,b,c,d){if(z(a)||A(a))throw id("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw id("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=c.indexOf(a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(md(a)){b.length=0;for(var h=0;h<a.length;h++)g=K(a[h],null,c,d),t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;md(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)a.hasOwnProperty(j)&&(g=K(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g);k(b,i)}}else if(b=a,a)if(md(a))b=K(a,[],c,d);else if(w(a))b=new Date(a.getTime());else if(y(a))b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex;else if(t(a)){var l=Object.create(Object.getPrototypeOf(a));b=K(a,l,c,d)}return b}function L(a,b){if(md(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function M(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!md(a)){if(w(a))return w(b)?M(a.getTime(),b.getTime()):!1;if(y(a))return y(b)?a.toString()==b.toString():!1;if(A(a)||A(b)||z(a)||z(b)||md(b)||w(b)||y(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!M(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!md(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!M(a[e],b[e]))return!1;return!0}}return!1}function N(a,b,c){return a.concat(ed.call(b,c))}function O(a,b){return ed.call(a,b||0)}function P(a,b){var c=arguments.length>2?O(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,N(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Q(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function R(a,b){return"undefined"==typeof a?c:(v(b)||(b=b?2:null),JSON.stringify(a,Q,b))}function S(a){return u(a)?JSON.parse(a):a}function T(a){a=bd(a).clone();try{a.empty()}catch(b){}var c=bd("<div>").append(a).html();try{return a[0].nodeType===vd?Xc(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Xc(b)})}catch(b){return Xc(c)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;Yc.call(d,c)?md(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){md(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function Z(a,b){var c,d,e=qd.length;for(a=bd(a),d=0;e>d;++d)if(c=qd[d]+b,u(c=a.attr(c)))return c;return null}function $(a,b){var c,d,e={};f(qd,function(b){var e=b+"app";!c&&a.hasAttribute&&a.hasAttribute(e)&&(c=a,d=a.getAttribute(e))}),f(qd,function(b){var e,f=b+"app";!c&&(e=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(f))}),c&&(e.strictDi=null!==Z(c,"strict-di"),b(c,d?[d]:[],e))}function _(c,d,e){t(e)||(e={});var g={strictDi:!1};e=l(g,e);var h=function(){if(c=bd(c),c.injector()){var a=c[0]===b?"document":T(c);throw id("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),d.unshift("ng");var f=Sa(d,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},i=/^NG_ENABLE_DEBUG_INFO!/,j=/^NG_DEFER_BOOTSTRAP!/;return a&&i.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(i,"")),a&&!j.test(a.name)?h():(a.name=a.name.replace(j,""),jd.resumeBootstrap=function(a){return f(a,function(a){d.push(a)}),h()},void(x(jd.resumeDeferredBootstrap)&&jd.resumeDeferredBootstrap()))}function aa(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ba(a){var b=jd.element(a).injector();if(!b)throw id("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ca(a,b){return b=b||"_",a.replace(rd,function(a,c){return(c?b:"")+a.toLowerCase()})}function da(){var b;sd||(cd=a.jQuery,cd&&cd.fn.on?(bd=cd,l(cd.fn,{scope:Nd.scope,isolateScope:Nd.isolateScope,controller:Nd.controller,injector:Nd.injector,inheritedData:Nd.inheritedData}),b=cd.cleanData,cd.cleanData=function(a){var c;if(ld)ld=!1;else for(var d,e=0;null!=(d=a[e]);e++)c=cd._data(d,"events"),c&&c.$destroy&&cd(d).triggerHandler("$destroy");b(a)}):bd=ua,jd.element=bd,sd=!0)}function ea(a,b,c){if(!a)throw id("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function fa(a,b,c){return c&&md(a)&&(a=a[a.length-1]),ea(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ga(a,b){if("hasOwnProperty"===a)throw id("badname","hasOwnProperty is not a valid {0} name",b)}function ha(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?P(f,a):a}function ia(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return bd(d)}function ja(){return Object.create(null)}function ka(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d,e){return e||(e=b),function(){return e[d||"push"]([a,c,arguments]),j}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);
var b=[],e=[],h=[],i=a("$injector","invoke","push",e),j={_invokeQueue:b,_configBlocks:e,_runBlocks:h,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:i,run:function(a){return h.push(a),this}};return g&&i(g),j})}})}function la(a){var b=[];return JSON.stringify(a,function(a,c){if(c=Q(a,c),t(c)){if(b.indexOf(c)>=0)return"<<already seen>>";b.push(c)}return c})}function ma(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?la(a):a}function na(b){l(b,{bootstrap:_,copy:K,extend:l,equals:M,element:bd,forEach:f,injector:Sa,noop:o,bind:P,toJson:R,fromJson:S,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:G,isArray:md,version:zd,isDate:w,lowercase:Xc,uppercase:Zc,callbacks:{counter:0},getTestability:ba,$$minErr:d,$$csp:pd,reloadWithDebugInfo:aa}),dd=ka(a);try{dd("ngLocale")}catch(c){dd("ngLocale",[]).provider("$locale",qb)}dd("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Xb}),a.provider("$compile",Za).directive({a:Fe,input:We,textarea:We,form:Ke,script:Mf,select:Pf,style:Rf,option:Qf,ngBind:Ze,ngBindHtml:_e,ngBindTemplate:$e,ngClass:bf,ngClassEven:df,ngClassOdd:cf,ngCloak:ef,ngController:ff,ngForm:Le,ngHide:Gf,ngIf:jf,ngInclude:kf,ngInit:mf,ngNonBindable:Af,ngPluralize:Bf,ngRepeat:Cf,ngShow:Ff,ngStyle:Hf,ngSwitch:If,ngSwitchWhen:Jf,ngSwitchDefault:Kf,ngOptions:Of,ngTransclude:Lf,ngModel:xf,ngList:nf,ngChange:af,pattern:Tf,ngPattern:Tf,required:Sf,ngRequired:Sf,minlength:Vf,ngMinlength:Vf,maxlength:Uf,ngMaxlength:Uf,ngValue:Ye,ngModelOptions:zf}).directive({ngInclude:lf}).directive(Ge).directive(gf),a.provider({$anchorScroll:Ta,$animate:Xd,$browser:Wa,$cacheFactory:Xa,$controller:bb,$document:cb,$exceptionHandler:db,$filter:hc,$interpolate:ob,$interval:pb,$http:kb,$httpBackend:mb,$location:Eb,$log:Fb,$parse:Rb,$rootScope:Wb,$q:Sb,$$q:Tb,$sce:_b,$sceDelegate:$b,$sniffer:ac,$templateCache:Ya,$templateRequest:bc,$$testability:cc,$timeout:dc,$window:gc,$$rAF:Vb,$$asyncCallback:Ua,$$jqLite:Na})}])}function oa(){return++Bd}function pa(a){return a.replace(Ed,function(a,b,c,d){return d?c.toUpperCase():c}).replace(Fd,"Moz$1")}function qa(a){return!Jd.test(a)}function ra(a){var b=a.nodeType;return b===td||!b||b===xd}function sa(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(qa(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),d=(Kd.exec(a)||["",""])[1].toLowerCase(),e=Md[d]||Md._default,c.innerHTML=e[1]+a.replace(Ld,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=N(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function ta(a,c){c=c||b;var d;return(d=Id.exec(a))?[c.createElement(d[1])]:(d=sa(a,c))?d.childNodes:[]}function ua(a){if(a instanceof ua)return a;var b;if(u(a)&&(a=nd(a),b=!0),!(this instanceof ua)){if(b&&"<"!=a.charAt(0))throw Hd("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ua(a)}b?Ea(this,ta(a)):Ea(this,a)}function va(a){return a.cloneNode(!0)}function wa(a,b){if(b||ya(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)ya(c[d])}function xa(a,b,c,d){if(s(d))throw Hd("offargs","jqLite#off() does not support the `selector` argument");var e=za(a),g=e&&e.events,h=e&&e.handle;if(h)if(b)f(b.split(" "),function(b){if(s(c)){var d=g[b];if(J(d||[],c),d&&d.length>0)return}Dd(a,b,h),delete g[b]});else for(b in g)"$destroy"!==b&&Dd(a,b,h),delete g[b]}function ya(a,b){var d=a.ng339,e=d&&Ad[d];if(e){if(b)return void delete e.data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),xa(a)),delete Ad[d],a.ng339=c}}function za(a,b){var d=a.ng339,e=d&&Ad[d];return b&&!e&&(a.ng339=d=oa(),e=Ad[d]={events:{},data:{},handle:c}),e}function Aa(a,b,c){if(ra(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=za(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];l(h,b)}}}function Ba(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Ca(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",nd((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+nd(b)+" "," ")))})}function Da(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=nd(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",nd(c))}}function Ea(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Fa(a,b){return Ga(a,"$"+(b||"ngController")+"Controller")}function Ga(a,b,d){a.nodeType==xd&&(a=a.documentElement);for(var e=md(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=bd.data(a,e[f]))!==c)return d;a=a.parentNode||a.nodeType===yd&&a.host}}function Ha(a){for(wa(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ia(a,b){b||wa(a);var c=a.parentNode;c&&c.removeChild(a)}function Ja(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):bd(c).on("load",b)}function Ka(a,b){var c=Od[b.toLowerCase()];return c&&Pd[I(a)]&&c}function La(a,b){var c=a.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Qd[b]}function Ma(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0},f>1&&(e=L(e));for(var h=0;f>h;h++)c.isImmediatePropagationStopped()||e[h].call(a,c)}};return c.elem=a,c}function Na(){this.$get=function(){return l(ua,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ba(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Da(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Ca(a,b)}})}}function Oa(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||j)():d+":"+a}function Pa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Qa(a){var b=a.toString().replace(Ud,""),c=b.match(Rd);return c?"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ra(a,b,c){var d,e,g,h;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw u(c)&&c||(c=a.name||Qa(a)),Vd("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=a.toString().replace(Ud,""),g=e.match(Rd),f(g[1].split(Sd),function(a){a.replace(Td,function(a,b,c){d.push(c)})})}a.$inject=d}}else md(a)?(h=a.length-1,fa(a[h],"fn"),d=a.slice(0,h)):fa(a,"fn",!0);return d}function Sa(a,b){function d(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function e(a,b){if(ga(a,"service"),(x(b)||md(b))&&(b=A.instantiate(b)),!b.$get)throw Vd("pget","Provider '{0}' must define $get factory method.",a);return z[a+v]=b}function g(a,b){return function(){var c=C.invoke(b,this);if(r(c))throw Vd("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function j(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function k(a,b){return h(a,q(b),!1)}function l(a,b){ga(a,"constant"),z[a]=b,B[a]=b}function m(a,b){var c=A.get(a+v),d=c.$get;c.$get=function(){var a=C.invoke(d,c);return C.invoke(b,null,{$delegate:a})}}function n(a){var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=A.get(d[0]);e[d[1]].apply(e,d[2])}}if(!y.get(a)){y.put(a,!0);try{u(a)?(b=dd(a),c=c.concat(n(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):x(a)?c.push(A.invoke(a)):md(a)?c.push(A.invoke(a)):fa(a,"module")}catch(e){throw md(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Vd("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function p(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===s)throw Vd("cdep","Circular dependency found: {0}",b+" <- "+w.join(" <- "));return a[b]}try{return w.unshift(b),a[b]=s,a[b]=c(b,d)}catch(e){throw a[b]===s&&delete a[b],e}finally{w.shift()}}function e(a,c,e,f){"string"==typeof e&&(f=e,e=null);var g,h,i,j=[],k=Sa.$$annotate(a,b,f);for(h=0,g=k.length;g>h;h++){if(i=k[h],"string"!=typeof i)throw Vd("itkn","Incorrect injection token! Expected service name as string, got {0}",i);j.push(e&&e.hasOwnProperty(i)?e[i]:d(i,f))}return md(a)&&(a=a[g]),a.apply(c,j)}function f(a,b,c){var d=Object.create((md(a)?a[a.length-1]:a).prototype||null),f=e(a,d,b,c);return t(f)||x(f)?f:d}return{invoke:e,instantiate:f,get:d,annotate:Sa.$$annotate,has:function(b){return z.hasOwnProperty(b+v)||a.hasOwnProperty(b)}}}b=b===!0;var s={},v="Provider",w=[],y=new Pa([],!0),z={$provide:{provider:d(e),factory:d(h),service:d(j),value:d(k),constant:d(l),decorator:m}},A=z.$injector=p(z,function(a,b){throw jd.isString(b)&&w.push(b),Vd("unpr","Unknown provider: {0}",w.join(" <- "))}),B={},C=B.$injector=p(B,function(a,b){var d=A.get(a+v,b);return C.invoke(d.$get,d,c,a)});return f(n(a),function(a){C.invoke(a||o)}),C}function Ta(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===I(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(x(a))a=a();else if(G(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else v(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(){var a,b=c.hash();b?(a=i.getElementById(b))?g(a):(a=e(i.getElementsByName(b)))?g(a):"top"===b&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Ja(function(){d.$evalAsync(h)})}),h}]}function Ua(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Va(a,b,d,e){function g(a){try{a.apply(null,O(arguments,1))}finally{if(y--,0===y)for(;z.length;)try{z.pop()()}catch(b){d.error(b)}}}function h(a){var b=a.indexOf("#");return-1===b?"":a.substr(b)}function i(a,b){!function c(){f(B,function(a){a()}),A=b(c,a)}()}function j(){l(),m()}function k(){try{return t.state}catch(a){}}function l(){C=k(),C=r(C)?null:C,M(C,J)&&(C=J),J=C}function m(){(E!==p.url()||D!==C)&&(E=p.url(),D=C,f(H,function(a){a(p.url(),C)}))}function n(a){try{return decodeURIComponent(a)}catch(b){return a}}var p=this,q=b[0],s=a.location,t=a.history,v=a.setTimeout,w=a.clearTimeout,x={};p.isMock=!1;var y=0,z=[];p.$$completeOutstandingRequest=g,p.$$incOutstandingRequestCount=function(){y++},p.notifyWhenNoOutstandingRequests=function(a){f(B,function(a){a()}),0===y?a():z.push(a)};var A,B=[];p.addPollFn=function(a){return r(A)&&i(100,v),B.push(a),a};var C,D,E=s.href,F=b.find("base"),G=null;l(),D=C,p.url=function(b,c,d){if(r(d)&&(d=null),s!==a.location&&(s=a.location),t!==a.history&&(t=a.history),b){var f=D===d;if(E===b&&(!e.history||f))return p;var g=E&&vb(E)===vb(b);return E=b,D=d,!e.history||g&&f?((!g||G)&&(G=b),c?s.replace(b):g?s.hash=h(b):s.href=b):(t[c?"replaceState":"pushState"](d,"",b),l(),D=C),p}return G||s.href.replace(/%27/g,"'")},p.state=function(){return C};var H=[],I=!1,J=null;p.onUrlChange=function(b){return I||(e.history&&bd(a).on("popstate",j),bd(a).on("hashchange",j),I=!0),H.push(b),b},p.$$checkUrlChange=m,p.baseHref=function(){var a=F.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var K={},L="",N=p.baseHref();p.cookies=function(a,b){var e,f,g,h,i;if(!a){if(q.cookie!==L)for(L=q.cookie,f=L.split("; "),K={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=n(g.substring(0,i)),K[a]===c&&(K[a]=n(g.substring(i+1))));return K}b===c?q.cookie=encodeURIComponent(a)+"=;path="+N+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(q.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+N).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},p.defer=function(a,b){var c;return y++,c=v(function(){delete x[c],g(a)},b||0),x[c]=!0,c},p.defer.cancel=function(a){return x[a]?(delete x[a],w(a),g(o),!0):!1}}function Wa(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Va(a,d,b,c)}]}function Xa(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Ya(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Za(a,d){function e(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};return f(a,function(a,e){var f=a.match(c);if(!f)throw Yd("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}}),d}var g={},h="Directive",j=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,k=/(([\w\-]+)(?:\:([^;]+))?;?)/,m=H("ngSrc,ngSrcset,src,srcset"),r=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,v=/^(on[a-z]+|formaction)$/;this.directive=function y(b,c){return ga(b,"directive"),u(b)?(ea(c,"directiveFactory"),g.hasOwnProperty(b)||(g[b]=[],a.factory(b+h,["$injector","$exceptionHandler",function(a,c){var d=[];return f(g[b],function(f,g){try{var h=a.invoke(f);x(h)?h={compile:q(h)}:!h.compile&&h.link&&(h.compile=q(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||b,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA",t(h.scope)&&(h.$$isolateBindings=e(h.scope,h.name)),d.push(h)}catch(i){c(i)}}),d}])),g[b].push(c)):f(b,i(y)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var w=!0;this.debugInfoEnabled=function(a){return s(a)?(w=a,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,i,q,s,y,z,B,C,D){function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,c,d,e){a instanceof bd||(a=bd(a)),f(a,function(b,c){b.nodeType==vd&&b.nodeValue.match(/\S+/)&&(a[c]=bd(b).wrap("<span></span>").parent()[0])});var g=H(a,b,a,c,d,e);F.$$addScopeClass(a);var h=null;return function(b,c,d){ea(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers,i=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),h||(h=G(i));var j;if(j="html"!==h?bd($(h,bd("<div>").append(a).html())):c?Nd.clone.call(a):a,f)for(var k in f)j.data("$"+k+"Controller",f[k].instance);return F.$$addScopeInfo(j,b),c&&c(j,b),g&&g(b,j,j,e),j}}function G(a){var b=a&&a[0];return b&&"foreignobject"!==I(b)&&b.toString().match(/SVG/)?"svg":"html"}function H(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,q;if(o){var r=d.length;for(q=new Array(r),k=0;k<p.length;k+=3)m=p[k],q[m]=d[m]}else q=d;for(k=0,l=p.length;l>k;)i=q[p[k++]],g=p[k++],h=p[k++],g?(g.scope?(j=a.$new(),F.$$addScopeInfo(bd(i),j)):j=a,n=g.transcludeOnThisElement?K(a,g.transclude,f,g.elementTranscludeOnThisElement):!g.templateOnThisElement&&f?f:!f&&b?K(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o,p=[],q=0;q<a.length;q++)i=new ga,j=L(a[q],[],i,0===q?e:c,f),k=j.length?Q(j,a[q],i,b,d,null,[],[],g):null,k&&k.scope&&F.$$addScopeClass(i.$$element),m=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:H(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),(k||m)&&(p.push(q,k,m),n=!0,o=o||k),g=null;return n?h:null}function K(a,b,c,d){var e=function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return e}function L(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case td:S(b,$a(I(a)),"E",d,e);for(var l,m,n,o,p,q,r=a.attributes,s=0,v=r&&r.length;v>s;s++){var w=!1,x=!1;l=r[s],m=l.name,p=nd(l.value),o=$a(m),(q=la.test(o))&&(m=m.replace(Zd,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=o.replace(/(Start|End)$/,"");U(y)&&o===y+"Start"&&(w=m,x=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),n=$a(m.toLowerCase()),i[n]=m,(q||!c.hasOwnProperty(n))&&(c[n]=p,Ka(a,n)&&(c[n]=!0)),aa(a,b,p,n,q),S(b,n,"A",d,e,w,x)}if(g=a.className,t(g)&&(g=g.animVal),u(g)&&""!==g)for(;f=k.exec(g);)n=$a(f[2]),S(b,n,"C",d,e)&&(c[n]=nd(f[3])),g=g.substr(f.index+f[0].length);break;case vd:Z(b,a.nodeValue);break;case wd:try{f=j.exec(a.nodeValue),f&&(n=$a(f[1]),S(b,n,"M",d,e)&&(c[n]=nd(f[2])))}catch(z){}}return b.sort(X),b}function N(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Yd("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==td&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return bd(d)}function P(a,b,c){return function(d,e,f,g,h){return e=N(e[0],b,c),a(d,e,f,g,h)}}function Q(a,g,h,i,j,k,l,m,n){function o(a,b,c,d){a&&(c&&(a=P(a,c,d)),a.require=z.require,a.directiveName=B,(I===z||z.$$isolateScope)&&(a=da(a,{isolateScope:!0})),l.push(a)),b&&(c&&(b=P(b,c,d)),b.require=z.require,b.directiveName=B,(I===z||z.$$isolateScope)&&(b=da(b,{isolateScope:!0})),m.push(b))}function p(a,b,c,d){var e,g,h="data",i=!1,j=c;if(u(b)){if(g=b.match(r),b=b.substring(g[0].length),g[3]&&(g[1]?g[3]=null:g[1]=g[3]),"^"===g[1]?h="inheritedData":"^^"===g[1]&&(h="inheritedData",j=c.parent()),"?"===g[2]&&(i=!0),e=null,d&&"data"===h&&(e=d[b])&&(e=e.instance),e=e||j[h]("$"+b+"Controller"),!e&&!i)throw Yd("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e||null}return md(b)&&(e=[],f(b,function(b){e.push(p(a,b,c,d))})),e}function v(a,b,e,i,j){function k(a,b,d){var e;return A(a)||(d=b,b=a,a=c),U&&(e=v),d||(d=U?x.parent():x),j(a,b,e,d,D)}var n,o,r,t,u,v,w,x,z;if(g===e?(z=h,x=h.$$element):(x=bd(e),z=new ga(x,h)),I&&(u=b.$new(!0)),j&&(w=k,w.$$boundTransclude=j),H&&(y={},v={},f(H,function(a){var c,d={$scope:a===I||a.$$isolateScope?u:b,$element:x,$attrs:z,$transclude:w};t=a.controller,"@"==t&&(t=z[a.name]),c=s(t,d,!0,a.controllerAs),v[a.name]=c,U||x.data("$"+a.name+"Controller",c.instance),y[a.name]=c})),I){F.$$addScopeInfo(x,u,!0,!(J&&(J===I||J===I.$$originalDirective))),F.$$addScopeClass(x,!0);var B=y&&y[I.name],C=u;B&&B.identifier&&I.bindToController===!0&&(C=B.instance),f(u.$$isolateBindings=I.$$isolateBindings,function(a,c){var e,f,g,h,i=a.attrName,j=a.optional,k=a.mode;switch(k){case"@":z.$observe(i,function(a){C[c]=a}),z.$$observers[i].$$scope=b,z[i]&&(C[c]=d(z[i])(b));break;case"=":if(j&&!z[i])return;f=q(z[i]),h=f.literal?M:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=C[c]=f(b),Yd("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",z[i],I.name)},e=C[c]=f(b);var l=function(a){return h(a,C[c])||(h(a,e)?g(b,a=C[c]):C[c]=a),e=a};l.$stateful=!0;var m;m=a.collection?b.$watchCollection(z[i],l):b.$watch(q(z[i],l),null,f.literal),u.$on("$destroy",m);break;case"&":f=q(z[i]),C[c]=function(a){return f(b,a)}}})}for(y&&(f(y,function(a){a()}),y=null),n=0,o=l.length;o>n;n++)r=l[n],fa(r,r.isolateScope?u:b,x,z,r.require&&p(r.directiveName,r.require,x,v),w);var D=b;for(I&&(I.template||null===I.templateUrl)&&(D=u),a&&a(D,e.childNodes,c,j),n=m.length-1;n>=0;n--)r=m[n],fa(r,r.isolateScope?u:b,x,z,r.require&&p(r.directiveName,r.require,x,v),w)}n=n||{};for(var w,y,z,B,C,D,E,G=-Number.MAX_VALUE,H=n.controllerDirectives,I=n.newIsolateScopeDirective,J=n.templateDirective,K=n.nonTlbTranscludeDirective,Q=!1,S=!1,U=n.hasElementTranscludeDirective,X=h.$$element=bd(g),Z=k,_=i,aa=0,ca=a.length;ca>aa;aa++){z=a[aa];var ea=z.$$start,ha=z.$$end;if(ea&&(X=N(g,ea,ha)),C=c,G>z.priority)break;if((E=z.scope)&&(z.templateUrl||(t(E)?(Y("new/isolated scope",I||w,z,X),I=z):Y("new/isolated scope",I,z,X)),w=w||z),B=z.name,!z.templateUrl&&z.controller&&(E=z.controller,H=H||{},Y("'"+B+"' controller",H[B],z,X),H[B]=z),(E=z.transclude)&&(Q=!0,z.$$tlb||(Y("transclusion",K,z,X),K=z),"element"==E?(U=!0,G=z.priority,C=X,X=h.$$element=bd(b.createComment(" "+B+": "+h[B]+" ")),g=X[0],ba(j,O(C),g),_=F(C,i,G,Z&&Z.name,{nonTlbTranscludeDirective:K})):(C=bd(va(g)).contents(),X.empty(),_=F(C,i))),z.template)if(S=!0,Y("template",J,z,X),J=z,E=x(z.template)?z.template(X,h):z.template,E=ka(E),z.replace){if(Z=z,C=qa(E)?[]:ab($(z.templateNamespace,nd(E))),g=C[0],1!=C.length||g.nodeType!==td)throw Yd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",B,"");ba(j,X,g);var ia={$attr:{}},ja=L(g,[],ia),la=a.splice(aa+1,a.length-(aa+1));I&&R(ja),a=a.concat(ja).concat(la),V(h,ia),ca=a.length}else X.html(E);if(z.templateUrl)S=!0,Y("template",J,z,X),J=z,z.replace&&(Z=z),v=W(a.splice(aa,a.length-aa),X,h,j,Q&&_,l,m,{controllerDirectives:H,newIsolateScopeDirective:I,templateDirective:J,nonTlbTranscludeDirective:K}),ca=a.length;else if(z.compile)try{D=z.compile(X,h,_),x(D)?o(null,D,ea,ha):D&&o(D.pre,D.post,ea,ha)}catch(ma){e(ma,T(X))}z.terminal&&(v.terminal=!0,G=Math.max(G,z.priority))}return v.scope=w&&w.scope===!0,v.transcludeOnThisElement=Q,v.elementTranscludeOnThisElement=U,v.templateOnThisElement=S,v.transclude=_,n.hasElementTranscludeDirective=U,v}function R(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function S(b,d,f,i,j,k,l){if(d===j)return null;var m=null;if(g.hasOwnProperty(d))for(var o,p=a.get(d+h),q=0,r=p.length;r>q;q++)try{o=p[q],(i===c||i>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){e(s)}return m}function U(b){if(g.hasOwnProperty(b))for(var c,d=a.get(b+h),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function V(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function W(a,b,c,d,e,g,h,j){var k,l,m=[],o=b[0],p=a.shift(),q=n(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=x(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),i(r).then(function(i){var n,u,v,w;if(i=ka(i),p.replace){if(v=qa(i)?[]:ab($(s,nd(i))),n=v[0],1!=v.length||n.nodeType!==td)throw Yd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},ba(d,b,n);var x=L(n,[],u);t(p.scope)&&R(x),a=x.concat(a),V(c,u)}else n=o,b.html(i);for(a.unshift(q),k=Q(a,n,c,e,b,p,g,h,j),f(d,function(a,c){a==n&&(d[c]=b[0])}),l=H(b[0].childNodes,e);m.length;){var y=m.shift(),z=m.shift(),A=m.shift(),B=m.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=va(n)),ba(A,bd(z),C),E(bd(C),D)}w=k.transcludeOnThisElement?K(y,k.transclude,B):B,k(l,y,C,d,w)}}m=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(m?m.push(b,c,d,f):(k.transcludeOnThisElement&&(f=K(b,k.transclude,e)),k(l,b,c,d,f)))}}function X(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Y(a,b,c,d){if(b)throw Yd("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function Z(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=!!b.length;return d&&F.$$addBindingClass(b),function(a,b){var e=b.parent();d||F.$$addBindingClass(e),F.$$addBindingInfo(e,c.expressions),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function $(a,c){switch(a=Xc(a||"html")){case"svg":case"math":var d=b.createElement("div");return d.innerHTML="<"+a+">"+c+"</"+a+">",d.childNodes[0].childNodes;default:return c}}function _(a,b){if("srcdoc"==b)return B.HTML;var c=I(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?B.RESOURCE_URL:void 0}function aa(a,b,c,e,f){var g=_(a,e);f=m[e]||f;var h=d(c,!0,g,f);if(h){if("multiple"===e&&"select"===I(a))throw Yd("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers={});if(v.test(e))throw Yd("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==c&&(h=k&&d(k,!0,g,f),c=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function ba(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1,a.context===g&&(a.context=d);break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),bd(d).data(bd(g).data()),cd?(ld=!0,cd.cleanData([g])):delete bd.cache[g[bd.expando]];for(var n=1,o=c.length;o>n;n++){var p=c[n];bd(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function da(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function fa(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,T(c))}}var ga=function(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a};ga.prototype={$normalize:$a,$addClass:function(a){a&&a.length>0&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&C.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=_a(a,b);c&&c.length&&C.addClass(this.$$element,c);var d=_a(b,a);d&&d.length&&C.removeClass(this.$$element,d)},$set:function(a,b,d,g){var h,i=this.$$element[0],j=Ka(i,a),k=La(i,a),l=a;if(j?(this.$$element.prop(a,b),g=j):k&&(this[k]=b,l=k),this[a]=b,g?this.$attr[a]=g:(g=this.$attr[a],g||(this.$attr[a]=g=ca(a,"-"))),h=I(this.$$element),"a"===h&&"href"===a||"img"===h&&"src"===a)this[a]=b=D(b,"src"===a);else if("img"===h&&"srcset"===a){for(var m="",n=nd(b),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(n)?o:/(,)/,q=n.split(p),r=Math.floor(q.length/2),s=0;r>s;s++){var t=2*s;m+=D(nd(q[t]),!0),m+=" "+nd(q[t+1])}var u=nd(q[2*s]).split(/\s/);m+=D(nd(u[0]),!0),2===u.length&&(m+=" "+nd(u[1])),this[a]=b=m}d!==!1&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));var v=this.$$observers;v&&f(v[l],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ja()),e=d[a]||(d[a]=[]);return e.push(b),y.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){J(e,b)}}};var ha=d.startSymbol(),ia=d.endSymbol(),ka="{{"==ha||"}}"==ia?p:function(a){return a.replace(/\{\{/g,ha).replace(/}}/g,ia)},la=/^ngAttr[A-Z]/;return F.$$addBindingInfo=w?function(a,b){var c=a.data("$binding")||[];md(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:o,F.$$addBindingClass=w?function(a){E(a,"ng-binding")}:o,F.$$addScopeInfo=w?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:o,F.$$addScopeClass=w?function(a,b){E(a,b?"ng-isolate-scope":"ng-scope")}:o,F}]}function $a(a){return pa(a.replace(Zd,""))}function _a(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function ab(a){a=bd(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===wd&&fd.call(a,b,1)}return a}function bb(){var a={},b=!1,e=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){ga(b,"controller"),t(b)?l(a,b):a[b]=c},this.allowGlobals=function(){b=!0},this.$get=["$injector","$window",function(f,g){function h(a,b,c,e){if(!a||!t(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,i,j,k){var m,n,o,p;if(j=j===!0,k&&u(k)&&(p=k),u(d)){if(n=d.match(e),!n)throw $d("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",d);o=n[1],p=p||n[3],d=a.hasOwnProperty(o)?a[o]:ha(i.$scope,o,!0)||(b?ha(g,o,!0):c),fa(d,o,!0)}if(j){var q=(md(d)?d[d.length-1]:d).prototype;return m=Object.create(q||null),p&&h(i,p,m,o||d.name),l(function(){return f.invoke(d,m,i,o),m},{instance:m,identifier:p})}return m=f.instantiate(d,i,o),p&&h(i,p,m,o||d.name),m}}]}function cb(){this.$get=["$window",function(a){return bd(a.document)}]}function db(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function eb(a,b){if(u(a)){var c=a.replace(de,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(_d)||fb(c))&&(a=S(c))}}return a}function fb(a){var b=a.match(be);return b&&ce[b[0]].test(a)}function gb(a){var b,c,d,e=ja();return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Xc(nd(a.substr(0,d))),c=nd(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function hb(a){var b=t(a)?a:c;return function(c){if(b||(b=gb(a)),c){var d=b[Xc(c)];return void 0===d&&(d=null),d}return b}}function ib(a,b,c,d){return x(d)?d(a,b,c):(f(d,function(d){a=d(a,b,c)}),a)}function jb(a){return a>=200&&300>a}function kb(){var a=this.defaults={transformResponse:[eb],transformRequest:[function(a){return!t(a)||B(a)||D(a)||C(a)?a:R(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(ae),put:L(ae),patch:L(ae)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},b=!1;this.useApplyAsync=function(a){return s(a)?(b=!!a,this):b};var e=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(g,i,j,k,m,n){function o(b){function e(a){var b=l({},a);return a.data?b.data=ib(a.data,a.headers,a.status,i.transformResponse):b.data=a.data,jb(a.status)?b:m.reject(b)}function g(a){var b,c={};return f(a,function(a,d){x(a)?(b=a(),null!=b&&(c[d]=b)):c[d]=a}),c}function h(b){var c,d,e,f=a.headers,h=l({},b.headers);f=l({},f.common,f[Xc(b.method)]);a:for(c in f){d=Xc(c);for(e in h)if(Xc(e)===d)continue a;h[c]=f[c]}return g(h)}if(!jd.isObject(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);var i=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},b);i.headers=h(b),i.method=Zc(i.method);var j=function(b){var d=b.headers,g=ib(b.data,hb(d),c,b.transformRequest);return r(g)&&f(d,function(a,b){"content-type"===Xc(b)&&delete d[b];
}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),v(b,g).then(e,e)},k=[j,c],n=m.when(i);for(f(A,function(a){(a.request||a.requestError)&&k.unshift(a.request,a.requestError),(a.response||a.responseError)&&k.push(a.response,a.responseError)});k.length;){var o=k.shift(),p=k.shift();n=n.then(o,p)}return n.success=function(a){return fa(a,"fn"),n.then(function(b){a(b.data,b.status,b.headers,i)}),n},n.error=function(a){return fa(a,"fn"),n.then(null,function(b){a(b.data,b.status,b.headers,i)}),n},n}function p(a){f(arguments,function(a){o[a]=function(b,c){return o(l(c||{},{method:a,url:b}))}})}function q(a){f(arguments,function(a){o[a]=function(b,c,d){return o(l(d||{},{method:a,url:b,data:c}))}})}function v(d,e){function f(a,c,d,e){function f(){h(c,a,d,e)}n&&(jb(a)?n.put(w,[a,c,gb(d),e]):n.remove(w)),b?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function h(a,b,c,e){b=b>=-1?b:0,(jb(b)?q.resolve:q.reject)({data:a,status:b,headers:hb(c),config:d,statusText:e})}function j(a){h(a.data,a.status,L(a.headers()),a.statusText)}function l(){var a=o.pendingRequests.indexOf(d);-1!==a&&o.pendingRequests.splice(a,1)}var n,p,q=m.defer(),u=q.promise,v=d.headers,w=y(d.url,d.params);if(o.pendingRequests.push(d),u.then(l,l),!d.cache&&!a.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(n=t(d.cache)?d.cache:t(a.cache)?a.cache:z),n&&(p=n.get(w),s(p)?F(p)?p.then(j,j):md(p)?h(p[1],p[0],L(p[2]),p[3]):h(p,200,{},"OK"):n.put(w,u)),r(p)){var x=fc(d.url)?i.cookies()[d.xsrfCookieName||a.xsrfCookieName]:c;x&&(v[d.xsrfHeaderName||a.xsrfHeaderName]=x),g(d.method,w,e,f,v,d.timeout,d.withCredentials,d.responseType)}return u}function y(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(md(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():R(a)),c.push(Y(b)+"="+Y(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var z=j("$http"),A=[];return f(e,function(a){A.unshift(u(a)?n.get(a):n.invoke(a))}),o.pendingRequests=[],p("get","delete","head","jsonp"),q("post","put","patch"),o.defaults=a,o}]}function lb(){return new a.XMLHttpRequest}function mb(){this.$get=["$browser","$window","$document",function(a,b,c){return nb(a,lb,a.defer,b.angular.callbacks,c[0])}]}function nb(a,b,d,e,g){function h(a,b,c){var d=g.createElement("script"),f=null;return d.type="text/javascript",d.src=a,d.async=!0,f=function(a){Dd(d,"load",f),Dd(d,"error",f),g.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},Cd(d,"load",f),Cd(d,"error",f),g.body.appendChild(d),f}return function(g,i,j,k,l,m,n,p){function q(){u&&u(),v&&v.abort()}function r(b,e,f,g,h){y!==c&&d.cancel(y),u=v=null,b(e,f,g,h),a.$$completeOutstandingRequest(o)}if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==Xc(g)){var t="_"+(e.counter++).toString(36);e[t]=function(a){e[t].data=a,e[t].called=!0};var u=h(i.replace("JSON_CALLBACK","angular.callbacks."+t),t,function(a,b){r(k,a,e[t].data,"",b),e[t]=o})}else{var v=b();v.open(g,i,!0),f(l,function(a,b){s(a)&&v.setRequestHeader(b,a)}),v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:"file"==ec(i).protocol?404:0),r(k,c,b,v.getAllResponseHeaders(),a)};var w=function(){r(k,-1,null,null,"")};if(v.onerror=w,v.onabort=w,n&&(v.withCredentials=!0),p)try{v.responseType=p}catch(x){if("json"!==p)throw x}v.send(j||null)}if(m>0)var y=d(q,m);else F(m)&&m.then(q)}}function ob(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,m,n){function o(c){return c.replace(j,a).replace(k,b)}function p(a){try{return a=D(a),n&&!s(a)?a:E(a)}catch(b){var c=ee("interr","Can't interpolate: {0}\n{1}",f,b.toString());d(c)}}n=!!n;for(var q,t,u,v=0,w=[],y=[],z=f.length,A=[],B=[];z>v;){if(-1==(q=f.indexOf(a,v))||-1==(t=f.indexOf(b,q+h))){v!==z&&A.push(o(f.substring(v)));break}v!==q&&A.push(o(f.substring(v,q))),u=f.substring(q+h,t),w.push(u),y.push(c(u,p)),v=t+i,B.push(A.length),A.push("")}if(m&&A.length>1)throw ee("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);if(!g||w.length){var C=function(a){for(var b=0,c=w.length;c>b;b++){if(n&&r(a[b]))return;A[B[b]]=a[b]}return A.join("")},D=function(a){return m?e.getTrusted(m,a):e.valueOf(a)},E=function(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=R(a)}return a};return l(function(a){var b=0,c=w.length,e=new Array(c);try{for(;c>b;b++)e[b]=y[b](a);return C(e)}catch(g){var h=ee("interr","Can't interpolate: {0}\n{1}",f,g.toString());d(h)}},{exp:f,expressions:w,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(y,function(c,e){var f=C(c);x(b)&&b.call(this,f,c!==e?d:f,a),d=f},c)}})}}var h=a.length,i=b.length,j=new RegExp(a.replace(/./g,f),"g"),k=new RegExp(b.replace(/./g,f),"g");return g.startSymbol=function(){return a},g.endSymbol=function(){return b},g}]}function pb(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(e,g,h,i){var j=b.setInterval,k=b.clearInterval,l=0,m=s(i)&&!i,n=(m?d:c).defer(),o=n.promise;return h=s(h)?h:0,o.then(null,null,e),o.$$intervalId=j(function(){n.notify(l++),h>0&&l>=h&&(n.resolve(l),k(o.$$intervalId),delete f[o.$$intervalId]),m||a.$apply()},g),f[o.$$intervalId]=n,o}var f={};return e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1},e}]}function qb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(a){return 1===a?"one":"other"}}}}function rb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function sb(a,b){var c=ec(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=m(c.port)||ge[c.protocol]||null}function tb(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=ec(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=V(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function ub(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function vb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function wb(a){return a.replace(/(#.+)|#$/,"$1")}function xb(a){return a.substr(0,vb(a).lastIndexOf("/")+1)}function yb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function zb(a,b,d){this.$$html5=!0,d=d||"",sb(a,this),this.$$parse=function(a){var c=ub(b,a);if(!u(c))throw he("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);tb(c,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),c=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(a?"?"+a:"")+c,this.$$absUrl=b+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h,i;return(g=ub(a,e))!==c?(h=g,i=(g=ub(d,g))!==c?b+(ub("/",g)||g):a+h):(g=ub(b,e))!==c?i=b+g:b==e+"/"&&(i=b),i&&this.$$parse(i),!!i}}function Ab(a,b,c){sb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=ub(a,d)||ub(b,d);r(g)||"#"!==g.charAt(0)?this.$$html5?f=g:(f="",r(g)&&(a=d,this.replace())):(f=ub(c,g),r(f)&&(f=g)),tb(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var b=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+(this.$$url?c+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return vb(a)==vb(b)?(this.$$parse(b),!0):!1}}function Bb(a,b,c){this.$$html5=!0,Ab.apply(this,arguments),this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==vb(d)?f=d:(g=ub(b,d))?f=a+c+g:b===d+"/"&&(f=b),f&&this.$$parse(f),!!f},this.$$compose=function(){var b=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+c+this.$$url}}function Cb(a){return function(){return this[a]}}function Db(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Eb(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return E(a)?(b.enabled=a,this):t(a)?(E(a.enabled)&&(b.enabled=a.enabled),E(a.requireBase)&&(b.requireBase=a.requireBase),E(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw he("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=yb(n)+(m||"/"),k=e.history?zb:Bb}else l=vb(n),k=Ab;var o=xb(l);j=new k(l,o,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=bd(a.target);"a"!==I(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=ec(h.animVal).href),p.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),wb(j.absUrl())!=wb(n)&&d.url(j.absUrl(),!0);var q=!0;return d.onUrlChange(function(a,b){return r(ub(o,a))?void(g.location.href=a):(c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(q=!1,i(e,f)))}),void(c.$$phase||c.$digest()))}),c.$watch(function(){var a=wb(d.url()),b=wb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(q||k)&&(q=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Fb(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Gb(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw je("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Hb(a,b){if(a+="",!u(a))throw je("iseccst","Cannot convert object to primitive value! Expression: {0}",b);return a}function Ib(a,b){if(a){if(a.constructor===a)throw je("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw je("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw je("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw je("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function Jb(a,b){if(a){if(a.constructor===a)throw je("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===ke||a===le||a===me)throw je("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function Kb(a){return a.constant}function Lb(a,b,c,d,e){Ib(a,e),Ib(b,e);for(var f,g=c.split("."),h=0;g.length>1;h++){f=Gb(g.shift(),e);var i=0===h&&b&&b[f]||a[f];i||(i={},a[f]=i),a=Ib(i,e)}return f=Gb(g.shift(),e),Ib(a[f],e),a[f]=d,d}function Mb(a){return"constructor"==a}function Nb(a,b,d,e,f,g,h){Gb(a,g),Gb(b,g),Gb(d,g),Gb(e,g),Gb(f,g);var i=function(a){return Ib(a,g)},j=h||Mb(a)?i:p,k=h||Mb(b)?i:p,l=h||Mb(d)?i:p,m=h||Mb(e)?i:p,n=h||Mb(f)?i:p;return function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=j(i[a]),b?null==i?c:(i=k(i[b]),d?null==i?c:(i=l(i[d]),e?null==i?c:(i=m(i[e]),f?null==i?c:i=n(i[f]):i):i):i):i)}}function Ob(a,b){return function(c,d){return a(c,d,Ib,b)}}function Pb(a,b,d){var e=b.expensiveChecks,g=e?te:se,h=g[a];if(h)return h;var i=a.split("."),j=i.length;if(b.csp)h=6>j?Nb(i[0],i[1],i[2],i[3],i[4],d,e):function(a,b){var f,g=0;do f=Nb(i[g++],i[g++],i[g++],i[g++],i[g++],d,e)(a,b),b=c,a=f;while(j>g);return f};else{var k="";e&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=e;f(i,function(a,b){Gb(a,d);var c=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;(e||Mb(a))&&(c="eso("+c+", fe)",l=!0),k+="if(s == null) return undefined;\ns="+c+";\n"}),k+="return s;";var m=new Function("s","l","eso","fe",k);m.toString=q(k),l&&(m=Ob(m,d)),h=m}return h.sharedGetter=!0,h.assign=function(b,c,d){return Lb(b,d,a,c,a)},g[a]=h,h}function Qb(a){return x(a.valueOf)?a.valueOf():ue.call(a)}function Rb(){var a=ja(),b=ja();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;return a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign),b}function g(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.constant||(e.inputs?g(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function h(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=Qb(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function i(a,b,c,d){var e,f=d.$$inputs||(d.$$inputs=g(d.inputs,[]));if(1===f.length){var i=h;return f=f[0],a.$watch(function(a){var b=f(a);return h(b,i)||(e=d(a),i=b&&Qb(b)),e},b,c)}for(var j=[],k=0,l=f.length;l>k;k++)j[k]=h;return a.$watch(function(a){for(var b=!1,c=0,g=f.length;g>c;c++){var i=f[c](a);(b||(b=!h(i,j[c])))&&(j[c]=i&&Qb(i))}return b&&(e=d(a)),e},b,c)}function j(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,x(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;return f(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a,x(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function l(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){x(b)&&b.apply(this,arguments),e()},c)}function m(a,b){if(!b)return a;var c=a.$$watchDelegate,d=c!==k&&c!==j,e=d?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return s(e)?f:e};return a.$$watchDelegate&&a.$$watchDelegate!==i?e.$$watchDelegate=a.$$watchDelegate:b.$stateful||(e.$$watchDelegate=i,e.inputs=[a]),e}var n={csp:d.csp,expensiveChecks:!1},p={csp:d.csp,expensiveChecks:!0};return function(d,f,g){var h,q,r;switch(typeof d){case"string":r=d=d.trim();var s=g?b:a;if(h=s[r],!h){":"===d.charAt(0)&&":"===d.charAt(1)&&(q=!0,d=d.substring(2));var t=g?p:n,u=new qe(t),v=new re(u,c,t);h=v.parse(d),h.constant?h.$$watchDelegate=l:q?(h=e(h),h.$$watchDelegate=h.literal?k:j):h.inputs&&(h.$$watchDelegate=i),s[r]=h}return m(h,f);case"function":return m(d,f);default:return m(o,f)}}}]}function Sb(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Ub(function(b){a.$evalAsync(b)},b)}]}function Tb(){this.$get=["$browser","$exceptionHandler",function(a,b){return Ub(function(b){a.defer(b)},b)}]}function Ub(a,b){function e(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function i(a){var d,e,f;f=a.pending,a.processScheduled=!1,a.pending=c;for(var g=0,h=f.length;h>g;++g){e=f[g][0],d=f[g][a.status];try{x(d)?e.resolve(d(a.value)):1===a.status?e.resolve(a.value):e.reject(a.value)}catch(i){e.reject(i),b(i)}}}function j(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){i(b)}))}function k(){this.promise=new g,this.resolve=h(this,this.resolve),this.reject=h(this,this.reject),this.notify=h(this,this.notify)}function l(a){var b=new k,c=0,d=md(a)?[]:{};return f(a,function(a,e){c++,r(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var m=d("$q",TypeError),n=function(){return new k};g.prototype={then:function(a,b,c){var d=new k;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&j(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}},k.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,this.$$reject);try{(t(a)||x(a))&&(c=a&&a.then),x(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,j(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,j(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(x(a)?a(c):c)}catch(h){b(h)}}})}};var o=function(a){var b=new k;return b.reject(a),b.promise},p=function(a,b){var c=new k;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{x(c)&&(d=c())}catch(e){return p(e,!1)}return F(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},r=function(a,b,c,d){var e=new k;return e.resolve(a),e.promise.then(b,c,d)},s=function u(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!x(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);if(!(this instanceof u))return new u(a);var d=new k;return a(b,c),d.promise};return s.defer=n,s.reject=o,s.when=r,s.all=l,s}function Vb(){this.$get=["$window","$timeout",function(a,b){function c(){for(var a=0;a<k.length;a++){var b=k[a];b&&(k[a]=null,b())}j=k.length=0}function d(a){var b=k.length;return j++,k.push(a),0===b&&(i=h(c)),function(){b>=0&&(k[b]=null,b=null,0===--j&&i&&(i(),i=null,k.length=0))}}var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame,f=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,g=!!e,h=g?function(a){var b=e(a);return function(){f(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};d.supported=g;var i,j=0,k=[];return d}]}function Wb(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=j(),this.$$ChildScope=null}return b.prototype=a,b}var b=10,c=d("$rootScope"),g=null,h=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,i,k,l){function m(a){a.currentScope.$$destroyed=!0}function n(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function p(a){if(y.$$phase)throw c("inprog","{0} already in progress",y.$$phase);y.$$phase=a}function q(){y.$$phase=null}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function u(){}function v(){for(;B.length;)try{B.shift()()}catch(a){i(a)}h=null}function w(){null===h&&(h=l.defer(function(){y.$apply(v)}))}n.prototype={constructor:n,$new:function(b,c){var d;return c=c||this,b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",m),d},$watch:function(a,b,c){var d=k(a);if(d.$$watchDelegate)return d.$$watchDelegate(this,b,c,d);var e=this,f=e.$$watchers,h={fn:b,last:u,get:d,exp:a,eq:!!c};return g=null,x(b)||(h.fn=o),f||(f=e.$$watchers=[]),f.unshift(h),function(){J(f,h),g=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!r(f)){if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,d||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)f.hasOwnProperty(c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,d||i===h||(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)f.hasOwnProperty(c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,i)):b(f,h,i),j)if(t(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)Yc.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,i=this,j=b.length>1,l=0,m=k(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var a,d,e,f,j,k,m,n,o,r,s=b,t=this,w=[];p("$digest"),l.$$checkUrlChange(),this===y&&null!==h&&(l.defer.cancel(h),v()),g=null;do{for(k=!1,n=t;z.length;){try{r=z.shift(),r.scope.$eval(r.expression,r.locals)}catch(B){i(B)}g=null}a:do{if(f=n.$$watchers)for(j=f.length;j--;)try{if(a=f[j])if((d=a.get(n))===(e=a.last)||(a.eq?M(d,e):"number"==typeof d&&"number"==typeof e&&isNaN(d)&&isNaN(e))){if(a===g){k=!1;break a}}else k=!0,g=a,a.last=a.eq?K(d,null):d,a.fn(d,e===u?d:e,n),5>s&&(o=4-s,w[o]||(w[o]=[]),w[o].push({msg:x(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:d,oldVal:e}))}catch(B){i(B)}if(!(m=n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(m=n.$$nextSibling);)n=n.$parent}while(n=m);if((k||z.length)&&!s--)throw q(),c("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",b,w)}while(k||z.length);for(q();A.length;)try{A.shift()()}catch(B){i(B)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==y){for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=o,this.$on=this.$watch=this.$watchGroup=function(){return o},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return k(a)(this,b)},$evalAsync:function(a,b){y.$$phase||z.length||l.defer(function(){z.length&&y.$digest()}),z.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){A.push(a)},$apply:function(a){try{return p("$apply"),this.$eval(a)}catch(b){i(b)}finally{q();try{y.$digest()}catch(b){throw i(b),b}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&B.push(b),w()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,s(e,1,a))}},$emit:function(a,b){var c,d,e,f=[],g=this,h=!1,j={name:a,targetScope:g,stopPropagation:function(){h=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=N([j],arguments,1);do{for(c=g.$$listeners[a]||f,j.currentScope=g,d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){i(l)}else c.splice(d,1),d--,e--;if(h)return j.currentScope=null,j;g=g.$parent}while(g);return j.currentScope=null,j},$broadcast:function(a,b){var c=this,d=c,e=c,f={name:a,targetScope:c,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!c.$$listenerCount[a])return f;for(var g,h,j,k=N([f],arguments,1);d=e;){for(f.currentScope=d,g=d.$$listeners[a]||[],h=0,j=g.length;j>h;h++)if(g[h])try{g[h].apply(null,k)}catch(l){i(l)}else g.splice(h,1),h--,j--;if(!(e=d.$$listenerCount[a]&&d.$$childHead||d!==c&&d.$$nextSibling))for(;d!==c&&!(e=d.$$nextSibling);)d=d.$parent}return f.currentScope=null,f}};var y=new n,z=y.$$asyncQueue=[],A=y.$$postDigestQueue=[],B=y.$$applyAsyncQueue=[];return y}]}function Xb(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=ec(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Yb(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw ve("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=od(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw ve("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Zb(a){var b=[];return s(a)&&f(a,function(a){b.push(Yb(a))}),b}function $b(){this.SCE_CONTEXTS=we;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Zb(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Zb(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?fc(b):!!a.exec(b.href)}function f(c){var d,f,g=ec(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw ve("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw ve("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===we.RESOURCE_URL){if(f(b))return b;throw ve("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===we.HTML)return k(b);throw ve("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(a){throw ve("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[we.HTML]=g(l),m[we.CSS]=g(l),m[we.URL]=g(l),m[we.JS]=g(l),m[we.RESOURCE_URL]=g(m[we.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function _b(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>ad)throw ve("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=L(we);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=p),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(we,function(a,b){var c=Xc(b);d[pa("parse_as_"+c)]=function(b){return e(a,b)},d[pa("get_trusted_"+c)]=function(b){return g(a,b)},d[pa("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function ac(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(Xc((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var n in j)if(d=i.exec(n)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k=!!("transition"in j||c+"Transition"in j),l=!!("animation"in j||c+"Animation"in j),!f||k&&l||(k=u(h.body.style.webkitTransition),l=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hasEvent:function(a){if("input"===a&&11>=ad)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:pd(),vendorPrefix:c,transitions:k,animations:l,android:f}}]}function bc(){this.$get=["$templateCache","$http","$q","$sce",function(a,b,c,d){function e(f,g){function h(a){if(!g)throw Yd("tpload","Failed to load template: {0}",f);return c.reject(a)}e.totalPendingRequests++,u(f)&&a.get(f)||(f=d.getTrustedResourceUrl(f));var i=b.defaults&&b.defaults.transformResponse;md(i)?i=i.filter(function(a){return a!==eb}):i===eb&&(i=null);var j={cache:a,transformResponse:i};return b.get(f,j)["finally"](function(){e.totalPendingRequests--}).then(function(a){return a.data},h)}return e.totalPendingRequests=0,e}]}function cc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=jd.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+od(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else-1!=d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);
if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function dc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){var j,k=s(i)&&!i,l=(k?d:c).defer(),m=l.promise;return j=b.defer(function(){try{l.resolve(f())}catch(b){l.reject(b),e(b)}finally{delete g[m.$$timeoutId]}k||a.$apply()},h),m.$$timeoutId=j,g[j]=l,m}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function ec(a){var b=a;return ad&&(xe.setAttribute("href",b),b=xe.href),xe.setAttribute("href",b),{href:xe.href,protocol:xe.protocol?xe.protocol.replace(/:$/,""):"",host:xe.host,search:xe.search?xe.search.replace(/^\?/,""):"",hash:xe.hash?xe.hash.replace(/^#/,""):"",hostname:xe.hostname,port:xe.port,pathname:"/"===xe.pathname.charAt(0)?xe.pathname:"/"+xe.pathname}}function fc(a){var b=u(a)?ec(a):a;return b.protocol===ye.protocol&&b.host===ye.host}function gc(){this.$get=q(a)}function hc(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",lc),b("date",yc),b("filter",ic),b("json",zc),b("limitTo",Ac),b("lowercase",De),b("number",mc),b("orderBy",Bc),b("uppercase",Ee)}function ic(){return function(a,b,c){if(!md(a))return a;var d,e,f=null!==b?typeof b:"null";switch(f){case"function":d=b;break;case"boolean":case"null":case"number":case"string":e=!0;case"object":d=jc(b,c,e);break;default:return a}return a.filter(d)}}function jc(a,b,c){var d,e=t(a)&&"$"in a;return b===!0?b=M:x(b)||(b=function(a,b){return r(a)?!1:null===a||null===b?a===b:t(a)||t(b)?!1:(a=Xc(""+a),b=Xc(""+b),-1!==a.indexOf(b))}),d=function(d){return e&&!t(d)?kc(d,a.$,b,!1):kc(d,a,b,c)}}function kc(a,b,c,d,e){var f=null!==a?typeof a:"null",g=null!==b?typeof b:"null";if("string"===g&&"!"===b.charAt(0))return!kc(a,b.substring(1),c,d);if(md(a))return a.some(function(a){return kc(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&kc(a[h],b,c,!0))return!0;return e?!1:kc(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!x(i)&&!r(i)){var j="$"===h,k=j?a:a[h];if(!kc(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function lc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:nc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function mc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:nc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function nc(a,b,c,d,e){if(!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?a=0:(h=g,j=!0)}if(j)e>0&&1>a&&(h=a.toFixed(e),a=parseFloat(h));else{var l=(g.split(ze)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var m=(""+a).split(ze),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return 0===a&&(f=!1),i.push(f?b.negPre:b.posPre,h,f?b.negSuf:b.posSuf),i.join("")}function oc(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function pc(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),oc(f,b,d)}}function qc(a,b){return function(c,d){var e=c["get"+a](),f=Zc(b?"SHORT"+a:a);return d[f][e]}}function rc(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=oc(Math[b>0?"floor":"ceil"](b/60),2)+oc(Math.abs(b%60),2)}function sc(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function tc(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function uc(a){return function(b){var c=sc(b.getFullYear()),d=tc(b),e=+d-+c,f=1+Math.round(e/6048e5);return oc(f,a)}}function vc(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function wc(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function xc(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function yc(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Ce.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)h=Be.exec(d),h?(j=N(j,h,1),d=j.pop()):(j.push(d),d=null);return e&&"UTC"===e&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset())),f(j,function(b){g=Ae[b],i+=g?g(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function zc(){return function(a,b){return r(b)&&(b=2),R(a,b)}}function Ac(){return function(a,b){return v(a)&&(a=a.toString()),md(a)||u(a)?(b=Math.abs(Number(b))===1/0?Number(b):m(b),b?b>0?a.slice(0,b):a.slice(b):u(a)?"":[]):a}}function Bc(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return b?function(b,c){return a(c,b)}:a}function h(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function i(a){return null===a?"null":"function"==typeof a.valueOf&&(a=a.valueOf(),h(a))?a:"function"==typeof a.toString&&(a=a.toString(),h(a))?a:""}function j(a,b){var c=typeof a,d=typeof b;return c===d&&"object"===c&&(a=i(a),b=i(b)),c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}return e(b)?(c=md(c)?c:[c],0===c.length&&(c=["+"]),c=c.map(function(b){var c=!1,d=b||p;if(u(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(j,c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return j(a[e],b[e])},c)}}return g(function(a,b){return j(d(a),d(b))},c)}),ed.call(b).sort(g(f,d))):b}}function Cc(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Dc(a,b){a.$name=b}function Ec(a,b,d,e,g){var h=this,i=[],j=h.$$parentForm=a.parent().controller("form")||He;h.$error={},h.$$success={},h.$pending=c,h.$name=g(b.name||b.ngForm||"")(d),h.$dirty=!1,h.$pristine=!0,h.$valid=!0,h.$invalid=!1,h.$submitted=!1,j.$addControl(h),h.$rollbackViewValue=function(){f(i,function(a){a.$rollbackViewValue()})},h.$commitViewValue=function(){f(i,function(a){a.$commitViewValue()})},h.$addControl=function(a){ga(a.$name,"input"),i.push(a),a.$name&&(h[a.$name]=a)},h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c],h[b]=a,a.$name=b},h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name],f(h.$pending,function(b,c){h.$setValidity(c,null,a)}),f(h.$error,function(b,c){h.$setValidity(c,null,a)}),f(h.$$success,function(b,c){h.$setValidity(c,null,a)}),J(i,a)},Tc({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(J(d,c),0===d.length&&delete a[b])},parentForm:j,$animate:e}),h.$setDirty=function(){e.removeClass(a,qf),e.addClass(a,rf),h.$dirty=!0,h.$pristine=!1,j.$setDirty()},h.$setPristine=function(){e.setClass(a,qf,rf+" "+Ie),h.$dirty=!1,h.$pristine=!0,h.$submitted=!1,f(i,function(a){a.$setPristine()})},h.$setUntouched=function(){f(i,function(a){a.$setUntouched()})},h.$setSubmitted=function(){e.addClass(a,Ie),h.$submitted=!0,j.$setSubmitted()}}function Fc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Gc(a,b,c,d,e,f){Hc(a,b,c,d,e,f),Fc(d)}function Hc(a,b,c,d,e,f){var g=Xc(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(a){h=!0}),b.on("compositionend",function(){h=!1,i()})}var i=function(a){if(j&&(f.defer.cancel(j),j=null),!h){var e=b.val(),i=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=nd(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,i)}};if(e.hasEvent("input"))b.on("input",i);else{var j,k=function(a,b,c){j||(j=f.defer(function(){j=null,b&&b.value===c||i(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",i),d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Ic(a,b){if(w(a))return a;if(u(a)){Se.lastIndex=0;var c=Se.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=sc(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function Jc(a,b){return function(c,d){var e,g;if(w(c))return c;if(u(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Me.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function Kc(a,b,d,e){return function(f,g,h,i,j,k,l){function m(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return s(a)?w(a)?a:d(a):c}Lc(f,g,h,i),Hc(f,g,h,i,j,k);var o,p=i&&i.$options&&i.$options.timezone;if(i.$$parserName=a,i.$parsers.push(function(a){if(i.$isEmpty(a))return null;if(b.test(a)){var e=d(a,o);return"UTC"===p&&e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}return c}),i.$formatters.push(function(a){if(a&&!w(a))throw vf("datefmt","Expected `{0}` to be a date",a);if(m(a)){if(o=a,o&&"UTC"===p){var b=6e4*o.getTimezoneOffset();o=new Date(o.getTime()+b)}return l("date")(a,e,p)}return o=null,""}),s(h.min)||h.ngMin){var q;i.$validators.min=function(a){return!m(a)||r(q)||d(a)>=q},h.$observe("min",function(a){q=n(a),i.$validate()})}if(s(h.max)||h.ngMax){var t;i.$validators.max=function(a){return!m(a)||r(t)||d(a)<=t},h.$observe("max",function(a){t=n(a),i.$validate()})}}}function Lc(a,b,d,e){var f=b[0],g=e.$$hasNativeValidators=t(f.validity);g&&e.$parsers.push(function(a){var d=b.prop(Wc)||{};return d.badInput&&!d.typeMismatch?c:a})}function Mc(a,b,d,e,f,g){if(Lc(a,b,d,e),Hc(a,b,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:Pe.test(a)?parseFloat(a):c}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!v(a))throw vf("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),s(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||r(h)||a>=h},d.$observe("min",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),h=v(a)&&!isNaN(a)?a:c,e.$validate()})}if(s(d.max)||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||r(i)||i>=a},d.$observe("max",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),i=v(a)&&!isNaN(a)?a:c,e.$validate()})}}function Nc(a,b,c,d,e,f){Hc(a,b,c,d,e,f),Fc(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Ne.test(c)}}function Oc(a,b,c,d,e,f){Hc(a,b,c,d,e,f),Fc(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Oe.test(c)}}function Pc(a,b,c,d){r(c.name)&&b.attr("name",j());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Qc(a,b,c,d,e){var f;if(s(d)){if(f=a(d),!f.constant)throw vf("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return f(b)}return e}function Rc(a,b,c,d,e,f,g,h){var i=Qc(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Qc(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return M(a,i)}),d.$parsers.push(function(a){return a?i:j})}function Sc(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(md(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);e=l(e,1),f=l(f,-1),e&&e.length&&c.addClass(h,e),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!M(a,o)){var d=e(o);m(d,c)}}else j(c)}o=L(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}function Tc(a){function b(a,b,i){b===c?d("$pending",a,i):e("$pending",a,i),E(b)?b?(l(h.$error,a,i),k(h.$$success,a,i)):(k(h.$error,a,i),l(h.$$success,a,i)):(l(h.$error,a,i),l(h.$$success,a,i)),h.$pending?(f(uf,!0),h.$valid=h.$invalid=c,g("",null)):(f(uf,!1),h.$valid=Uc(h.$error),h.$invalid=!h.$valid,g("",h.$valid));var j;j=h.$pending&&h.$pending[a]?c:h.$error[a]?!1:h.$$success[a]?!0:null,g(a,j),m.$setValidity(a,j,h)}function d(a,b,c){h[a]||(h[a]={}),k(h[a],b,c)}function e(a,b,d){h[a]&&l(h[a],b,d),Uc(h[a])&&(h[a]=c)}function f(a,b){b&&!j[a]?(n.addClass(i,a),j[a]=!0):!b&&j[a]&&(n.removeClass(i,a),j[a]=!1)}function g(a,b){a=a?"-"+ca(a,"-"):"",f(of+a,b===!0),f(pf+a,b===!1)}var h=a.ctrl,i=a.$element,j={},k=a.set,l=a.unset,m=a.parentForm,n=a.$animate;j[pf]=!(j[of]=i.hasClass(of)),h.$setValidity=b}function Uc(a){if(a)for(var b in a)return!1;return!0}var Vc=/^\/(.+)\/([a-z]*)$/,Wc="validity",Xc=function(a){return u(a)?a.toLowerCase():a},Yc=Object.prototype.hasOwnProperty,Zc=function(a){return u(a)?a.toUpperCase():a},$c=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},_c=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Xc=$c,Zc=_c);var ad,bd,cd,dd,ed=[].slice,fd=[].splice,gd=[].push,hd=Object.prototype.toString,id=d("ng"),jd=a.angular||(a.angular={}),kd=0;ad=b.documentMode,o.$inject=[],p.$inject=[];var ld,md=Array.isArray,nd=function(a){return u(a)?a.trim():a},od=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},pd=function(){if(s(pd.isActive_))return pd.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return pd.isActive_=a},qd=["ng-","data-ng-","ng:","x-ng-"],rd=/[A-Z]/g,sd=!1,td=1,ud=2,vd=3,wd=8,xd=9,yd=11,zd={full:"1.3.20",major:1,minor:3,dot:20,codeName:"shallow-translucence"};ua.expando="ng339";var Ad=ua.cache={},Bd=1,Cd=function(a,b,c){a.addEventListener(b,c,!1)},Dd=function(a,b,c){a.removeEventListener(b,c,!1)};ua._data=function(a){return this.cache[a[this.expando]]||{}};var Ed=/([\:\-\_]+(.))/g,Fd=/^moz([A-Z])/,Gd={mouseleave:"mouseout",mouseenter:"mouseover"},Hd=d("jqLite"),Id=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Jd=/<|&#?\w+;/,Kd=/<([\w:]+)/,Ld=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Md={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Md.optgroup=Md.option,Md.tbody=Md.tfoot=Md.colgroup=Md.caption=Md.thead,Md.th=Md.td;var Nd=ua.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),ua(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return bd(a>=0?this[a]:this[this.length+a])},length:0,push:gd,sort:[].sort,splice:[].splice},Od={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Od[Xc(a)]=a});var Pd={};f("input,select,option,textarea,button,form,details".split(","),function(a){Pd[a]=!0});var Qd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:Aa,removeData:ya},function(a,b){ua[b]=a}),f({data:Aa,inheritedData:Ga,scope:function(a){return bd.data(a,"$scope")||Ga(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return bd.data(a,"$isolateScope")||bd.data(a,"$isolateScopeNoTemplate")},controller:Fa,injector:function(a){return Ga(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ba,css:function(a,b,c){return b=pa(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,d){var e=a.nodeType;if(e!==vd&&e!==ud&&e!==wd){var f=Xc(b);if(Od[f]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?f:c;d?(a[b]=!0,a.setAttribute(b,f)):(a[b]=!1,a.removeAttribute(f))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var g=a.getAttribute(b,2);return null===g?c:g}}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===td||c===vd?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===I(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(wa(a,!0),void(a.innerHTML=b))},empty:Ha},function(a,b){ua.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Ha&&(2==a.length&&a!==Ba&&a!==Fa?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===Aa)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:ya,on:function Wf(a,b,c,d){if(s(d))throw Hd("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ra(a)){var e=za(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Ma(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length;i--;){b=h[i];var j=f[b];j||(f[b]=[],"mouseenter"===b||"mouseleave"===b?Wf(a,Gd[b],function(a){var c=this,d=a.relatedTarget;(!d||d!==c&&!c.contains(d))&&g(a,b)}):"$destroy"!==b&&Cd(a,b,g),j=f[b]),j.push(c)}}},off:xa,one:function(a,b,c){a=bd(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;wa(a),f(new ua(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===td&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===td||c===yd){b=new ua(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===td){var c=a.firstChild;f(new ua(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=bd(b).eq(0).clone()[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:Ia,detach:function(a){Ia(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new ua(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Da,removeClass:Ca,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!Ba(a,b)),(d?Da:Ca)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==yd?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:va,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=za(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=L(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){ua.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=bd(e))):Ea(e,a(this[f],b,c,d));return s(e)?e:this},ua.prototype.bind=ua.prototype.on,ua.prototype.unbind=ua.prototype.off}),Pa.prototype={put:function(a,b){this[Oa(a,this.nextUid)]=b},get:function(a){return this[Oa(a,this.nextUid)]},remove:function(a){var b=this[a=Oa(a,this.nextUid)];return delete this[a],b}};var Rd=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Sd=/,/,Td=/^\s*(_?)(\S+?)\1\s*$/,Ud=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Vd=d("$injector");Sa.$$annotate=Ra;var Wd=d("$animate"),Xd=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw Wd("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(a,b,c){function d(b){var d,e=a.defer();return e.promise.$$cancelFn=function(){d&&d()},c.$$postDigest(function(){d=b(function(){e.resolve()})}),e.promise}function e(a,b){var c=[],d=[],e=ja();return f((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0}),f(b,function(a,b){var f=e[b];a===!1&&f?d.push(b):a!==!0||f||c.push(b)}),c.length+d.length>0&&[c.length?c:null,d.length?d:null]}function g(a,b,c){for(var d=0,e=b.length;e>d;++d){var f=b[d];a[f]=c}}function h(){return j||(j=a.defer(),b(function(){j.resolve(),j=null})),j.promise}function i(a,b){if(jd.isObject(b)){var c=l(b.from||{},b.to||{});a.css(c)}}var j;return{animate:function(a,b,c){return i(a,{from:b,to:c}),h()},enter:function(a,b,c,d){return i(a,d),c?c.after(a):b.prepend(a),h()},leave:function(a,b){return i(a,b),a.remove(),h()},move:function(a,b,c,d){return this.enter(a,b,c,d)},addClass:function(a,b,c){return this.setClass(a,b,[],c)},$$addClassImmediately:function(a,b,c){return a=bd(a),b=u(b)?b:md(b)?b.join(" "):"",f(a,function(a){Da(a,b)}),i(a,c),h()},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},$$removeClassImmediately:function(a,b,c){return a=bd(a),b=u(b)?b:md(b)?b.join(" "):"",f(a,function(a){Ca(a,b)}),i(a,c),h()},setClass:function(a,b,c,f){var h=this,i="$$animateClasses",j=!1;a=bd(a);var k=a.data(i);k?f&&k.options&&(k.options=jd.extend(k.options||{},f)):(k={classes:{},options:f},j=!0);var l=k.classes;return b=md(b)?b:b.split(" "),c=md(c)?c:c.split(" "),g(l,b,!0),g(l,c,!1),j&&(k.promise=d(function(b){var c=a.data(i);if(a.removeData(i),c){var d=e(a,c.classes);d&&h.$$setClassImmediately(a,d[0],d[1],c.options)}b()}),a.data(i,k)),k.promise},$$setClassImmediately:function(a,b,c,d){return b&&this.$$addClassImmediately(a,b),c&&this.$$removeClassImmediately(a,c),i(a,d),h()},enabled:o,cancel:o}}]}],Yd=d("$compile");Za.$inject=["$provide","$$sanitizeUriProvider"];var Zd=/^((?:x|data)[\:\-_])/i,$d=d("$controller"),_d="application/json",ae={"Content-Type":_d+";charset=utf-8"},be=/^\[|^\{(?!\{)/,ce={"[":/]$/,"{":/}$/},de=/^\)\]\}',?\n/,ee=d("$interpolate"),fe=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ge={http:80,https:443,ftp:21},he=d("$location"),ie={$$html5:!1,$$replace:!1,absUrl:Cb("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=fe.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Cb("$$protocol"),host:Cb("$$host"),port:Cb("$$port"),path:Db("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=V(a);else{if(!t(a))throw he("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=K(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Db("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([Bb,Ab,zb],function(a){a.prototype=Object.create(ie),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==zb||!this.$$html5)throw he("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var je=d("$parse"),ke=Function.prototype.call,le=Function.prototype.apply,me=Function.prototype.bind,ne=ja();f({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,b){a.constant=a.literal=a.sharedGetter=!0,ne[b]=a}),ne["this"]=function(a){return a},ne["this"].sharedGetter=!0;var oe=l(ja(),{"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"!":function(a,b,c){return!c(a,b)},"=":!0,"|":!0}),pe={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},qe=function(a){this.options=a};qe.prototype={constructor:qe,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(b))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=oe[b],f=oe[c],g=oe[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw je("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Xc(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=pe[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var re=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};re.ZERO=l(function(){return 0},{sharedGetter:!0,constant:!0}),re.prototype={constructor:re,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in ne?a=ne[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b,c;b=this.expect("(","[",".");)"("===b.text?(a=this.functionCall(a,c),c=null):"["===b.text?(c=a,a=this.objectIndex(a)):"."===b.text?(c=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw je("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw je("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){if(0===this.tokens.length)throw je("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},unaryFn:function(a,b){var c=oe[a];return l(function(a,d){return c(a,d,b)},{constant:b.constant,inputs:[b]})},binaryFn:function(a,b,c,d){var e=oe[b];return l(function(b,d){return e(b,d,a,c)},{constant:a.constant&&c.constant,inputs:!d&&[a,c]})},identifier:function(){for(var a=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return Pb(a,this.options,this.text)},constant:function(){var a=this.consume().value;return l(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0,f=a.length;f>e;e++)d=a[e](b,c);return d}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},filter:function(a){var b,d,e=this.$filter(this.consume().text);if(this.peek(":"))for(b=[],d=[];this.expect(":");)b.push(this.expression());var f=[a].concat(b||[]);return l(function(f,g){
var h=a(f,g);if(d){d[0]=h;for(var i=b.length;i--;)d[i+1]=b[i](f,g);return e.apply(c,d)}return e(h)},{constant:!e.$stateful&&f.every(Kb),inputs:!e.$stateful&&f})},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),l(function(b,d){return c.assign(b,a(b,d),d)},{inputs:[c,a]})):c},ternary:function(){var a,b,c=this.logicalOR();if((b=this.expect("?"))&&(a=this.assignment(),this.consume(":"))){var d=this.assignment();return l(function(b,e){return c(b,e)?a(b,e):d(b,e)},{constant:c.constant&&a.constant&&d.constant})}return c},logicalOR:function(){for(var a,b=this.logicalAND();a=this.expect("||");)b=this.binaryFn(b,a.text,this.logicalAND(),!0);return b},logicalAND:function(){for(var a,b=this.equality();a=this.expect("&&");)b=this.binaryFn(b,a.text,this.equality(),!0);return b},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b=this.binaryFn(b,a.text,this.relational());return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b=this.binaryFn(b,a.text,this.additive());return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.text,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.text,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(re.ZERO,a.text,this.unary()):(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var b=this.identifier();return l(function(d,e,f){var g=f||a(d,e);return null==g?c:b(g)},{assign:function(c,d,e){var f=a(c,e);return f||a.assign(c,f={},e),b.assign(f,d)}})},objectIndex:function(a){var b=this.text,d=this.expression();return this.consume("]"),l(function(e,f){var g,h=a(e,f),i=Hb(d(e,f),b);return Gb(i,b),h?g=Ib(h[i],b):c},{assign:function(c,e,f){var g=Gb(Hb(d(c,f),b),b),h=Ib(a(c,f),b);return h||a.assign(c,h={},f),h[g]=e}})},functionCall:function(a,b){var d=[];if(")"!==this.peekToken().text)do d.push(this.expression());while(this.expect(","));this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var i=b?b(g,h):s(b)?c:g,j=a(g,h,i)||o;if(f)for(var k=d.length;k--;)f[k]=Ib(d[k](g,h),e);Ib(i,e),Jb(j,e);var l=j.apply?j.apply(i,f):j(f[0],f[1],f[2],f[3],f[4]);return f&&(f.length=0),Ib(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push(a[e](b,c));return d},{literal:!0,constant:a.every(Kb),inputs:a})},object:function(){var a=[],b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.consume();c.constant?a.push(c.value):c.identifier?a.push(c.text):this.throwError("invalid key",c),this.consume(":"),b.push(this.expression())}while(this.expect(","));return this.consume("}"),l(function(c,d){for(var e={},f=0,g=b.length;g>f;f++)e[a[f]]=b[f](c,d);return e},{literal:!0,constant:b.every(Kb),inputs:b})}};var se=ja(),te=ja(),ue=Object.prototype.valueOf,ve=d("$sce"),we={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Yd=d("$compile"),xe=b.createElement("a"),ye=ec(a.location.href);hc.$inject=["$provide"],lc.$inject=["$locale"],mc.$inject=["$locale"];var ze=".",Ae={yyyy:pc("FullYear",4),yy:pc("FullYear",2,0,!0),y:pc("FullYear",1),MMMM:qc("Month"),MMM:qc("Month",!0),MM:pc("Month",2,1),M:pc("Month",1,1),dd:pc("Date",2),d:pc("Date",1),HH:pc("Hours",2),H:pc("Hours",1),hh:pc("Hours",2,-12),h:pc("Hours",1,-12),mm:pc("Minutes",2),m:pc("Minutes",1),ss:pc("Seconds",2),s:pc("Seconds",1),sss:pc("Milliseconds",3),EEEE:qc("Day"),EEE:qc("Day",!0),a:vc,Z:rc,ww:uc(2),w:uc(1),G:wc,GG:wc,GGG:wc,GGGG:xc},Be=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Ce=/^\-?\d+$/;yc.$inject=["$locale"];var De=q(Xc),Ee=q(Zc);Bc.$inject=["$parse"];var Fe=q({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref||b.name?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===hd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Ge={};f(Od,function(a,b){if("multiple"!=a){var c=$a("ng-"+b);Ge[c]=function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(Qd,function(a,b){Ge[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Vc);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=$a("ng-"+a);Ge[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===hd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(ad&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var He={$addControl:o,$$renameControl:Dc,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o,$setSubmitted:o},Ie="ng-submitted";Ec.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Je=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:Ec,compile:function(d,e){d.addClass(qf).addClass(of);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,d,e,g){if(!("action"in e)){var h=function(b){a.$apply(function(){g.$commitViewValue(),g.$setSubmitted()}),b.preventDefault()};Cd(d[0],"submit",h),d.on("$destroy",function(){b(function(){Dd(d[0],"submit",h)},0,!1)})}var i=g.$$parentForm;f&&(Lb(a,null,g.$name,g,g.$name),e.$observe(f,function(b){g.$name!==b&&(Lb(a,null,g.$name,c,g.$name),i.$$renameControl(g,b),Lb(a,null,g.$name,g,g.$name))})),d.on("$destroy",function(){i.$removeControl(g),f&&Lb(a,null,e[f],c,g.$name),l(g,He)})}}}};return d}]},Ke=Je(),Le=Je(!0),Me=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Ne=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Oe=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Pe=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Qe=/^(\d{4})-(\d{2})-(\d{2})$/,Re=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Se=/^(\d{4})-W(\d\d)$/,Te=/^(\d{4})-(\d\d)$/,Ue=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ve={text:Gc,date:Kc("date",Qe,Jc(Qe,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Kc("datetimelocal",Re,Jc(Re,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Kc("time",Ue,Jc(Ue,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Kc("week",Se,Ic,"yyyy-Www"),month:Kc("month",Te,Jc(Te,["yyyy","MM"]),"yyyy-MM"),number:Mc,url:Nc,email:Oc,radio:Pc,checkbox:Rc,hidden:o,button:o,submit:o,reset:o,file:o},We=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Ve[Xc(g.type)]||Ve.text)(e,f,g,h[0],b,a,c,d)}}}}],Xe=/^(true|false|\d+)$/,Ye=function(){return{restrict:"A",priority:100,compile:function(a,b){return Xe.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Ze=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,d,e){a.$$addBindingInfo(d,e.ngBind),d=d[0],b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],$e=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(d,e,f){var g=a(e.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(e,g.expressions),e=e[0],f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],_e=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],af=q({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),bf=Sc("",!0),cf=Sc("Odd",0),df=Sc("Even",1),ef=Cc({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),ff=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],gf={},hf={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=$a("ng-"+a);gf[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};hf[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var jf=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=ia(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],kf=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:jd.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).then(function(){m=null}),m=n,n=null)};d.$watch(f,function(f){var i=function(){!s(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(m===o){var b=d.$new();j.template=a;var h=k(b,function(a){p(),c.enter(a,null,e).then(i)});l=b,n=h,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){m===o&&(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],lf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return/SVG/.test(d[0].toString())?(d.empty(),void a(sa(f.template,b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void a(d.contents())(c))}}}],mf=Cc({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),nf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,i=h?nd(g):g,j=function(a){if(!r(a)){var b=[];return a&&f(a.split(i),function(a){a&&b.push(h?nd(a):a)}),b}};e.$parsers.push(j),e.$formatters.push(function(a){return md(a)?a.join(g):c}),e.$isEmpty=function(a){return!a||!a.length}}}},of="ng-valid",pf="ng-invalid",qf="ng-pristine",rf="ng-dirty",sf="ng-untouched",tf="ng-touched",uf="ng-pending",vf=d("ngModel"),wf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,i,j,k,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=c,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=c,this.$name=l(d.name||"",!1)(a);var m,n=g(d.ngModel),p=n.assign,q=n,t=p,u=null,w=this;this.$$setOptions=function(a){if(w.$options=a,a&&a.getterSetter){var b=g(d.ngModel+"()"),c=g(d.ngModel+"($$$p)");q=function(a){var c=n(a);return x(c)&&(c=b(a)),c},t=function(a,b){x(n(a))?c(a,{$$$p:w.$modelValue}):p(a,w.$modelValue)}}else if(!n.assign)throw vf("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,T(e))},this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var y=e.inheritedData("$formController")||He,z=0;Tc({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:y,$animate:h}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,h.removeClass(e,rf),h.addClass(e,qf)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,h.removeClass(e,qf),h.addClass(e,rf),y.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,h.setClass(e,sf,tf)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,h.setClass(e,tf,sf)},this.$rollbackViewValue=function(){i.cancel(u),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!v(w.$modelValue)||!isNaN(w.$modelValue)){var a=w.$$lastCommittedViewValue,b=w.$$rawModelValue,d=w.$valid,e=w.$modelValue,f=w.$options&&w.$options.allowInvalid;w.$$runValidators(b,a,function(a){f||d===a||(w.$modelValue=a?b:c,w.$modelValue!==e&&w.$$writeModelToScope())})}},this.$$runValidators=function(a,b,d){function e(){var a=w.$$parserName||"parse";return m!==c?(m||(f(w.$validators,function(a,b){i(b,null)}),f(w.$asyncValidators,function(a,b){i(b,null)})),i(a,m),m):(i(a,null),!0)}function g(){var c=!0;return f(w.$validators,function(d,e){var f=d(a,b);c=c&&f,i(e,f)}),c?!0:(f(w.$asyncValidators,function(a,b){i(b,null)}),!1)}function h(){var d=[],e=!0;f(w.$asyncValidators,function(f,g){var h=f(a,b);if(!F(h))throw vf("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h);i(g,c),d.push(h.then(function(){i(g,!0)},function(a){e=!1,i(g,!1)}))}),d.length?k.all(d).then(function(){j(e)},o):j(!0)}function i(a,b){l===z&&w.$setValidity(a,b)}function j(a){l===z&&d(a)}z++;var l=z;return e()&&g()?void h():void j(!1)},this.$commitViewValue=function(){var a=w.$viewValue;i.cancel(u),(w.$$lastCommittedViewValue!==a||""===a&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=a,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){w.$modelValue!==g&&w.$$writeModelToScope()}var d=w.$$lastCommittedViewValue,e=d;if(m=r(e)?c:!0)for(var f=0;f<w.$parsers.length;f++)if(e=w.$parsers[f](e),r(e)){m=!1;break}v(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=q(a));var g=w.$modelValue,h=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=e,h&&(w.$modelValue=e,b()),w.$$runValidators(e,w.$$lastCommittedViewValue,function(a){h||(w.$modelValue=a?e:c,b())})},this.$$writeModelToScope=function(){t(a,w.$modelValue),f(w.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){w.$viewValue=a,(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=w.$options;e&&s(e.debounce)&&(c=e.debounce,v(c)?d=c:v(c[b])?d=c[b]:v(c["default"])&&(d=c["default"])),i.cancel(u),d?u=i(function(){w.$commitViewValue()},d):j.$$phase?w.$commitViewValue():a.$apply(function(){w.$commitViewValue()})},a.$watch(function(){var b=q(a);if(b!==w.$modelValue&&(w.$modelValue===w.$modelValue||b===b)){w.$modelValue=w.$$rawModelValue=b,m=c;for(var d=w.$formatters,e=d.length,f=b;e--;)f=d[e](f);w.$viewValue!==f&&(w.$viewValue=w.$$lastCommittedViewValue=f,w.$render(),w.$$runValidators(b,f,o))}return b})}],xf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:wf,priority:1,compile:function(b){return b.addClass(qf).addClass(sf).addClass(of),{pre:function(a,b,c,d){var e=d[0],f=d[1]||He;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)}),a.$on("$destroy",function(){f.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(c){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],yf=/(\s+|^)default(\s+|$)/,zf=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=a.$eval(b.ngModelOptions),this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=nd(this.$options.updateOn.replace(yf,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Af=Cc({terminal:!0,priority:1e3}),Bf=["$locale","$interpolate",function(a,b){var c=/{}/g,d=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(e,g,h){function i(a){g.text(a||"")}var j,k=h.count,l=h.$attr.when&&g.attr(h.$attr.when),m=h.offset||0,n=e.$eval(l)||{},o={},p=b.startSymbol(),q=b.endSymbol(),r=p+k+"-"+m+q,s=jd.noop;f(h,function(a,b){var c=d.exec(b);if(c){var e=(c[1]?"-":"")+Xc(c[2]);n[e]=g.attr(h.$attr[b])}}),f(n,function(a,d){o[d]=b(a.replace(c,r))}),e.$watch(k,function(b){var c=parseFloat(b),d=isNaN(c);d||c in n||(c=a.pluralCat(c-m)),c===j||d&&isNaN(j)||(s(),s=e.$watch(o[c],i),j=c)})}}}],Cf=["$parse","$animate",function(a,g){var h="$$NG_REMOVED",i=d("ngRepeat"),j=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,m){var n=m.ngRepeat,o=b.createComment(" end ngRepeat: "+n+" "),p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var q=p[1],r=p[2],s=p[3],t=p[4];if(p=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!p)throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var u=p[3]||p[1],v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(s)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s);var w,x,y,z,A={$id:Oa};return t?w=a(t):(y=function(a,b){return Oa(b)},z=function(a){return a}),function(a,b,d,m,p){w&&(x=function(b,c,d){return v&&(A[v]=b),A[u]=c,A.$index=d,w(a,A)});var q=ja();a.$watchCollection(r,function(d){var m,r,t,w,A,B,C,D,E,F,G,H,I=b[0],J=ja();if(s&&(a[s]=d),e(d))E=d,D=x||y;else{D=x||z,E=[];for(var K in d)d.hasOwnProperty(K)&&"$"!=K.charAt(0)&&E.push(K);E.sort()}for(w=E.length,G=new Array(w),m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],C=D(A,B,m),q[C])F=q[C],delete q[C],J[C]=F,G[m]=F;else{if(J[C])throw f(G,function(a){a&&a.scope&&(q[a.id]=a)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,C,B);G[m]={id:C,scope:c,clone:c},J[C]=!0}for(var L in q){if(F=q[L],H=ia(F.clone),g.leave(H),H[0].parentNode)for(m=0,r=H.length;r>m;m++)H[m][h]=!0;F.scope.$destroy()}for(m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],F=G[m],F.scope){t=I;do t=t.nextSibling;while(t&&t[h]);k(F)!=t&&g.move(ia(F.clone),null,bd(I)),I=l(F),j(F.scope,m,u,B,v,A,w)}else p(function(a,b){F.scope=b;var c=o.cloneNode(!1);a[a.length++]=c,g.enter(a,null,bd(I)),I=c,F.clone=a,J[F.id]=F,j(F.scope,m,u,B,v,A,w)});q=J})}}}}],Df="ng-hide",Ef="ng-hide-animate",Ff=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,Df,{tempClasses:Ef})})}}}],Gf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,Df,{tempClasses:Ef})})}}}],Hf=Cc(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),If=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var d,e;for(d=0,e=k.length;e>d;++d)a.cancel(k[d]);for(k.length=0,d=0,e=l.length;e>d;++d){var h=ia(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.then(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],Jf=Cc({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),Kf=Cc({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Lf=Cc({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(b));f(function(a){b.empty(),b.append(a)})}}),Mf=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Nf=d("ngOptions"),Of=q({restrict:"A",terminal:!0}),Pf=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b,c){ga(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove()),c&&c[0].hasAttribute("selected")&&(c[0].selected=!0)},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue===a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Oa(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(y.parent()&&y.remove(),b.val(a),""===a&&o.prop("selected",!0)):null==a&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){y.parent()&&y.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Pa(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){M(d,c.$viewValue)||(d=L(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,h,i){function j(a,c,d){return M[B]=d,E&&(M[E]=c),a(b,M)}function k(){b.$apply(function(){var a,c=H(b)||[];if(r)a=[],f(h.val(),function(b){b=J?K[b]:b,a.push(l(b,c[b]))});else{var d=J?K[h.val()]:h.val();a=l(d,c[d])}i.$setViewValue(a),y()})}function l(a,b){if("?"===a)return c;if(""===a)return null;var d=D?D:G;return j(d,a,b)}function m(){var a,c=H(b);if(c&&md(c)){a=new Array(c.length);for(var d=0,e=c.length;e>d;d++)a[d]=j(A,d,c[d]);return a}if(c){a={};for(var f in c)c.hasOwnProperty(f)&&(a[f]=j(A,f,c[f]))}return a}function n(a){var b;if(r)if(J&&md(a)){b=new Pa([]);for(var c=0;c<a.length;c++)b.put(j(J,null,a[c]),!0)}else b=new Pa(a);else J&&(a=j(J,null,a));return function(c,d){var e;return e=J?J:D?D:G,r?s(b.remove(j(e,c,d))):a===j(e,c,d)}}function o(){v||(b.$$postDigest(y),v=!0)}function q(a,b,c){a[b]=a[b]||0,a[b]+=c?1:-1}function y(){v=!1;var a,c,d,e,k,l,m,o,t,y,z,B,C,D,G,I,N,O={"":[]},P=[""],Q=i.$viewValue,R=H(b)||[],S=E?g(R):R,T={},U=n(Q),V=!1;for(K={},B=0;y=S.length,y>B;B++)m=B,E&&(m=S[B],"$"===m.charAt(0))||(o=R[m],a=j(F,m,o)||"",(c=O[a])||(c=O[a]=[],P.push(a)),C=U(m,o),V=V||C,I=j(A,m,o),I=s(I)?I:"",N=J?J(b,M):E?S[B]:B,J&&(K[N]=m),c.push({id:N,label:I,selected:C}));for(r||(u||null===Q?O[""].unshift({id:"",label:"",selected:!V}):V||O[""].unshift({id:"?",label:"",selected:!0})),z=0,t=P.length;t>z;z++){for(a=P[z],c=O[a],L.length<=z?(e={element:x.clone().attr("label",a),label:c.label},k=[e],L.push(k),h.append(e.element)):(k=L[z],e=k[0],e.label!=a&&e.element.attr("label",e.label=a)),D=null,B=0,y=c.length;y>B;B++)d=c[B],(l=k[B+1])?(D=l.element,l.label!==d.label&&(q(T,l.label,!1),q(T,d.label,!0),D.text(l.label=d.label),D.prop("label",l.label)),l.id!==d.id&&D.val(l.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",l.selected=d.selected),ad&&D.prop("selected",l.selected))):(""===d.id&&u?G=u:(G=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),k.push(l={element:G,label:d.label,id:d.id,selected:d.selected}),q(T,d.label,!0),D?D.after(G):e.element.append(G),D=G);for(B++;k.length>B;)d=k.pop(),q(T,d.label,!1),d.element.remove()}for(;L.length>z;){for(c=L.pop(),B=1;B<c.length;++B)q(T,c[B].label,!1);c[0].element.remove()}f(T,function(a,b){a>0?p.addOption(b):0>a&&p.removeOption(b)})}var z;if(!(z=t.match(e)))throw Nf("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,T(h));var A=d(z[2]||z[1]),B=z[4]||z[6],C=/ as /.test(z[0])&&z[1],D=C?d(C):null,E=z[5],F=d(z[3]||""),G=d(z[2]?z[1]:B),H=d(z[7]),I=z[8],J=I?d(z[8]):null,K={},L=[[{element:h,label:""}]],M={};u&&(a(u)(b),u.removeClass("ng-scope"),u.remove()),h.empty(),h.on("change",k),i.$render=y,b.$watchCollection(H,o),b.$watchCollection(m,o),r&&b.$watchCollection(function(){return i.$modelValue},o)}if(k[1]){for(var o,p=k[0],q=k[1],r=j.multiple,t=j.ngOptions,u=!1,v=!1,w=bd(b.createElement("option")),x=bd(b.createElement("optgroup")),y=w.clone(),z=0,A=i.children(),B=A.length;B>z;z++)if(""===A[z].value){o=u=A.eq(z);break}p.init(q,u,y),r&&(q.$isEmpty=function(a){return!a||0===a.length}),t?n(h,i,q):r?m(h,i,q):l(h,i,q,p)}}}}],Qf=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound||(h=b),e?a.$watch(e,function(a,b){d.$set("value",a),b!==a&&h.removeOption(b),h.addOption(a,c)}):h.addOption(d.value,c),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],Rf=q({restrict:"E",terminal:!1}),Sf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},Tf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(u(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,T(b));g=a||c,f.$validate()}),f.$validators.pattern=function(a,b){return f.$isEmpty(b)||r(g)||g.test(b)}}}}},Uf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=m(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},Vf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=m(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};a.angular.bootstrap||(da(),na(jd),bd(b).ready(function(){$(b,_)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){function d(a,b){return N(new(N(function(){},{prototype:a})),b)}function e(a){return M(arguments,function(b){b!==a&&M(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return M(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return N({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return M(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return M(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=L(a),d=c?[]:{};return M(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=L(a)?[]:{};return M(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=N(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,J(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);M(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return K(a)&&a.then&&a.$$promises}if(!K(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return M(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!H(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;M(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!K(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=N({},d),u=1+q.length/3,v=!1;if(H(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),N(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return H(a.template)?this.fromString(a.template,b):H(a.templateUrl)?this.fromUrl(a.templateUrl,b):H(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return I(a)?a(b):a},this.fromUrl=function(c,d){return I(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b
})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new P.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:e=["?(",")?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),j=P.type(h||"string")||d(P.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)}),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=N({params:{}},K(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){N(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return I(a)||L(a)&&I(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){N(this,a||{})}P=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!H(a)||"string"==typeof a},pattern:/[^\/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return H(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^\/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return H(a)&&(m=a),m},this.strictMode=function(a){return H(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!H(a))return q;if(a!==!0&&a!==!1&&!J(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,N(f(),b))},this.isMatcher=function(a){if(!K(a))return!1;var b=!0;return M(r.prototype,function(c,d){I(c)&&(b=b&&H(a[d])&&I(a[d]))}),b},this.type=function(a,b,c){if(!H(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(N({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},M(x,function(a,b){u[b]=new s(N({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),M(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=K(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function j(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof s?b.type:new s(b.type):"config"===d?u.any:u.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return N(b,c,d).array}function m(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!H(c)||null==c)return q;if(c===!0||J(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=L(a.replace)?a.replace:[],J(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function r(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(d.$$fn);if(null!==a&&a!==c&&!w.type.is(a))throw new Error("Default value ("+a+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return a}function t(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),H(a)?w.type.$normalize(a):r()}function v(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=j(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=m(d,y),A=p(d,x,y,z);N(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:t,dynamic:c,config:d,toString:v})},k.prototype={$$new:function(){return d(this,N(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),M(b,function(b){M(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return M(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return M(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return H(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(J(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){o&&d.url()===o;o=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!I(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(J(a)){var b=a;a=function(){return b}}else if(!I(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=J(b);if(J(a)&&(a=d.compile(a)),!h&&!I(b)&&!L(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),N(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:J(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),N(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=J(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!J(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):J(b.parent)?b.parent:K(b.parent)&&J(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)I(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return J(a)&&!H(b)?C[a]:I(b)&&J(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return K(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return M(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(I(d.controllerProvider)||L(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,N({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!H(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!H(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,I=[];if(f.reload){if(J(f.reload)||K(f.reload)){if(K(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var L=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!L)throw new Error("No such reload state '"+(J(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==L;)G=I[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=I[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,O(y.params,n),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),p.update(),C;for(var M=e.when(G),P=D;P<z.length;P++,F=z[P])G=I[P]=d(G),M=v(F,c,F===b,M,G,f);var Q=y.transition=M.then(function(){var d,e,g;if(y.transition!==Q)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=I[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return r&&(c["#"]=r),y.transition!==Q?A:(y.$current=b,y.current=b.self,y.params=c,O(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==Q?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return Q},y.is=function(a,b,d){d=N({relative:y.$current},d||{});var e=m(a,d.relative);return H(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=N({relative:y.$current},d||{}),J(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return H(e)?H(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=N({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!H(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new P.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(H(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=N({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(J(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new P.ParamSet;return M(a.params||{},function(a,c){b[c]||(b[c]=new P.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?N(a.parent.params.$$new(),a.ownParams):new P.ParamSet},views:function(a){var b={};return M(H(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?N({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=N(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a,c){var d=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=B(g.uiSref,a.current.name),j=null,k=C(f)||a.$current,l="[object SVGAnimatedString]"===Object.prototype.toString.call(f.prop("href"))?"xlink:href":"href",m=null,n="A"===f.prop("tagName").toUpperCase(),o="FORM"===f[0].nodeName,p=o?"action":l,q=!0,r={relative:k,inherit:!0},s=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in s&&(r[a]=s[a])});var t=function(c){if(c&&(j=b.copy(c)),q){m=a.href(i.state,j,r);var d=h[1]||h[0];return d&&d.$$addStateInfo(i.state,j),null===m?(q=!1,!1):void g.$set(p,m)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a,b){a!==j&&t(a)},!0),j=b.copy(e.$eval(i.paramExpr))),t(),o||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,r)});b.preventDefault();var g=n&&!m?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function E(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(i):d.removeClass(i)}function g(){for(var a=0;a<j.length;a++)if(h(j[a].state,j[a].params))return!0;return!1}function h(b,c){return"undefined"!=typeof e.uiSrefActiveEq?a.is(b.name,c):a.includes(b.name,c)}var i,j=[];i=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$addStateInfo=function(b,c){var e=a.get(b,C(d));j.push({state:e||{name:b},params:c}),f()},b.$on("$stateChangeSuccess",f)}]}}function F(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function G(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var H=b.isDefined,I=b.isFunction,J=b.isString,K=b.isObject,L=b.isArray,M=b.forEach,N=b.extend,O=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var P;r.prototype.concat=function(a,b){var c={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,N(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},r.prototype.parameters=function(a){return H(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=L(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else J(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;L(r)||(r=[r]),r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return L(a)?a:H(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),D.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",E).directive("uiSrefActiveEq",E),F.$inject=["$state"],G.$inject=["$state"],b.module("ui.router.state").filter("isState",F).filter("includedByState",G)}(window,window.angular),angular.module("jlogApp.services",[]),angular.module("jlogApp.filters",[]),angular.module("jlogApp.controllers",[]),angular.module("jlogApp.directives",[]),angular.module("jlogApp",["ui.router","jlogApp.controllers","jlogApp.filters","jlogApp.services","jlogApp.directives"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/battle"),a.state("battle",{url:"/battle",views:{"bottom-bar@":{templateUrl:"partials/battle_list_menu.html",controller:"listBottomCtrl"}},data:{}}).state("battle.view",{url:"/view/:index",views:{"page@":{templateUrl:"partials/battle_view.html",controller:"listViewCtrl"},"bottom-bar@":{templateUrl:"partials/battle_view_menu.html",controller:"listViewBottomCtrl"}},data:{}}).state("battle.edit",{url:"/edit/:index",views:{"page@":{templateUrl:"partials/battle_edit.html",controller:"listEditCtrl"},"bottom-bar@":{templateUrl:"partials/battle_edit_menu.html",controller:"listEditBottomCtrl"}},data:{}}).state("filter",{url:"/filter",views:{"page@":{templateUrl:"partials/filter.html",controller:"filterEditCtrl"},"bottom-bar@":{templateUrl:"partials/filter_menu.html",controller:"filterEditBottomCtrl"}},data:{}}).state("stats",{url:"/stats",views:{"page@":{templateUrl:"partials/stats.html",controller:"statsCtrl"},"bottom-bar@":{templateUrl:"partials/stats_menu.html",controller:"statsBottomCtrl"}},data:{}}).state("backup",{url:"/backup",views:{"page@":{templateUrl:"partials/backup.html",controller:"backupCtrl"}}}).state("help",{url:"/help",views:{"page@":{templateUrl:"partials/help.html"}}}).state("info",{url:"/info",views:{"page@":{templateUrl:"partials/info.html"}}})}]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|blob):/)}]),angular.module("jlogApp.controllers").controller("mainCtrl",["$scope","$state","$q","$window","$timeout","$location","$anchorScroll","scores","factions","scenarios","battles","events","opponents","tags","filter","pubsub","parseUser","parseSync","parseLog",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){_.exists(u)&&(e.cancel(u),u=null);var b=_.chunkAll(a.battles.sorted_list,20);a.battles.display_list=[];var c=function(){a.battles.display_list=_.cat(a.battles.display_list,_.first(b)),b=_.rest(b),_.isEmpty(b)||(u=e(c,200))};u=e(c,200)}a.stateIs=_.bind(b.is,b),a.stateGo=_.bind(b.go,b),a.battles={list:[],sorted_list:[],display_list:[],events:[],opponents:[],scenarios:[],tags:[],sort:{type:"date",reverse:!0},filter:{state:o.init(),active:!1,invert:!1,cache:{}}};var u;a.updateBattles=function(){o.store(a.battles.filter.state);var b=a.battles.filter.active?_.filter(a.battles.list,_.partial(o.match,a.battles.filter.state,_,a.battles.filter.invert,a.battles.filter.cache)):a.battles.list;a.battles.sorted_list=k.sort(b,a.sort_types,a.battles.sort.type,a.battles.sort.reverse),t()},a.setBattles=function(b,c){a.battles.list=k.normalise(b),a.battles.list=k.buildIndex(a.battles.list),k.store(a.battles.list),a.battles.opponents=m.fromBattles(a.battles.list),a.battles.events=l.fromBattles(a.battles.list),a.battles.tags=n.fromBattles(a.battles.list),a.battles.scenarios=j.fromBattles(a.battles.list),a.updateBattles(),a.initParseSync(c)},a.ready=c.when(h.data()).then(function(b){return a.scores=b,c.when(i.data())}).then(function(b){return a.factions=b,c.when(j.data())}).then(function(a){return c.when(k.sortTypes())}).then(function(b){a.sort_types=b}).then(function(){var b=k.init();a.setBattles(b,!0)}),a.parse={channel:p("parse"),state:null,user:null,sync:null},a.initParseSync=function(b){a.parse.state="Init Sync",a.parse.state_class=null,a.parse.user=null,a.parse.sync=null,r.init().then(function(c){return a.parse.sync=c,b||(a.parse.sync=r.unvalidate(a.parse.sync)),a.parse.state="LogIn Sync",a.parse.state_class="info",q.init()}).then(function(b){a.parse.user=b,a.parse.channel.publish("login")})["catch"](function(b){a.parse.channel.publish("logout")})},a.parse.channel.subscribe("login",function(){a.parse.state="Syncing...",a.parse.state_class="info",s.sync(a.parse.user,a.parse.sync,a.battles.list).then(function(b){var c=b[0],d=b[1];a.parse.sync=r.validate(c.updatedAt),a.parse.state="Synced",a.parse.state_class="success",d&&a.setBattles(d,!0)})["catch"](function(){a.parse.state="Sync Failed",a.parse.state_class="danger"})}),a.parse.channel.subscribe("logout",function(){a.parse.state="Sync Off",a.parse.state_class=null}),a.doToggleFilterActive=function(){a.battles.filter.active=!a.battles.filter.active,a.updateBattles()},a.doToggleFilterInvert=function(){a.battles.filter.invert=!a.battles.filter.invert,a.updateBattles()},a.doReload=function(){d.location.reload()},a.scrollTo=function(a){f.hash(a),g()}}]),angular.module("jlogApp.controllers").controller("listCtrl",["$scope",function(a){a.doViewBattle=function(b){a.stateGo("battle.view",{index:b})}}]).controller("listBottomCtrl",["$scope","battles","fileExport",function(a,b,c){a.doAddBattle=function(){a.stateGo("battle.edit",{index:a.battles.list.length})},a.doSortBy=function(c){a.battles.sort=b.updateSortBy(a.sort_types,a.battles.sort,c),a.updateBattles()},a.exports={},a.doExportOpen=function(){var d=(new Date).getTime();a.exports={json:{name:"battles_"+d+".json",url:c.generate("json",a.battles.sorted_list),label:"JSON"},csv:{name:"battles_"+d+".csv",url:c.generate("csv",b.toTable(a.battles.sorted_list)),label:"CSV"},bb:{name:"battles_"+d+".txt",url:c.generate("bb",b.toTable(a.battles.sorted_list)),label:"BB Code"}}}}]),angular.module("jlogApp.controllers").controller("listViewCtrl",["$q","$scope","$stateParams",function(a,b,c){
a.when(b.ready).then(function(){b.battle=b.battles.list[c.index]})}]).controller("listViewBottomCtrl",["$scope","$stateParams","prompt","battles",function(a,b,c,d){a.doEditBattle=function(){a.stateGo("battle.edit",{index:b.index})},a.doDeleteBattle=function(){c.prompt("confirm","You sure you wanna delete this battle ?").then(function(){a.setBattles(d.drop(a.battles.list,parseFloat(b.index))),a.doClose()})},a.doClose=function(){a.stateGo("battle")}}]),angular.module("jlogApp.controllers").controller("listEditCtrl",["$q","$scope","$state","$stateParams","prompt","battle","events","opponents","scenarios","tags",function(a,b,c,d,e,f,g,h,i,j){var k=parseFloat(d.index);a.when(b.ready).then(function(){k<b.battles.list.length?b.battle=_.snapshot(b.battles.list[k]):b.battle=f.create({index:k}),c.current.data.index=k,c.current.data.battle=b.battle,c.current.data.save_enable=!1,b.$watch("battle_edit.$valid",function(a){c.current.data.save_enable=a})});var l={opponent:h,event:g,scenario:i},m={opponent:["opponent","name"],event:["setup","event"],scenario:["setup","scenario"]};b.doAdd=function(a){e.prompt("prompt","Enter new "+a+" name :").then(function(d){_.exists(d)&&(d=s(d).clean().value(),s.isBlank(d)||(b.battles[a+"s"]=l[a].add(b.battles[a+"s"],d),b.battle=_.setPath(b.battle,d,m[a],{}),c.current.data.battle=b.battle))})},b.doDelete=function(a){var d=_.getPath(b.battle,m[a]);_.exists(d)&&e.prompt("confirm","All references to "+d+" will be deleted.").then(function(){b.battles[a+"s"]=l[a].drop(b.battles[a+"s"],d),b.battle=_.setPath(b.battle,null,m[a],{}),c.current.data.battle=b.battle})},b.doAddTag=function(){e.prompt("prompt","Enter new tag name :").then(function(a){_.exists(a)&&(a=s(a).clean().value(),s.isBlank(a)||(b.battles.tags=j.add(b.battles.tags,a),b.battle=f.addTag(b.battle,a),c.current.data.battle=b.battle))})},b.doDeleteTag=function(){var a=b.battle.tags;_.isEmpty(a)||e.prompt("confirm",'All references to "'+a.join(",")+'" will be deleted.').then(function(){b.battles.tags=j.drop(b.battles.tags,a),b.battle.tags=[]})}}]).controller("listEditBottomCtrl",["$scope","$state","battles","filter",function(a,b,c,d){a.state=b.current.data,a.doSave=function(){a.battles.filter.cache=d.clearCache(a.battles.filter.cache,b.current.data.index),a.setBattles(c.save(a.battles.list,b.current.data.index,b.current.data.battle)),a.doClose()},a.doClose=function(){a.stateGo("battle")}}]),angular.module("jlogApp.controllers").controller("filterEditCtrl",["$scope",function(a){}]).controller("filterEditBottomCtrl",["$scope","$window","filter",function(a,b,c){a.doBack=function(){a.battles.filter.cache=c.clearCache(a.battles.filter.cache),a.battles.filter.active=!0,a.updateBattles(),b.history.back()}}]),angular.module("jlogApp.controllers").controller("backupCtrl",["$scope","$window","textImport","fileImport","igParser","textExport","fileExport","server","battles","filter","parseUser","parseSync",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var b=(new Date).getTime();a.backup={text:f.generate("json",a.battles.list),url:g.generate("json",a.battles.list),name:"jlog_"+b+".json"}}e.init(),a.$watch("battles.list",function(a){_.isEmpty(a)||m()}),a.read_text=null,a.read_result={},a.doReadFile=function(b,c){a.read_result[b]=["Loading file..."],a.$digest(),d.read(b,c).then(function(c){var d=c[0],e=c[1],f=_.isEmpty(e);e.push("imported "+d.length+" battles"),_.isEmpty(d)||a.setBattles(d),a.read_result[b]=e,f&&a.stateGo("battle")},function(c){a.read_result[b]=c})},a.doReadText=function(b,d){_.isString(d)&&!s.isBlank(d)&&(a.read_result[b]=["Reading text..."],c.read(b,d).then(function(c){var d=c[0],e=c[1],f=_.isEmpty(e);e.push("imported "+d.length+" battles"),_.isEmpty(d)||a.setBattles(d),a.read_result[b]=e,f&&a.stateGo("battle")},function(c){a.read_result[b]=c}))},a.upload={id:null,msg:null},a.doUploadData=function(){a.upload={id:null,msg:"Uploading..."},h.upload(a.battles.list).then(function(b){a.upload={id:b[0],msg:b[1]}})},a.download={id:null,msg:null},a.doDownloadData=function(){_.isString(a.download.id)&&!s.isBlank(a.download.id)&&(a.download.msg="Downloading...",h.download(a.download.id).then(function(b){a.download.msg=b[1],_.exists(b[0])&&(a.setBattles(b[0]),a.stateGo("battle"))}))},a.doClearStorage=function(){i.clearStorage(),j.clearStorage()},a.old_data=null,a.doReadOldDatabase=function(){a.old_data=b.localStorage.getItem("jlog_battles")},a.signup={},a.doSignUp=function(){a.parse.user={},a.signup.error="Signing up...",k.signup(a.signup).then(function(b){a.parse.user=b,a.parse.channel.publish("login"),a.signup.error=null})["catch"](function(b){a.parse.user={},a.parse.channel.publish("logout"),a.signup.error=b}).then(function(){a.signup.password=null})},a.login={},a.doLogIn=function(){a.parse.user={},a.login.error="Loging in...",k.login(a.login).then(function(b){a.parse.user=b,a.initParseSync(!0),a.login.error=null})["catch"](function(b){a.parse.user={},a.parse.channel.publish("logout"),a.login.error=b}).then(function(){a.login.password=null})},a.logout={},a.doLogOut=function(){a.logout.error="Loging out...",k.logout(a.parse.user).then(function(b){a.parse.user=b,a.parse.channel.publish("logout"),a.logout.error=null})["catch"](function(b){a.logout.error=b})},a.doClearSync=function(){l.clear()}}]),angular.module("jlogApp.controllers").controller("statsCtrl",["$scope","$state","stats",function(a,b,c){c.init(),a.stats={},b.current.data={entry:"result",selector:"total",selector_arg:null,doGenerate:function(){a.stats=c.generate(a.stats,a.battles.sorted_list,this.entry,this.selector,this.selector_arg)}},a.state=b.current.data,a.$watch("battles.sorted_list",function(b){_.isEmpty(b)||a.state.doGenerate()})}]).controller("statsBottomCtrl",["$scope","$state","stats",function(a,b,c){a.SELECTORS=c.SELECTORS,a.ENTRIES=c.ENTRIES,a.state=b.current.data,a.doSetEntry=function(b){a.state.entry=b,a.state.doGenerate()},a.doSetSelector=function(b){a.state.selector_arg=a.state.selector===b?a.state.selector_arg:null,a.state.selector=b,a.state.doGenerate()}}]),angular.module("jlogApp.services").factory("appCache",["$window","$rootScope","pubsub",function(a,b,c){function d(a){switch(e.status="checking",e.online="Checking",a.type){case"checking":e.progress=0;break;case"downloading":e.online="Online",e.progress=0;break;case"progress":e.online="Online",e.progress=(e.progress+1)%100;break;case"cached":case"noupdate":case"obsolete":e.online="Online",e.status="done",e.progress=0;break;case"updateready":e.online="Online",e.status="ready",e.progress=0;break;case"error":e.status="error",e.online="Offline",e.progress=0}g.publish("statusChange",_.clone(e))}var e={status:null,online:null,progress:0},f=a.applicationCache,g=c("appCache");return f.addEventListener("cached",d,!1),f.addEventListener("checking",d,!1),f.addEventListener("downloading",d,!1),f.addEventListener("error",d,!1),f.addEventListener("noupdate",d,!1),f.addEventListener("obsolete",d,!1),f.addEventListener("progress",d,!1),f.addEventListener("updateready",d,!1),g.update=function(){f.update()},g}]),angular.module("jlogApp.services").factory("battle",["factions",function(a){var b={create:function(a){a=_.exists(a)?a:{};var b=new Date;return _.deepExtend({index:0,date:{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate()},my_army:{faction:null,caster:null},opponent:{name:null,faction:null,caster:null},setup:{size:null,scenario:null,event:null,initiative:{won_roll:null,started:null}},score:null,points:{my_army:{scenario:null,army:null,kill:null},opponent:{scenario:null,army:null,kill:null}},tags:[],comment:null},a)},normalise:function(b){return b.my_army.faction=a.normaliseFaction(b.my_army.faction),b.opponent.faction=a.normaliseFaction(b.opponent.faction),b},test:function(a,b,c,d){var e=_.chain(b).shuffle().first().value(),f=_.chain(b).shuffle().first().value();return{index:a,date:{year:_.chain([2012,2014,2013]).shuffle().first().value(),month:_.chain([4,8,9]).shuffle().first().value(),day:_.chain([5,12,19]).shuffle().first().value()},my_army:{faction:e.key,caster:_.chain(e.casters).shuffle().first().value().key},opponent:{name:_.chain(["wood","kevin","fred"]).shuffle().first().value(),faction:f.key,caster:_.chain(f.casters).shuffle().first().value().key},setup:{size:_.chain([15,25,35,50]).shuffle().first().value(),scenario:_.chain(d).shuffle().first().value().key,event:_.chain(["master","amical","wtc"]).shuffle().first().value(),initiative:{won_roll:_.chain(["true","false"]).shuffle().first().value(),started:_.chain(["true","false"]).shuffle().first().value()}},score:_.chain(c).keys().shuffle().first().value(),points:{my_army:{scenario:5*Math.random()>>0,army:50*Math.random()>>0,kill:50*Math.random()>>0},opponent:{scenario:5*Math.random()>>0,army:50*Math.random()>>0,kill:50*Math.random()>>0}},tags:["tiers4","raek spam"],comment:"don't panic"}},addTag:function(a,b){return _.chain(a).clone().apply(function(a){return a.tags=_.chain(a.tags).cat(b).uniq().sort().value(),a}).value()},initRollDescFor:function(a){return"true"===_.getPath(a,"setup.initiative.won_roll")?"Won Roll":"Lost Roll"},initStartDescFor:function(a){return"true"===_.getPath(a,"setup.initiative.started")?"Started Game":"Chose Side"}};return b}]).service("battles",["$window","$http","$q","battle","orderByFilter","jsonStringifier",function(a,b,c,d,e,f){function g(a){return _.chain(a).apply(s.chars).map(function(a){return a.charCodeAt(0)}).reduce(function(a,b){return a=(a<<5)-a+b,a&=a},0).value()}var h,i={date:function(a){return a.date.year+"-"+a.date.month+"-"+a.date.day},my_faction:"my_army.faction",my_caster:"my_army.caster",opponent:"opponent.name",opponent_faction:"opponent.faction",opponent_caster:"opponent.caster",size:"setup.size",scenario:"setup.scenario",event:"setup.event",initiative:function(a){return("true"===a.setup.initiative.won_roll?"wonRoll":"lostRoll")+"-"+("true"===a.setup.initiative.started?"startedGame":"choseSide")},result:"score",my_cp:"points.my_army.scenario",my_ap:"points.my_army.army",my_kp:"points.my_army.kill",opponent_cp:"points.opponent.scenario",opponent_ap:"points.opponent.army",opponent_kp:"points.opponent.kill",tags:function(a){return a.tags.join("|")},comment:"comment"},j={init:function(){var b,c=a.localStorage.getItem("jlog_battles_v2");if(_.isString(c))try{if(b=JSON.parse(c),_.isArray(b))return b}catch(d){}if(c=a.localStorage.getItem("jlog_battles"),_.isString(c))try{if(b=JSON.parse(c),_.isArray(b))return b}catch(d){}return[]},store:function(b){a.localStorage.setItem("jlog_battles_v2",f.stringify(b))},clearStorage:function(){a.localStorage.removeItem("jlog_battles_v2"),a.localStorage.removeItem("jlog_battles")},buildIndex:function(a){return _.each(a,function(a,b){a.index=b,a.hash=g(f.stringify(a))})},normalise:function(a){return _.map(a,d.normalise)},save:function(a,b,c){var d=_.clone(a);return d.splice(b,1,c),d},drop:function(a,b){var c=_.clone(a);return c.splice(b,1),c},test:function(a,b,c,e){return _.chain(a).range().map(_.partial(d.test,_,b,c,e)).value()},sortTypes:function(){return _.exists(h)?h:b.get("data/sorts.json").then(function(a){return h=a.data},function(a){return c.reject(a)})},updateSortBy:function(a,b,c){if(!_.exists(a[c]))return b;var d=_.clone(b);return d.type===c?d.reverse=!d.reverse:(d.type=c,d.reverse=a[c].reverse),d},sort:function(a,b,c,d){return e(a,b[c].key,d)},toTable:function(a){return _.cat([_.keys(i)],_.chain(a).map(function(a){return _.reduce(i,function(b,c){return _.isFunction(c)?b.push(c(a)):b.push(_.getPath(a,c)),b},[])}).value())}};return j}]),angular.module("jlogApp.services").service("events",[function(){var a={fromBattles:function(a){return _.chain(a).mapWith(_.getPath,"setup.event").without(null,void 0).uniq().sortBy(function(a){return a.toUpperCase()}).value()},add:function(a,b){return _.chain(a).cat(b).without(null,void 0).uniq().sort().value()},drop:function(a,b){return _.without(a,b)}};return a}]),angular.module("jlogApp.services").factory("jsonStringifier",[function(){var a={stringify:function(a){return JSON.stringify(a,function(a,b){return s.startsWith(a,"$$")?void 0:b})}};return a}]).factory("textExport",["$window","csvStringifier","bbStringifier","jsonStringifier",function(a,b,c,d){a.URL=a.URL||a.webkitURL;var e={csv:b,bb:c,json:d};return{generate:function(a,b){return _.chain(b).apply(e[a].stringify).value()}}}]).factory("fileExport",["$window","csvStringifier","bbStringifier","jsonStringifier",function(a,b,c,d){a.URL=a.URL||a.webkitURL;var e={csv:b,bb:c,json:d};return{generate:function(b,c){return _.chain(c).apply(e[b].stringify).apply(function(b){return new a.Blob([b],{type:"text/plain"})}).apply(a.URL.createObjectURL).value()},cleanup:function(b){_.exists(b)&&a.URL.revokeObjectURL(b)}}}]),angular.module("jlogApp.services").factory("bbStringifier",[function(){function a(a,b){return"["+b+"]"+a+"[/"+b+"]"}var b="\r\n",c={stringify:function(c){return _.chain(c).map(function(b,c){return _.chain(b).map(function(b){return 0===c?a(b,"b"):b}).mapWith(a,"td").join("").apply(a,"tr").value()}).join(b).apply(a,"table").value()}};return c}]),angular.module("jlogApp.services").factory("csvStringifier",[function(){var a="\r\n",b={stringify:function(b){return _.chain(b).map(function(a){return _.map(a,function(a){return _.isString(a)&&(a=a.replace(/\"/g,'""')),a=_.exists(a)?a:"",'"'+a+'"'})}).map(function(a){return a.join(",")}).join(a).value()}};return b}]),angular.module("jlogApp.services").factory("jsonParser",[function(){return{parse:function(a){return[JSON.parse(a),[]]}}}]).factory("textImport",["$window","$q","jsonParser","igParser",function(a,b,c,d){var e={json:c,ig:d};return{read:function(a,c){var d,f=b.defer();try{d=e[a].parse(c),f.resolve(d)}catch(g){f.reject(["invalid text : "+g.message])}return f.promise}}}]).factory("fileImport",["$window","$q","jsonParser","igParser",function(a,b,c,d){var e={json:c,ig:d};return{read:function(c,d){var f=new a.FileReader,g=b.defer();return f.onload=function(a){var b;try{b=e[c].parse(a.target.result),g.resolve(b)}catch(d){g.reject(["invalid file : "+d.message])}},f.onerror=function(a){g.reject(["error reading file"])},f.onabort=function(a){g.reject(["abort reading file"])},f.readAsText(d),g.promise}}}]),angular.module("jlogApp.services").factory("igParser",["$q","battle","factions","scenarios",function(a,b,c,d){function e(a){if(s.isBlank(a))return[];for(var b=",",c=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\,\\r\\n]*))',"gi"),d=[[]],e=c.exec(a);e;){var f=e[1];f.length&&f!=b&&d.push([]);var g;g=e[2]?e[2].replace(/\"\"/g,'"'):e[3],_.last(d).push(g),e=c.exec(a)}return d}var f,g,h={0:"dd",1:"va",2:"vs",3:"vt",4:"vt",5:"vt",6:"vt",7:"vc","-1":"da","-2":"ds","-3":"dt","-4":"dt","-5":"dt","-6":"dt","-7":"dc"},i={1:{won_roll:"true",started:"true"},2:{won_roll:"true",started:"false"},3:{won_roll:"false",started:"true"},4:{won_roll:"false",started:"false"}},j={init:function(){a.when(c.data()).then(function(a){f=a}),a.when(d.data()).then(function(a){g=a})},parse:function(a){var j=[],k=_.clone(g),l=_.chain(a).apply(e).map(function(a,e){if(_.isEmpty(a)||1===_.size(a)&&s.isBlank(a[0]))return void 0;if(a=_.map(a,function(a){return!_.isString(a)||a.match(/null/i)?"":a}),18!=a.length)return void j.push("line "+(e+1)+": invalid nb of fields ("+a.length+", expected 18)");var g=new Date(parseFloat(a[0])),l=c.keyForName(f,a[1]);_.exists(l)||j.push("line "+(e+1)+": unknown faction "+a[1]);var m=c.keyForName(f,a[4]);_.exists(m)||j.push("line "+(e+1)+": unknown faction "+a[4]);var n=_.getPath(h,a[6]);_.exists(n)||j.push("line "+(e+1)+": unknown score "+a[6]);var o=d.nameFor(k,a[13]);_.exists(o)?o=a[13]:s.isBlank(a[13])?o=null:(k=d.add(k,a[13]),o=a[13]);var p=_.getPath(i,a[16]);return _.exists(p)?p=_.clone(p):(s.isBlank(a[16])||j.push("line "+(e+1)+": unknown initiative "+a[16]),p=void 0),b.create({date:{year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate()},my_army:{faction:l,caster:c.normaliseCaster(a[2])},opponent:{name:a[3],faction:m,caster:c.normaliseCaster(a[5])},score:n,points:{my_army:{scenario:_.isNumeric(a[7])?parseFloat(a[7]):null,army:_.isNumeric(a[8])?parseFloat(a[8]):null,kill:_.isNumeric(a[9])?parseFloat(a[9]):null},opponent:{scenario:_.isNumeric(a[10])?parseFloat(a[10]):null,army:_.isNumeric(a[11])?parseFloat(a[11]):null,kill:_.isNumeric(a[12])?parseFloat(a[12]):null}},setup:{scenario:o,size:_.isNumeric(a[14])?parseFloat(a[14]):null,event:a[15],initiative:p},comment:a[17]})}).without(void 0).spy("ig battles",j).value();return[l,j]}};return j}]),angular.module("jlogApp.services").factory("factions",["$http","$q",function(a,b){var c,d={data:function(){return _.exists(c)?c:a.get("data/factions.json").then(function(a){return c=_.chain(a.data).map(function(a,b){return{key:b,name:a.name,icon:a.icon,hue:a.hue,casters:_.map(a.casters,function(a,b){var c=d.normaliseCaster(b);return{key:c,name:a.name}})}}).sortBy(_.accessor("name")).map(function(a){return a.casters=_.sortBy(a.casters,_.accessor("key")),a}).value()})["catch"](function(a){return b.reject(a)})},normaliseFaction:function(a){return _.contains(["cephalyx","highborn","seaforge","talion","fourstar"],a)?"mercs":_.contains(["blindwater","thornfall"],a)?"minions":a},normaliseCaster:function(a){if(!_.isString(a)||s.isBlank(a))return null;var b=a.charAt(a.length-1);return("0">b||b>"9")&&(a+="1"),a.toLowerCase()},keyForName:function(a,b){return _.chain(a).where({name:b}).first().getPath("key").value()},nameFor:function(a,b){return _.chain(a).where({key:b}).first().getPath("name").value()},iconFor:function(a,b){return _.chain(a).where({key:b}).first().getPath("icon").apply(function(a){return _.exists(a)?"data/img/"+a:a}).value()},hueFor:function(a,b){return _.chain(a).where({key:b}).first().getPath("hue").value()},castersFor:function(a,b){return _.chain(a).where({key:b}).first().getPath("casters").value()},casterNameFor:function(a,b,c){return _.chain(a).where({key:b}).first().getPath("casters").where({key:c}).first().getPath("name").value()}};return d}]),angular.module("jlogApp.services").factory("filterMatchSimple",[function(){var a={create:function(a){return _.extend({active:!1,is:"true",value:[]},a)},match:function(a,b,c){var d=_.getPath(b,c),e=_.isEmpty(a.value)||0<=_.indexOf(a.value,d);return"true"===a.is?e:!e}};return a}]).factory("compareDate",[function(){return function(a,b){return a.year>b.year?1:a.year<b.year?-1:a.month>b.month?1:a.month<b.month?-1:a.day>b.day?1:a.day<b.day?-1:0}}]).factory("filterMatchComp",[function(){function a(a,b){switch(a){case"==":return 0===b;case"!=":return 0!==b;case">":return-1===b;case">=":return 1!==b;case"<":return 1===b;case"<=":return-1!==b}return!1}var b={create:function(a,b){return _.deepExtend({active:!1,is:"==",value:b()},a)},match:function(b,c,d,e){var f=_.getPath(c,d),g=e(b.value,f),h=a(b.is,g);return h}};return b}]).factory("filterMatchCaster",[function(){var a={create:function(a){return _.deepExtend({active:!1,is:"true",value:{faction:null,caster:[]}},a)},match:function(a,b,c){var d=_.getPath(b,c),e=a.value.faction===d.faction&&(_.isEmpty(a.value.caster)||0<=_.indexOf(a.value.caster,d.caster));return"true"===a.is?e:!e}};return a}]).factory("filterMatchInitiative",[function(){var a={create:function(a){return _.extend({active:!1,is:"true",value:{won_roll:"",started:""}},a)},match:function(a,b){var c=b.setup.initiative,d=(s.isBlank(a.value.won_roll)||a.value.won_roll===c.won_roll)&&(s.isBlank(a.value.started)||a.value.started===c.started);return"true"===a.is?d:!d}};return a}]).factory("filterMatchTags",[function(){var a={create:function(a){return _.extend({active:!1,is:"any",value:[]},a)},match:function(a,b){if(_.isEmpty(a.value))return!0;if(_.isEmpty(b.tags))return"none"===a.is||"not_all"===a.is;var c=_.map(a.value,function(a){return 0<=_.indexOf(b.tags,a)}),d=_.every(c),e=_.some(c);switch(a.is){case"any":return e;case"all":return d;case"not_all":return!d;case"none":return!e;default:return!1}}};return a}]).factory("filter",["$window","jsonStringifier","filterMatchSimple","filterMatchComp","filterMatchCaster","filterMatchInitiative","filterMatchTags","compareDate",function(a,b,c,d,e,f,g,h){function i(){var a=new Date;return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate()}}function j(a){return _.isObject(a)?a:{}}var k=[{key:"date",create:_.partial(d.create,_,i),match:_.partial(d.match,_,_,"date",h)},{key:"my_army",create:e.create,match:_.partial(e.match,_,_,"my_army")},{key:"opp_name",create:c.create,match:_.partial(c.match,_,_,"opponent.name")},{key:"opp_caster",create:e.create,match:_.partial(e.match,_,_,"opponent")},{key:"result",create:c.create,match:_.partial(c.match,_,_,"score")},{key:"scenario",create:c.create,match:_.partial(c.match,_,_,"setup.scenario")},{key:"initiative",create:f.create,match:f.match},{key:"size",create:_.partial(d.create,_,_.always(50)),match:_.partial(d.match,_,_,"setup.size",_.comparator(_.lt))},{key:"event",create:c.create,match:_.partial(c.match,_,_,"setup.event")},{key:"tags",create:g.create,match:g.match}],l={init:function(){var b,c=a.localStorage.getItem("jlog_filter_v2");if(_.isString(c))try{if(b=JSON.parse(c),_.isObject(b))return l.create(b)}catch(d){}return l.create()},store:function(c){a.localStorage.setItem("jlog_filter_v2",b.stringify(c))},clearStorage:function(){a.localStorage.removeItem("jlog_filter"),a.localStorage.removeItem("jlog_filter_v2")},create:function(a){return a=j(a),_.chain(k).reduce(function(b,c){return b[c.key]=c.create(j(a[c.key])),b},{}).value()},match:function(a,b,c,d){return d=_.exists(d)?d:{},_.exists(d[b.index])||(d[b.index]=_.chain(k).filter(function(b){return _.getPath(a,b.key+".active")}).map(function(b){return[b.match,a[b.key]]}).map(function(a){return a[0](a[1],b)}).every().value()),c?!d[b.index]:d[b.index]},clearCache:function(a,b){return _.exists(b)?_.omit(a,""+b):{}}};return l}]),angular.module("jlogApp.services").service("opponents",[function(){var a={fromBattles:function(a){return _.chain(a).mapWith(_.getPath,"opponent.name").without(null,void 0).uniq().sort().value()},add:function(a,b){return _.chain(a).cat(b).without(null,void 0).uniq().sort().value()},drop:function(a,b){return _.without(a,b)}};return a}]),angular.module("jlogApp.services").value("parseStorageKeys",{sessionToken:"jlogApp.parse.sessionToken",sync:"jlogApp.parse.sync"}).value("parseUrls",{root:"https://api.parse.com/1"}).value("parseHeaders",{"X-Parse-Application-Id":"LkO5rF2pzzCXuC37BH2pUsccpXfO5Fafv22FvpTW","X-Parse-REST-API-Key":"G2Ok330t9e4EALJUEBhymk50gpJ2F1yWj8EMFaob"}),angular.module("jlogApp.services").factory("parseLog",["$window","$http","$q","prompt","parseUrls","parseHeaders","parseStorageKeys",function(a,b,c,d,e,f,g){var h={init:function(){},retrieveInfo:function(a){var d={method:"GET",url:e.root+"/classes/Log",headers:_.extend({"X-Parse-Session-Token":a.sessionToken},f),params:{where:{owner:{__type:"Pointer",className:"_User",objectId:a.objectId}},keys:"updatedAt"}};return b(d)["catch"](function(a){return c.reject(a.data.error)}).then(function(a){var b=a.data.results;return _.isEmpty(b)?c.reject("no result"):b[0]})["catch"](function(a){return c.reject(a)})},create:function(a,d){d={log:self.LZString.compressToUTF16(JSON.stringify(d)),owner:{__type:"Pointer",className:"_User",objectId:a.objectId}};var g={method:"POST",url:e.root+"/classes/Log",headers:_.extend({"X-Parse-Session-Token":a.sessionToken},f),data:JSON.stringify(d)};return b(g)["catch"](function(a){return c.reject(a.data.error)}).then(function(a){return{objectId:a.data.objectId,updatedAt:a.data.createdAt}})},updateServerFromLocal:function(a,e,g){return h.retrieveInfo(a).then(function(a){var b={last:Date.parse(e.last),current:Date.parse(e.current),server:Date.parse(a.updatedAt)},f=c.when(a);return(b.server>b.last||isNaN(b.last))&&(f=d.prompt("confirm",["Local data & Online data diverge.","Do you want to update Online with Local data ?"]).then(function(){return a})),f}).then(function(d){g={log:self.LZString.compressToUTF16(JSON.stringify(g))};var e={method:"PUT",url:["https://api.parse.com/1/classes/Log/",d.objectId].join(""),headers:_.extend({"X-Parse-Session-Token":a.sessionToken,"Content-Type":"application/json"},f),data:JSON.stringify(g)};return b(e)["catch"](function(a){return c.reject(a.data.error)}).then(function(a){return[_.extend(d,{updatedAt:a.data.updatedAt})]})})},updateLocalFromServer:function(a,g,i){return h.retrieveInfo(a).then(function(a){var b={last:Date.parse(g.last),current:Date.parse(g.current),server:Date.parse(a.updatedAt)},e=c.when(a);return b.server<=b.last?c.reject("server is behind"):(!_.isEmpty(i)&&isNaN(b.current)&&(b.server>b.last||isNaN(b.last))&&(e=d.prompt("confirm",["Local data & Online data diverge.","Do you want to update Local with Online data ?"]).then(function(){return a})),d.prompt("confirm",["Online data is newer than Local data.","Do you want to update Local with Online data ?"]).then(function(){return a}))}).then(function(d){var g={method:"GET",url:[e.root,"/classes/Log/",d.objectId].join(""),headers:_.extend({"X-Parse-Session-Token":a.sessionToken},f),params:{keys:"log"}};return b(g)["catch"](function(a){return c.reject(a.data.error)}).then(function(a){return a.data}).then(function(a){return[{objectId:a.objectId,updatedAt:a.updatedAt},JSON.parse(self.LZString.decompressFromUTF16(a.log))]})})},sync:function(a,b,d){return h.retrieveInfo(a)["catch"](function(){return h.create(a,d).then(function(a){return b={last:a.updatedAt,current:a.updatedAt},a})}).then(function(e){return b.current===e.updatedAt?[e]:h.updateLocalFromServer(a,b,d)["catch"](function(){return h.updateServerFromLocal(a,b,d)})["catch"](function(){return c.reject("diverge")})})}};return h}]),angular.module("jlogApp.services").factory("parseSync",["$window","$http","$q","parseUrls","parseHeaders","parseStorageKeys",function(a,b,c,d,e,f){function g(b){a.localStorage.setItem(f.sync,JSON.stringify(b))}var h={init:function(){return c.when(a.localStorage.getItem(f.sync)).then(JSON.parse)["catch"](function(a){}).then(function(a){return a=a||{},a=_.extend({last:null,current:null},a)})},validate:function(a){var b={last:a,current:a};return g(b),b},unvalidate:function(a){return a.current=null,g(a),a},clear:function(){a.localStorage.removeItem(f.sync)}};return h}]),angular.module("jlogApp.services").factory("parseUser",["$window","$http","$q","parseUrls","parseHeaders","parseStorageKeys",function(a,b,c,d,e,f){function g(a){return _.isString(a)&&a.length>0}var h={init:function(){return c.when(a.localStorage.getItem(f.sessionToken)).then(h.validateSessionToken).then(h.retrieveSession)["catch"](function(a){return c.reject(a)})},validateSessionToken:function(a){return g(a)?a:c.reject('invalid session token "'+a+'"')},retrieveSession:function(a){var f={method:"GET",url:d.root+"/users/me",headers:_.extend({"X-Parse-Session-Token":a},e)};return b(f).then(function(a){return a.data})["catch"](function(a){return c.reject(a.data.error)})},signup:function(g){g=_.pick(g,"username","password","email");var h={method:"POST",url:d.root+"/users",headers:_.extend({"X-Parse-Revocable-Session":"1"},e),data:JSON.stringify(g)};return b(h).then(function(b){var c=_.extend(g,b.data);return a.localStorage.setItem(f.sessionToken,c.sessionToken),c})["catch"](function(a){return c.reject(a.data.error)})},login:function(g){var h={method:"GET",url:d.root+"/login",headers:_.extend({"X-Parse-Revocable-Session":"1"},e),params:g};return b(h).then(function(b){var c=b.data;return a.localStorage.setItem(f.sessionToken,c.sessionToken),c})["catch"](function(a){return c.reject(a.data.error)})},logout:function(g){var h={method:"POST",url:d.root+"/logout",headers:_.extend({"X-Parse-Session-Token":g.sessionToken},e)};return b(h).then(function(b){return a.localStorage.removeItem(f.sessionToken),{}})["catch"](function(a){return c.reject(a.data.error)})},users:function(){var a={method:"GET",url:d.root+"/users",headers:e};return b(a).then(function(a){return a.data.results})["catch"](function(a){return a.data.error})}};return h}]),angular.module("jlogApp.services").factory("pubsub",[function(){var a="#watch#";return function(b){function c(a,b){f[a]=f[a]||[],f[a].push(b)}function d(a,b){return function(){f[a]=_.without(f[a],b)}}function e(a,b){_.isArray(f[a])&&_.each(f[a],function(a){a.apply(null,b)})}var f={};return{subscribe:function(a,b){return _.isFunction(b)?(c(a,b),d(a,b)):void 0},publish:function(b){var c=Array.prototype.slice.call(arguments,0);e(b,_.rest(c)),e(a,c)}}}}]),angular.module("jlogApp.services").service("scenarios",["$http","$q",function(a,b){var c,d={data:function(){return _.exists(c)?c:a.get("data/scenarios.json").then(function(a){return c=_.chain(a.data).map(function(a,b){return{key:b,scenars:_.chain(a).map(function(a,b){return{key:b,name:a.name}}).sortBy(_.accessor("name")).value()}}).sortBy(_.accessor("key")).reverse().mapcat(_.accessor("scenars")).value(),_.clone(c)},function(a){return b.reject(a)})},fromBattles:function(a){var b=_.clone(c);return _.chain(a).mapWith(_.getPath,"setup.scenario").uniq().without(void 0,null).sort().each(function(a){_.exists(d.nameFor(b,a))||(b=d.add(b,a))}).value(),b},add:function(a,b){return _.chain(a).cat({key:b,name:b}).filter(function(a){return _.exists(_.getPath(a,"key"))}).uniq(!1,_.partial(_.getPath,_,"key")).value()},drop:function(a,b){return _.filter(a,function(a){return a.key!==b})},nameFor:function(a,b){return _.chain(a).where({key:b}).first().getPath("name").value()}};return d}]),angular.module("jlogApp.services").factory("scores",["$http","$q",function(a,b){var c,d={data:function(){return _.exists(c)?c:a.get("data/scores.json").then(function(a){return c=a.data,a.data},function(a){return b.reject(a)})},letterFor:function(a,b){return _.getPath(a,b+".letter")},typeFor:function(a,b){return _.getPath(a,b+".type")},resultFor:function(a,b){return _.getPath(a,b+".result")},classFor:function(a,b){return _.getPath(a,b+".class")}};return d}]),angular.module("jlogApp.services").factory("server",["$http",function(a){var b={upload:function(b){return a.post("/api/log",{battles:b},{timeout:2e4}).then(function(a){return[a.data.id,"data uploaded"]},function(a){return[null,"upload failure ("+a.status+")"]})},download:function(b){return a.get("/api/log/"+b,{timeout:2e4}).then(function(a){return[a.data.battles,"data downloaded"]},function(a){return[null,"download failure ("+a.status+")"]})}};return b}]),angular.module("jlogApp.services").service("stats",["statEntryFaction","statEntryCaster","statEntrySimple","statEntryScenario","statEntryInit","statEntryResult","statEntryTimeResult","statEntryPoints","statEntryTag","statSelectorTotal","statSelectorFaction","statSelectorCaster","statSelectorSimple","statSelectorScenario","statSelectorInit","statSelectorResult","statSelectorTag",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r={ENTRIES:{my_faction:{desc:"My Faction",reduce:_.partial(a.reduce,_,_,"my_army.faction")},my_caster:{desc:"My Caster",reduce:_.partial(b.reduce,_,_,"my_army")},opp_name:{desc:"Opp. Name",reduce:_.partial(c.reduce,_,_,_.partial(_.getPath,_,"opponent.name"))},opp_faction:{desc:"Opp Faction",reduce:_.partial(a.reduce,_,_,"opponent.faction")},opp_caster:{desc:"Opp. Caster",reduce:_.partial(b.reduce,_,_,"opponent")},event:{desc:"Event",reduce:_.partial(c.reduce,_,_,_.partial(_.getPath,_,"setup.event"))},scenario:{desc:"Scenario",reduce:d.reduce},size:{desc:"Size",reduce:_.partial(c.reduce,_,_,function(a){return _.getPath(a,"setup.size")+"pts"})},initiative:{desc:"Initiative",reduce:e.reduce},result:{desc:"Result",reduce:f.reduce},result_time:{desc:"Result Over Time",reduce:g.reduce},points:{desc:"Points",reduce:h.reduce},tag:{desc:"Tag",reduce:i.reduce}},SELECTORS:{total:{desc:"Total",sort:j.sort},my_faction:{desc:"My Faction",sort:_.partial(k.sort,_,"my_army.faction")},my_caster:{desc:"My Caster",sort:_.partial(l.sort,_,_,"my_army")},opp_name:{desc:"Opp. Name",sort:_.partial(m.sort,_,_.partial(_.getPath,_,"opponent.name"))},opp_faction:{desc:"Opp. Faction",sort:_.partial(k.sort,_,"opponent.faction")},opp_caster:{desc:"Opp. Caster",sort:_.partial(l.sort,_,_,"opponent")},event:{desc:"Event",sort:_.partial(m.sort,_,_.partial(_.getPath,_,"setup.event"))
},scenario:{desc:"Scenario",sort:n.sort},size:{desc:"Size",sort:_.partial(m.sort,_,function(a){return _.getPath(a,"setup.size")+"pts"})},init:{desc:"Initiative",sort:o.sort},result:{desc:"Result",sort:p.sort},tag:{desc:"Tag",sort:q.sort}},init:function(){a.init(),b.init(),d.init(),g.init(),k.init(),l.init(),n.init(),p.init()},generate:function(a,b,c,d,e){return _.has(r.ENTRIES,c)&&_.has(r.SELECTORS,d)?(a=_.clone(a),a[c]=a[c]||{},a[c][d+"."+e]=_.chain(b).apply(r.SELECTORS[d].sort,e).mapWith(r.ENTRIES[c].reduce).sortBy(_.partial(_.getPath,_,"title")).value(),a):a}};return r}]),angular.module("jlogApp.services").service("statEntryFaction",["factions","$q",function(a,b){var c;return{init:function(){b.when(a.data()).then(function(a){c=a})},reduce:function(b,d,e){var f=_.chain(b).countBy(_.partial(_.getPath,_,e)).reduce(function(b,d,e){return b[a.nameFor(c,e)]=d,b},{}).value(),g=_.chain(c).reduce(function(a,b){return a[b.name]=b.hue,a},{}).value();return{title:d,hues:g,values:f}}}}]).service("statEntryCaster",["factions","$q",function(a,b){var c;return{init:function(){b.when(a.data()).then(function(a){c=a})},reduce:function(b,d,e){var f=_.chain(b).groupBy(_.partial(_.getPath,_,e+".faction")).reduce(function(b,d,f){return b[a.nameFor(c,f)]=_.chain(d).countBy(_.partial(_.getPath,_,e+".caster")).value(),b},{}).value(),g=_.chain(c).reduce(function(a,b){return a[b.name]=b.hue,a},{}).value();return{title:d,hues:g,values:f}}}}]).service("statEntrySimple",[function(){return{reduce:function(a,b,c){return{title:b,values:_.chain(a).countBy(c).value()}}}}]).service("statEntryScenario",["scenarios","$q",function(a,b){var c;return{init:function(){b.when(a.data()).then(function(a){c=a})},reduce:function(b,d){return{title:d,values:_.chain(b).countBy(_.partial(_.getPath,_,"setup.scenario")).reduce(function(b,d,e){return b[a.nameFor(c,e)]=d,b},{}).value()}}}}]).service("statEntryInit",[function(){return{reduce:function(a,b){return{title:b,legends:["Won Roll, Started Game","Won Roll, Chose Side","Lost Roll, Started Game","Lost Roll, Chose Side"],colors:["#4AE34D","#39B03C","#B02817","#E3341D"],values:_.chain(a).reduce(function(a,b){var c=_.getPath(b,"setup.initiative.won_roll"),d=_.getPath(b,"setup.initiative.started");return _.isString(c)&&_.isString(d)&&a[("true"===c?"wr":"lr")+"_"+("true"===d?"sg":"cs")]++,a},{wr_sg:0,wr_cs:0,lr_sg:0,lr_cs:0}).apply(function(a){return[a.wr_sg,a.wr_cs,a.lr_sg,a.lr_cs]}).value()}}}}]).service("statEntryResult",[function(){return{reduce:function(a,b){return{title:b,legends:["Assassination Victory","Clock Victory","Scenario Victory","Tiebreakers Victory","Dice Down Draw","Tiebreakers Defeat","Scenario Defeat","Clock Defeat","Assassination Defeat"],colors:["#91E893","#4AE34D","#39B03C","#3E633F","#E2E345","#63312B","#B02817","#E3341D","#E87263"],values:_.chain(a).reduce(function(a,b){return a[b.score]++,a},{va:0,vc:0,vs:0,vt:0,dd:0,da:0,dc:0,ds:0,dt:0}).apply(function(a){return[a.va,a.vc,a.vs,a.vt,a.dd,a.dt,a.ds,a.dc,a.da]}).value()}}}}]).service("statEntryTimeResult",["battles","$q",function(a,b){var c;return{init:function(){b.when(a.sortTypes()).then(function(a){c=a})},reduce:function(b,d){return{title:d,legends:["Assassination Victory","Clock Victory","Scenario Victory","Tiebreakers Victory","Dice Down Draw","Tiebreakers Defeat","Scenario Defeat","Clock Defeat","Assassination Defeat"],colors:["#91E893","#4AE34D","#39B03C","#3E633F","#E2E345","#63312B","#B02817","#E3341D","#E87263"],values:_.chain(b).apply(a.sort,c,"date",!1).reductions(function(a,b){var c=_.clone(a);return c[b.score]++,c},{va:0,vc:0,vs:0,vt:0,dd:0,da:0,dc:0,ds:0,dt:0}).mapWith(function(a){return[a.va,a.vc,a.vs,a.vt,a.dd,a.dt,a.ds,a.dc,a.da]}).value()}}}}]).service("statEntryPoints",[function(){return{reduce:function(a,b){return{title:b,colors:["#4AE34D","#E3341D"],values:_.chain(a).reduce(function(a,b){return _.isNumber(_.getPath(b,"points.my_army.scenario"))&&_.isNumber(_.getPath(b,"points.opponent.scenario"))&&(a.Scenario[0]+=b.points.my_army.scenario,a.Scenario[1]+=b.points.opponent.scenario,a.Scenario[2]++),_.isNumber(_.getPath(b,"points.my_army.army"))&&_.isNumber(_.getPath(b,"points.opponent.army"))&&(a.Army[0]+=b.points.my_army.army,a.Army[1]+=b.points.opponent.army,a.Army[2]++),_.isNumber(_.getPath(b,"points.my_army.kill"))&&_.isNumber(_.getPath(b,"points.opponent.kill"))&&(a.Kill[0]+=b.points.my_army.kill,a.Kill[1]+=b.points.opponent.kill,a.Kill[2]++),a},{Scenario:[0,0,0],Army:[0,0,0],Kill:[0,0,0]}).reduce(function(a,b,c){return b[2]=0===b[2]?1:b[2],a[c]=[Math.round(b[0]/b[2]*100)/100,Math.round(b[1]/b[2]*100)/100],a},{}).value()}}}}]).service("statEntryTag",["tags",function(a){return{reduce:function(b,c){return{title:c,values:_.chain(b).apply(a.fromBattles).reduce(function(a,c){return a[s.capitalize(c)]=_.filter(b,function(a){return 0<=_.indexOf(a.tags,c)}).length,a},{}).value()}}}}]),angular.module("jlogApp.services").service("statSelectorTotal",[function(){return{sort:function(a){return{Total:a}}}}]).service("statSelectorFaction",["factions","$q",function(a,b){var c;return{init:function(){b.when(a.data()).then(function(a){c=a})},sort:function(b,d){return _.chain(b).groupBy(_.partial(_.getPath,_,d)).reduce(function(b,d,e){return b[a.nameFor(c,e)]=d,b},{}).value()}}}]).service("statSelectorCaster",["factions","$q",function(a,b){var c;return{init:function(){b.when(a.data()).then(function(a){c=a})},sort:function(b,d,e){return _.exists(d)?_.chain(b).filter(function(a){return _.getPath(a,e+".faction")===d}).groupBy(_.partial(_.getPath,_,e+".caster")).reduce(function(b,e,f){return b[a.casterNameFor(c,d,f)]=e,b},{}).value():[]}}}]).service("statSelectorSimple",[function(){return{sort:function(a,b){return _.chain(a).groupBy(b).reduce(function(a,b,c){return a[s.capitalize(c)]=b,a},{}).value()}}}]).service("statSelectorScenario",["scenarios","$q",function(a,b){var c;return{init:function(){b.when(a.data()).then(function(a){c=a})},sort:function(b){return _.chain(b).groupBy(_.partial(_.getPath,_,"setup.scenario")).reduce(function(b,d,e){return b[a.nameFor(c,e)]=d,b},{}).value()}}}]).service("statSelectorInit",[function(){return{sort:function(a){return _.chain(a).filter(function(a){return _.exists(_.getPath(a,"setup.initiative.won_roll"))&&_.exists(_.getPath(a,"setup.initiative.started"))}).groupBy(function(a){return("true"===_.getPath(a,"setup.initiative.won_roll")?"Won Roll":"Lost Roll")+", "+("true"===_.getPath(a,"setup.initiative.started")?"Started Game":"Chose Side")}).value()}}}]).service("statSelectorResult",["scores","$q",function(a,b){var c;return{init:function(){b.when(a.data()).then(function(a){c=a})},sort:function(b){return _.chain(b).groupBy(_.partial(_.getPath,_,"score")).reduce(function(b,d,e){var f=a.resultFor(c,e),g=a.typeFor(c,e);return _.exists(f)&&_.exists(g)&&(b[s.capitalize(a.resultFor(c,e))+" "+s.capitalize(a.typeFor(c,e))]=d),b},{}).value()}}}]).service("statSelectorTag",["tags",function(a){return{sort:function(b){a.fromBattles(b);return _.chain(b).apply(a.fromBattles).reduce(function(a,c){return a[s.capitalize(c)]=_.filter(b,function(a){return 0<=_.indexOf(a.tags,c)}),a},{}).value()}}}]),angular.module("jlogApp.services").service("tags",[function(){var a={fromBattles:function(a){return _.chain(a).mapWith(_.getPath,"tags").flatten().without(null,void 0).uniq().sort().value()},add:function(a,b){return _.chain(a).cat(b).without(null,void 0).uniq().sort().value()},drop:function(a,b){return _.without.apply(null,_.cat([a],b))}};return a}]),angular.module("jlogApp.directives").directive("appCacheProgressBar",function(){return{restrict:"E",templateUrl:"partials/directives/appCacheProgressBar.html",scope:!0,controller:["$scope","$window","prompt","appCache",function(a,b,c,d){d.subscribe("statusChange",function(d){a.appCache=d,"ready"===d.status&&c.prompt("confirm",["A new version of this site is available. Load it?","(You might want to save your battles first, if so click Cancel)"]).then(function(){b.location.reload()}),a.$digest()})}],link:function(a,b,c){}}}),angular.module("jlogApp.directives").controller("barsCtrl",["$scope",function(a){a.$watch("values",function(b){if(_.exists(b)){var c=Math.max.apply(null,_.values(b)),d=30/Math.max(1,_.keys(b).length-1);a.bars=_.chain(b).map(function(b,d){return{k:d,name:s.capitalize(d),width:a.width*b/c,value:b}}).sortBy(function(a){return-a.value}).map(function(b,c){return _.exists(_.getPath(a.hues,b.k))?b.color="hsl("+_.getPath(a.hues,b.k)[0]+", "+_.getPath(a.hues,b.k)[1]+"%, 52%)":b.color="hsl("+a.hue+", "+a.saturation+"%, "+(35+c*d)+"%)",b}).value()}})}]).directive("bars",[function(){return{restrict:"E",templateUrl:"partials/directives/bars.html",scope:{values:"=barsValues",hues:"=barsHues"},controller:"barsCtrl",link:function(a,b,c){a.width=.7*(b[0].querySelector("table").offsetWidth>>0),a.height=50,a.hue="200",c.$observe("barsHue",function(b){a.hue=_.exists(b)?b:"200"}),a.saturation="75",c.$observe("barsSaturation",function(b){a.saturation=_.exists(b)?b:"75"})}}}]),angular.module("jlogApp.directives").directive("openDropdown",[function(){return{restrict:"A",link:function(a,b,c){var d=b[0].parentElement,e=d.querySelector(".drop-mask");b[0].addEventListener("click",function(){d.classList.toggle("open")}),e.addEventListener("click",function(){d.classList.remove("open")})}}}]),angular.module("jlogApp.directives").directive("eaFile",function(){return{restrict:"A",scope:{eaFile:"&"},controller:["$scope",function(a){}],link:function(a,b,c){b[0].onchange=function(){a.eaFile({file:b[0].files[0]})}}}}),angular.module("jlogApp.directives").directive("onlineIndicator",function(){return{restrict:"A",templateUrl:"partials/directives/onlineIndicator.html",scope:!0,controller:["$scope","$window","appCache",function(a,b,c){c.subscribe("statusChange",function(b){a.appCache=b,a.$digest()}),a.checkOnlineStatus=function(){c.update()}}],link:function(a,b,c){}}}),angular.module("jlogApp.directives").controller("pieChartCtrl",["$scope",function(a){a.$watch("values",function(b){if(a.center={x:a.width/2,y:a.height/2},a.radius=Math.min(a.width,a.height)/2*.95,_.exists(b)){a.legends=_.chain(b.legends).map(function(a,c){return{label:a,count:"#"+b.values[c],color:b.colors[c]}}).filter(function(a,c){return b.values[c]>0}).value(),a.total=_.reduce(b.values,function(a,b){return a+b},0);var c=0;a.paths=_.chain(b.values).map(function(d,e){var f=2*Math.PI*c/a.total,g=2*Math.PI*(c+d)/a.total,h=Math.min(2*Math.PI*.999,Math.abs(g-f));g=f+h;var i=h>Math.PI?1:0;return c+=d,{large:i,start:{x:a.center.x+a.radius*Math.sin(f),y:a.center.y-a.radius*Math.cos(f)},end:{x:a.center.x+a.radius*Math.sin(g),y:a.center.y-a.radius*Math.cos(g)},color:b.colors[e]}}).filter(function(a,c){return b.values[c]>0}).value()}})}]).directive("pieChart",[function(){return{restrict:"E",templateUrl:"partials/directives/pieChart.html",scope:{values:"=pieValues"},controller:"pieChartCtrl",link:function(a,b,c){a.width=b[0].querySelector(".pie-container").offsetWidth>>0,a.height=a.width}}}]),angular.module("jlogApp.directives").factory("prompt",["$q",function(a){function b(){if(_.exists(c))return c;var b=a.defer();return e.push(b),b.promise}var c,d,e=[];return{register:function(a){c=a,c.active=!1,c.message=null,c.type="alert",c.input=null,c.doValidate=function(){c.close(),d.resolve(c.input),d=null},c.doCancel=function(){c.close(),d.reject(),d=null},_.each(e,function(a){a.resolve(c)}),e=[]},prompt:function(c,e){return d=a.defer(),a.when(b()).then(function(a){a.type=c,a.message=_.isString(e)?[e]:e,a.input=null,a.open()}),d.promise}}}]).controller("promptCtrl",["$scope","prompt",function(a,b){b.register(a)}]).directive("prompt",["$timeout",function(a){return{restrict:"E",templateUrl:"partials/directives/prompt.html",scope:!0,controller:"promptCtrl",link:function(b,c,d){var e=c[0].querySelector("input");b.open=function(){b.active=!0,a(function(){e.focus()},200)},b.close=function(){b.active=!1}}}}]),angular.module("jlogApp.directives").controller("stacksCtrl",["$scope",function(a){a.$watch("values",function(b){if(_.exists(b)){var c=_.reduce(b.values,function(a,b,c){return a[c]=_.reduce(b,function(a,b){return a+b},0),a},{});a.stacks=_.map(b.values,function(d,e){var f=0;return{name:e,layers:_.map(d,function(g,h){var i=0<c[e]?a.width*g/c[e]:a.width/d.length,j={x:f,width:i,color:b.colors[h],value:g};return f+=i,j})}})}})}]).directive("stacks",[function(){return{restrict:"E",templateUrl:"partials/directives/stacks.html",scope:{values:"=stacksValues"},controller:"stacksCtrl",link:function(a,b,c){a.width=.7*(b[0].querySelector("table").offsetWidth>>0),a.height=50}}}]),angular.module("jlogApp.directives").controller("stackGraphsCtrl",["$scope",function(a){a.$watch("values",function(b){if(_.exists(b)){1===b.values.length&&(b.values[1]=b.values[0]);var c=a.width/(b.values.length-1);a.legends=_.chain(b.legends).map(function(a,c){return{label:a,color:b.colors[c]}}).value(),a.polygons=_.chain(b.values).map(function(a){return _.reductions(a,function(a,b){return a+b},0)}).apply(function(d){var e=d[0].length;return _.chain(e).range().map(function(a){return _.map(d,function(b){return[_.nth(b,a),_.last(b)]})}).map(function(b){return _.map(b,function(b,d){return[d*c,a.height*(1-b[0]/b[1])]})}).map(function(c,d){return{color:b.colors[d],points:"0,"+a.height+" "+c.join(" ")+" "+a.width+","+a.height}}).value()}).reverse().value()}})}]).directive("stackGraphs",[function(){return{restrict:"E",templateUrl:"partials/directives/stackGraphs.html",scope:{values:"=gphValues"},controller:"stackGraphsCtrl",link:function(a,b,c){a.width=b[0].querySelector(".gph-container").offsetWidth>>0,a.height=a.width/2}}}]),angular.module("jlogApp.directives").directive("topMenu",[function(){return{restrict:"A",link:function(a,b,c){var d=document.querySelector("body"),e=b[0].querySelector("button"),f=b[0].querySelector(".top-menu-mask");e.addEventListener("click",function(){d.classList.add("top-menu-opened")}),f.addEventListener("click",function(){d.classList.remove("top-menu-opened")})}}}]),angular.module("jlogApp.filters").filter("capitalise",[function(){return function(a){return"string"==typeof a?a.charAt(0).toUpperCase()+a.slice(1):a}}]),angular.module("jlogApp.filters").filter("battle",["battle",function(a){return function(b,c){var d=_.rest(_.rest(arguments));return a[c].apply(null,_.cons(b,d))}}]).filter("factions",["factions",function(a){return function(b,c){var d=_.rest(_.rest(arguments));return a[c].apply(null,_.cons(b,d))}}]).filter("scenarios",["scenarios",function(a){return function(b,c){var d=_.rest(_.rest(arguments));return a[c].apply(null,_.cons(b,d))}}]).filter("scores",["scores",function(a){return function(b,c){var d=_.rest(_.rest(arguments));return a[c].apply(null,_.cons(b,d))}}]);
//# sourceMappingURL=app.min.js.map
angular.module('jlogApp.services').run(['$templateCache', function($templateCache) {
  'use strict';

  $templateCache.put('partials/backup.html',
    "<div class=container id=backup><ul class=\"nav nav-tabs\" ng-init=\"panel='file'\"><li ng-class=\"{ 'active': panel==='file' }\"><a ng-click=\"panel='file'\">File</a></li><li ng-class=\"{ 'active': panel==='online' }\"><a ng-click=\"panel='online'\">Online</a></li><li ng-class=\"{ 'active': panel==='ig' }\"><a ng-click=\"panel='ig'\">IronGrudge</a></li><li ng-class=\"{ 'active': panel==='debug' }\"><a ng-click=\"panel='debug'\">Debug</a></li></ul><div ng-show=\"panel==='file'\" ng-include=\"'partials/backup/file.html'\"></div><div ng-show=\"panel==='online'\" ng-include=\"'partials/backup/online.html'\"></div><div ng-show=\"panel==='ig'\" ng-include=\"'partials/backup/ig.html'\"></div><div ng-show=\"panel==='debug'\" ng-include=\"'partials/backup/debug.html'\"></div></div>"
  );


  $templateCache.put('partials/backup/debug.html',
    "<div><div class=\"panel panel-info\"><div class=panel-heading><h4 class=panel-title>Debug</h4></div><div class=panel-body><button class=\"btn btn-default\" ng-click=doClearStorage()>Clear Local Storage</button><p>This will clear all data stored in memory. You can then reload the data from a backup file to restart in a clean state.</p><button class=\"btn btn-default\" ng-click=doClearSync()>Clear Sync Info</button><p>This will clear online synchronization tags. You can then retry synchronization from scratch.</p></div></div></div>"
  );


  $templateCache.put('partials/backup/file.html',
    "<div><div class=\"panel panel-info\"><div class=panel-heading><h4 class=panel-title>Save to file</h4></div><div class=panel-body><form><div class=form-group><a class=\"btn btn-default\" ng-show=backup.url ng-href={{backup.url}} download={{backup.name}}><div class=\"icon-sprite icon-save\"></div>Save backup file</a></div></form></div></div><div class=\"panel panel-info\"><div class=panel-heading><h4 class=panel-title>Load from File</h4></div><div class=panel-body><form><div class=form-group><label>Choose a JLog json backup file :</label><input class=form-control id=import-file type=file ea-file=\"doReadFile('json', file)\"></div><div class=form-group><div class=text-warning ng-repeat=\"e in read_result.json\">{{::e}}</div></div><button class=\"btn btn-default\" type=button ng-click=\"doReadText('json', read_text)\"><div class=\"icon-sprite icon-file\"></div>Read JSON</button></form></div></div></div>"
  );


  $templateCache.put('partials/backup/ig.html',
    "<div><div class=\"panel panel-info\"><div class=panel-heading><h4 class=panel-title>Import IronGrudge</h4></div><div class=panel-body><form ng-submit=\"doReadText('ig', import_text)\"><div class=form-group><label>Choose an IronGrudge CSV file :</label><input class=form-control id=import-ig-file type=file ea-file=\"doReadFile('ig', file)\"></div><div class=text-warning ng-repeat=\"e in read_result.ig\">{{::e}}</div></form><p>Iron Grudge CSV files are generated by exporting the SQLite backup file from IrongGrudge.</p><p>You can use the SQLite Manager firefox plugin to perform this operation. The SQL query you need to use in order to generate the correct CSV file is :</p><a ng-hide=_show_sql ng-click=\"_show_sql=true\">Click to show SQL query...</a> <code ng-show=_show_sql>SELECT battle.date, my_faction.name, my_caster.shortname, player.name, opp_faction.name, opp_caster.shortname, battle.result, battle.controlPoints, battle.armyPoints, battle.killPoints, battle.opponentControlPoints, battle.opponentArmyPoints, battle.opponentKillPoints, scenario.name, battle.points, event.name, battle.initiative, battle.comment FROM battle LEFT JOIN army my_army ON battle.armyId=my_army._id LEFT JOIN faction my_faction ON my_army.factionId=my_faction._id LEFT JOIN caster my_caster ON my_army.casterId=my_caster._id LEFT JOIN player ON battle.opponentId=player._id LEFT JOIN army opp_army ON battle.opponentArmyId=opp_army._id LEFT JOIN faction opp_faction ON opp_army.factionId=opp_faction._id LEFT JOIN caster opp_caster ON opp_army.casterId=opp_caster._id LEFT JOIN scenario ON battle.scenarioId=scenario._id LEFT JOIN event ON battle.eventId=event._id;</code></div></div></div>"
  );


  $templateCache.put('partials/backup/online.html',
    "<div><div ng-hide=parse.user.sessionToken class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Log In</h5></div><div class=panel-body><form ng-submit=doLogIn()><div class=form-group><label for=username>Name</label><input class=form-control placeholder=name ng-model=login.username required></div><div class=form-group><label for=username>Password</label><input type=password class=form-control ng-model=login.password required></div><button type=submit class=\"btn btn-primary\">Log In</button></form><p class=text-danger>{{login.error}}</p></div></div><div ng-hide=parse.user.sessionToken class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Sign up</h5></div><div class=panel-body><form ng-submit=doSignUp()><div class=form-group><label for=username>Name</label><input class=form-control placeholder=name ng-model=signup.username required></div><div class=form-group><label for=username>Password</label><input type=password class=form-control ng-model=signup.password required></div><div class=form-group><label for=username>EMail</label><input type=email class=form-control ng-model=signup.email required></div><p>Online backup is free. In return you agree that your log data may be used for public statistics in the future.</p><button type=submit class=\"btn btn-primary\">Sign Up</button></form><p class=text-danger>{{signup.error}}</p></div></div><div ng-show=parse.user.sessionToken class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Log Out</h5></div><div class=panel-body><p><strong>Name :</strong>{{parse.user.username}}</p><p><strong>EMail :</strong>{{parse.user.email}}</p><form ng-submit=doLogOut()><button type=submit class=\"btn btn-primary\">Log Out</button></form><p class=text-danger>{{logout.error}}</p></div></div><div class=\"panel panel-info\"><div class=panel-heading><h4 class=panel-title>Sync / Upload</h4></div><div class=panel-body><button class=\"btn btn-default\" type=button ng-click=doUploadData()>Upload current data to server <span class=\"icon-sprite icon-upload\"></span></button><p class=result><strong class=\"text-{{upload.id === null ? 'warning' : 'success'}}\">{{upload.msg | capitalise }}</strong></p><p ng-hide=upload.id>You can temporarily upload your current data to the web server. This will generate an Id that you can use in the Sync / Download section on another device to synchronize your data. The generated Id and the uploaded data are not permanent and will be cleared after a given period of time.</p><p ng-show=upload.id><strong>Sync Id :</strong> {{upload.id}}<br>Use this Sync ID on your other device, in the download input below.</p></div></div><div class=\"panel panel-info\"><div class=panel-heading><h4 class=panel-title>Sync / Download</h4></div><div class=panel-body><p>Enter below the Sync ID given to you after uploading from another device.</p><form name=upload ng-submit=doDownloadData()><div class=input-group><input class=form-control ng-model=download.id placeholder=\"Sync Id...\"> <span class=input-group-btn><button style=min-width:30px class=\"btn btn-default\" type=submit><span class=\"icon-sprite icon-download\"></span></button></span></div></form><p class=result><strong class=text-warning>{{download.msg | capitalise}}</strong></p></div></div></div>"
  );


  $templateCache.put('partials/battle_edit.html',
    "<div class=container id=battle-edit><form class=form-horizontal name=battle_edit novalidate><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>My army :</h5></div><div class=\"panel-body row\"><div class=col-xs-2><div class=\"faction-sprite faction-{{battle.my_army.faction}}\"></div></div><div class=col-xs-10><div ng-class=\"{ 'has-error':battle_edit.my_army_faction.$invalid }\"><select class=form-control name=my_army_faction ng-model=battle.my_army.faction ng-options=\"f.key as f.name for f in factions\" required><option value=\"\" ng-if=!battle.my_army.faction>Please select</option></select></div><div ng-class=\"{ 'has-error':battle_edit.my_army_caster.$invalid }\"><select class=form-control name=my_army_caster ng-model=battle.my_army.caster ng-options=\"c.key as c.key | capitalise\n" +
    "                                for c in factions | factions:'castersFor':battle.my_army.faction\" required><option value=\"\" ng-if=!battle.my_army.caster>Please select</option></select></div></div></div></div><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Opponent :</h5></div><div class=\"panel-body row\"><div class=col-xs-12><div class=input-group><span class=input-group-btn><button class=\"btn btn-default\" ng-click=\"doAdd('opponent')\"><div class=\"icon-sprite icon-add\"></div></button></span><div ng-class=\"{ 'has-error':battle_edit.opponent_name.$invalid }\"><select class=form-control name=opponent_name ng-model=battle.opponent.name ng-options=\"o as o|capitalise for o in battles.opponents\" required><option value=\"\" ng-if=!battle.opponent.name>Please select</option></select></div><span class=input-group-btn><button class=\"btn btn-default\" ng-click=\"doDelete('opponent')\"><div class=\"icon-sprite icon-remove\"></div></button></span></div></div><div class=col-xs-2><div class=\"faction-sprite faction-{{battle.opponent.faction}}\"></div></div><div class=col-xs-10><div ng-class=\"{ 'has-error':battle_edit.opponent_faction.$invalid }\"><select class=form-control name=opponent_faction ng-model=battle.opponent.faction ng-options=\"f.key as f.name for f in factions\" required><option value=\"\" ng-if=!battle.opponent.faction>Please select</option></select></div><div ng-class=\"{ 'has-error':battle_edit.opponent_caster.$invalid }\"><select class=form-control name=opponent_caster ng-model=battle.opponent.caster ng-options=\"c.key as c.key|capitalise\n" +
    "                                for c in factions | factions:'castersFor':battle.opponent.faction\" required><option value=\"\" ng-if=!battle.opponent.caster>Please select</option></select></div></div></div></div><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Settings :</h5></div><div class=\"panel-body row\"><div class=\"col-xs-2 control-label\">Date</div><div class=col-xs-10><input class=form-control style=display:inline-block;width:40%;max-width:6em type=number ng-model=battle.date.year min=1999 max=2050 required> <input class=form-control style=display:inline-block;max-width:25%;max-width:6em type=number ng-model=battle.date.month min=1 max=12 required> <input class=form-control style=display:inline-block;max-width:25%;max-width:6em type=number ng-model=battle.date.day min=1 max=31 required></div><div class=\"col-xs-2 control-label\">Event</div><div class=col-xs-10><div class=input-group><span class=input-group-btn><button class=\"btn btn-default\" ng-click=\"doAdd('event')\"><div class=\"icon-sprite icon-add\"></div></button></span><select class=form-control ng-model=battle.setup.event ng-options=\"e for e in battles.events\"><option value=\"\" ng-if=!battle.setup.event>Please select</option></select><span class=input-group-btn><button class=\"btn btn-default\" ng-click=\"doDelete('event')\"><div class=\"icon-sprite icon-remove\"></div></button></span></div></div><div class=\"col-xs-2 control-label\">Scenario</div><div class=col-xs-10><div class=input-group><span class=input-group-btn><button class=\"btn btn-default\" ng-click=\"doAdd('scenario')\"><div class=\"icon-sprite icon-add\"></div></button></span><select class=form-control ng-model=battle.setup.scenario ng-options=\"s.key as s.name\n" +
    "                                for s in battles.scenarios\n" +
    "                                \"><option value=\"\" ng-if=!battle.setup.scenario>Please select</option></select><span class=input-group-btn><button class=\"btn btn-default\" ng-click=\"doDelete('scenario')\"><div class=\"icon-sprite icon-remove\"></div></button></span></div></div><div class=\"col-xs-2 control-label\">Size</div><div class=col-xs-10><input class=form-control style=display:inline-block;width:40%;max-width:6em type=number ng-model=\"battle.setup.size\"></div><div class=\"col-xs-2 control-label\">Initiative</div><div class=col-xs-5><select class=form-control ng-model=battle.setup.initiative.won_roll><option selected value=true>Won roll</option><option selected value=false>Lost roll</option></select></div><div class=col-xs-5><select class=form-control ng-model=battle.setup.initiative.started><option selected value=true>started game</option><option selected value=false>chose side</option></select></div></div></div><div class=\"panel panel-info\"><div class=panel-heading><div class=row><h5 class=\"col-xs-6 panel-title\">Game Result :</h5></div></div><div class=\"panel-body row\"><div class=col-xs-6 ng-class=\"{ 'has-error':battle_edit.result.$invalid }\"><select class=form-control name=result ng-model=battle.score ng-options=\"id as s.type|capitalise\n" +
    "                              group by s.result|capitalise\n" +
    "                              for (id, s) in scores\n" +
    "                              \" required><option value=\"\" ng-if=!battle.score>Please select</option></select></div><div class=\"col-xs-6 control-label\"><strong class=\"text-{{scores | scores:'classFor':battle.score}}\">{{ scores | scores:'resultFor':battle.score | capitalise }}</strong></div><div class=clearfix></div><div class=\"col-xs-2 control-label\"></div><div class=\"col-xs-5 control-label\">My Army</div><div class=\"col-xs-5 control-label\">Opponent</div><div class=\"col-xs-2 control-label\">Control</div><div class=col-xs-5><input class=form-control type=number ng-model=\"battle.points.my_army.scenario\"></div><div class=col-xs-5><input class=form-control type=number ng-model=\"battle.points.opponent.scenario\"></div><div class=\"col-xs-2 control-label\">Army</div><div class=col-xs-5><input class=form-control type=number ng-model=\"battle.points.my_army.army\"></div><div class=col-xs-5><input class=form-control type=number ng-model=\"battle.points.opponent.army\"></div><div class=\"col-xs-2 control-label\">Kill</div><div class=col-xs-5><input class=form-control type=number ng-model=\"battle.points.my_army.kill\"></div><div class=col-xs-5><input class=form-control type=number ng-model=\"battle.points.opponent.kill\"></div></div></div><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Tags :</h5></div><div class=panel-body><div class=input-group><span class=input-group-btn><button class=\"btn btn-default\" ng-click=doAddTag()><div class=\"icon-sprite icon-add\"></div></button></span><select class=\"form-control multiple\" ng-model=battle.tags ng-options=\"t for t in battles.tags\" multiple></select><span class=input-group-btn><button class=\"btn btn-default\" ng-click=doDeleteTag()><div class=\"icon-sprite icon-remove\"></div></button></span></div></div></div><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Comment :</h5></div><div class=panel-body><textarea class=form-control ng-model=battle.comment></textarea></div></div></form></div>"
  );


  $templateCache.put('partials/battle_edit_menu.html',
    "<div><button class=\"btn btn-default\" ng-disabled=!state.save_enable ng-click=doSave()><div class=\"icon-sprite icon-save\"></div><span class=lbl>Save</span></button> <button class=\"btn btn-default\" ng-click=doClose()><div class=\"icon-sprite icon-close\"></div><span class=lbl>Cancel</span></button></div>"
  );


  $templateCache.put('partials/battle_list.html',
    "<div class=container ng-controller=listCtrl><div id=battle-list class=table><div class=\"row text-center table-header\"><div class=\"hidden-xs col-sm-3\" sort-by=date>Date</div><div class=\"col-xs-4 col-sm-4\" sort-by=my_caster>My Caster</div><div class=\"col-xs-3 col-sm-3\" sort-by=opponent>Opponent</div><div class=\"col-xs-4 col-sm-4\" sort-by=opp_caster>Caster</div><div class=\"hidden-xs col-sm-1\" sort-by=size>Size</div><div class=\"hidden-xs col-sm-4\" sort-by=scenario>Scenario</div><div class=\"hidden-xs col-sm-2\" sort-by=event>Event</div><div class=\"col-xs-1 col-sm-1\" sort-by=result>R</div></div><div class=table-body><div class=\"row text-left clickable table-row\" ng-repeat=\"\n" +
    "           (bi,battle)\n" +
    "           in battles.display_list\n" +
    "           track by battle.hash\n" +
    "           \" ng-click=doViewBattle(battle.index)><div class=\"hidden-xs col-sm-3\"><span>{{::battle.date.year+'-'+battle.date.month+'-'+battle.date.day}}</span></div><div class=\"col-xs-4 col-sm-4\"><div class=\"faction-sprite faction-{{battle.my_army.faction}} small\"></div><span>{{::battle.my_army.caster | capitalise}}</span></div><div class=\"col-xs-3 col-sm-3\"><span>{{::battle.opponent.name | capitalise}}</span></div><div class=\"col-xs-4 col-sm-4\"><div class=\"faction-sprite faction-{{battle.opponent.faction}} small\"></div><span>{{::battle.opponent.caster | capitalise}}</span></div><div class=\"hidden-xs col-sm-1\"><span>{{::battle.setup.size}}</span></div><div class=\"hidden-xs col-sm-4\"><span>{{::battles.scenarios | scenarios:'nameFor':battle.setup.scenario}}</span></div><div class=\"hidden-xs col-sm-2\"><span>{{::battle.setup.event}}</span></div><div class=\"col-xs-1 col-sm-1\"><strong class=\"score-result text-{{::scores | scores:'classFor':battle.score}}\">{{::scores | scores:'letterFor':battle.score}}</strong></div></div></div></div></div>"
  );


  $templateCache.put('partials/battle_list_menu.html',
    "<div class=btn-group><button class=\"btn btn-default\" ng-click=doAddBattle()><span class=\"icon-sprite icon-add\"></span> <span class=lbl>Add Battle</span></button><div class=\"drop btn-group\"><button class=btn ng-class=\"{\n" +
    "                      'btn-default': !battles.filter.active,\n" +
    "                      'btn-success': battles.filter.active && !battles.filter.invert,\n" +
    "                      'btn-primary': battles.filter.active && battles.filter.invert\n" +
    "                      }\" open-dropdown><div class=\"icon-sprite icon-filter\"></div><span class=lbl>Filter</span></button><div class=drop-mask><ul class=drop-menu><li class=dropdown-header>Filter</li><li><a href=#/filter><div class=\"icon-sprite icon-edit\"></div>Edit</a></li><li ng-show=\"battles.filter.active &&\n" +
    "                     !battles.filter.invert\n" +
    "                     \"><a ng-click=doToggleFilterInvert()><div class=\"icon-sprite icon-invert\"></div>Invert</a></li><li ng-show=\"battles.filter.active &&\n" +
    "                     battles.filter.invert\n" +
    "                     \"><a ng-click=doToggleFilterInvert()><div class=\"icon-sprite icon-invert\"></div>Restore</a></li><li ng-hide=battles.filter.active><a ng-click=doToggleFilterActive()><div class=\"icon-sprite icon-enable\"></div>Enable</a></li><li ng-show=battles.filter.active><a ng-click=doToggleFilterActive()><div class=\"icon-sprite icon-disable\"></div>Disable</a></li></ul></div></div><div class=\"drop btn-group\"><button class=\"btn btn-default\" open-dropdown><div class=\"icon-sprite icon-sort\"></div><span class=lbl>Sort By</span></button><div class=drop-mask><ul class=drop-menu><li class=dropdown-header>Sort By</li><li ng-repeat=\"(key, type) in sort_types\"><a ng-click=doSortBy(key)><div class=icon-sprite ng-class=\"{\n" +
    "                           'icon-down': (battles.sort.type === key) && !battles.sort.reverse,\n" +
    "                           'icon-up': (battles.sort.type === key) && battles.sort.reverse\n" +
    "                           }\"></div>{{type.name}}</a></li></ul></div></div><div class=\"drop btn-group\"><button class=\"btn btn-default\" ng-click=doExportOpen() open-dropdown=drop-list-export><div class=\"icon-sprite icon-save\"></div><span class=lbl>Export</span></button><div class=drop-mask><ul class=drop-menu><li class=dropdown-header>Export to</li><li ng-repeat=\"(k,v) in exports\"><a ng-href={{::v.url}} download={{::v.name}}>{{::v.label}}</a></li></ul></div></div></div>"
  );


  $templateCache.put('partials/battle_view.html',
    "<div class=container id=battle-view><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>My army</h5></div><div class=\"panel-body row\"><div class=col-xs-2><div class=\"faction-sprite faction-{{battle.my_army.faction}}\"></div></div><div class=\"col-xs-10 row\"><div class=col-xs-3><em>Faction:</em></div><div class=col-xs-9>{{::factions | factions:'nameFor':battle.my_army.faction}}</div><div class=clearfix></div><div class=col-xs-3><em>Caster:</em></div><div class=col-xs-9>{{::factions | factions:'casterNameFor':battle.my_army.faction:battle.my_army.caster}}</div></div></div></div><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Opponent</h5></div><div class=\"panel-body row\"><div class=col-xs-2><div class=\"faction-sprite faction-{{battle.opponent.faction}}\"></div></div><div class=\"col-xs-10 row\"><div class=col-xs-3><em>Name:</em></div><div class=col-xs-9>{{::battle.opponent.name | capitalise}}</div><div class=clearfix></div><div class=col-xs-3><em>Faction:</em></div><div class=col-xs-9>{{::factions | factions:'nameFor':battle.opponent.faction}}</div><div class=clearfix></div><div class=col-xs-3><em>Caster:</em></div><div class=col-xs-9>{{::factions | factions:'casterNameFor':battle.opponent.faction:battle.opponent.caster}}</div></div></div></div><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Settings</h5></div><div class=\"panel-body row\"><div class=col-xs-3><em>Date:</em></div><div class=col-xs-9>{{battle.date.year+'/'+battle.date.month+'/'+battle.date.day}}</div><div class=clearfix></div><div class=col-xs-3><em>Event:</em></div><div class=col-xs-9>{{::battle.setup.event}}</div><div class=clearfix></div><div class=col-xs-3><em>Scenario:</em></div><div class=col-xs-9>{{::battles.scenarios | scenarios:'nameFor':battle.setup.scenario}}</div><div class=clearfix></div><div class=col-xs-3><em>Size:</em></div><div class=col-xs-9>{{::battle.setup.size}}</div><div class=clearfix></div><div class=col-xs-3><em>Initiative:</em></div><div class=col-xs-9>{{:: battle | battle:'initRollDescFor'}} - {{:: battle | battle:'initStartDescFor'}}</div></div></div><div class=\"panel panel-info\"><div class=panel-heading><div class=row><div class=col-xs-5><h5 class=panel-title>Game Result</h5></div><div class=col-xs-7><strong class=\"text-{{::scores | scores:'classFor':battle.score}}\">{{::scores | scores:'typeFor':battle.score | capitalise}} {{::scores | scores:'resultFor':battle.score | capitalise}}</strong></div></div></div><div class=\"panel-body row\"><div class=col-xs-2></div><div class=col-xs-5><em>My Army</em></div><div class=col-xs-5><em>Opponent</em></div><div class=clearfix></div><div class=col-xs-2><em>Control</em></div><div class=col-xs-5>{{::battle.points.my_army.scenario}}</div><div class=col-xs-5>{{::battle.points.opponent.scenario}}</div><div class=clearfix></div><div class=col-xs-2><em>Army</em></div><div class=col-xs-5>{{::battle.points.my_army.army}}</div><div class=col-xs-5>{{::battle.points.opponent.army}}</div><div class=clearfix></div><div class=col-xs-2><em>Kill</em></div><div class=col-xs-5>{{::battle.points.my_army.kill}}</div><div class=col-xs-5>{{::battle.points.opponent.kill}}</div></div></div><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Tags</h5></div><div class=panel-body><ul><li ng-repeat=\"t in ::battle.tags\">{{::t}}</li></ul></div></div><div class=\"panel panel-info\"><div class=panel-heading><h5 class=panel-title>Comment</h5></div><div class=panel-body>{{::battle.comment}}</div></div></div>"
  );


  $templateCache.put('partials/battle_view_menu.html',
    "<div><button class=\"btn btn-default\" ng-click=doEditBattle()><div class=\"icon-sprite icon-edit\"></div><span class=lbl>Edit</span></button> <button class=\"btn btn-default\" ng-click=doDeleteBattle()><div class=\"icon-sprite icon-delete\"></div><span class=lbl>Delete</span></button> <button class=\"btn btn-default\" ng-click=doClose()><div class=\"icon-sprite icon-close\"></div><span class=lbl>Close</span></button></div>"
  );


  $templateCache.put('partials/directives/appCacheProgressBar.html',
    "<div class=appcache-progress ng-show=\"appCache.progress != 0\"><div class=appcache-progress-bar ng-style=\"{ 'width': appCache.progress + '%' }\"></div></div>"
  );


  $templateCache.put('partials/directives/bars.html',
    "<table class=col-xs-12 style=width:100%><tr ng-repeat=\"b in ::bars\" style=\"vertical-align:middle;\n" +
    "      padding:0;\n" +
    "      margin:0\"><td class=text-right style=\"padding:0 10px 0 0;\n" +
    "        margin:0\">{{::b.name}}</td><td style=\"padding:0;\n" +
    "        margin:0;\n" +
    "        width:{{::width+40}}px\"><svg ng-attr-width={{::width+40}}px height=25px><rect x=0 y=0 ng-attr-width={{::b.width}} height=25 style=\"fill:{{::b.color}};\n" +
    "              stroke:#000;\n" +
    "              stroke-width:0.5\"><text ng-attr-x={{::b.width+5}} y=20>{{::b.value}}</text></svg></td></tr></table>"
  );


  $templateCache.put('partials/directives/onlineIndicator.html',
    "<li><a ng-click=checkOnlineStatus()>{{appCache.online}}</a></li>"
  );


  $templateCache.put('partials/directives/pieChart.html',
    "<div><div class=\"col-xs-6 text-right pie-legend\"><ul><li ng-repeat=\"(i,l) in ::legends\">{{::l.label}} {{::l.count}} <svg width=10px height=10px><rect x=0 y=0 width=10 height=10 style=\"stroke-width:1;\n" +
    "                stroke:#000;\n" +
    "                fill: {{::l.color}}\"></svg></li><li><b>Total #{{::total}}</b> <svg width=10px height=10px><rect x=0 y=0 width=10 height=10 style=\"fill: white\"></svg></li></ul></div><div class=\"col-xs-6 pie-container\"><svg ng-attr-width={{::width}} ng-attr-height={{::height}}><path ng-repeat=\"(i,p) in ::paths\" d=\"\n" +
    "            M{{::center.x}},{{::center.y}}\n" +
    "            L{{::p.start.x}},{{::p.start.y}}\n" +
    "            A{{::radius}},{{::radius}} 0 {{::p.large}},1 {{::p.end.x}},{{::p.end.y}}\n" +
    "            L{{::center.x}},{{::center.y}}\n" +
    "            \" style=\"stroke:#000;\n" +
    "            stroke-width:0.5;\n" +
    "            fill: {{::p.color}}\"></svg></div></div>"
  );


  $templateCache.put('partials/directives/prompt.html',
    "<div ng-show=active><div class=prompt-mask></div><div class=\"prompt-container text-center\"><div class=\"prompt-panel panel panel-default\"><form name=prompt ng-submit=doValidate()><div class=panel-body><p ng-repeat=\"m in message\">{{::m}}</p><input class=form-control ng-model=input ng-show=\"type==='prompt'\"></div><div class=panel-footer><button class=\"btn btn-default\" type=button style=width:45% ng-hide=\"type==='alert'\" ng-click=doCancel()>Cancel</button> <button class=\"btn btn-primary\" type=submit style=width:45%>Ok</button></div></form></div></div></div>"
  );


  $templateCache.put('partials/directives/stackGraphs.html',
    "<div><div class=gph-legend><div style=\"display:inline-block;margin:0 5px\" ng-repeat=\"(i,l) in ::legends\">{{::l.label}} <svg width=10px height=10px><rect x=0 y=0 width=10 height=10 style=\"stroke-width:1;\n" +
    "              stroke:#000;\n" +
    "              fill: {{::l.color}}\"></svg></div></div><div class=gph-container><svg ng-attr-width={{::width}} ng-attr-height={{::height}}><polygon ng-repeat=\"(i,p) in ::polygons\" points={{::p.points}} style=\"stroke:#000;\n" +
    "               stroke-width:0.5;\n" +
    "               fill: {{::p.color}}\"></svg></div></div>"
  );


  $templateCache.put('partials/directives/stacks.html',
    "<table class=col-xs-12 style=width:100%><tr ng-repeat=\"s in ::stacks\" style=\"vertical-align:middle;\n" +
    "      padding:0;\n" +
    "      margin:0\"><td class=text-right style=\"padding:0 10px 0 0;\n" +
    "        margin:0\">{{::s.name}}</td><td style=\"padding:0;\n" +
    "        margin:0;\n" +
    "        width:{{::width+40}}px\"><svg ng-attr-width={{::width+40}}px height=25px><rect ng-repeat=\"l in ::s.layers\" ng-attr-x={{::l.x}} y=0 ng-attr-width={{::l.width}} height=25 style=\"fill:{{::l.color}};\n" +
    "              stroke:#000;\n" +
    "              stroke-width:0.5\"><text ng-repeat=\"l in ::s.layers\" ng-attr-x={{::l.x+5}} y=20>{{::l.value}}</text></svg></td></tr></table>"
  );


  $templateCache.put('partials/filter.html',
    "<div class=container id=filter-edit><form class=form-horizontal name=filter_edit novalidate><div class=title><div class=\"icon-sprite icon-edit\"></div>Edit Filter</div><div class=\"panel panel-default first\"><div class=panel-heading ng-click=\"battles.filter.state.date.active=!battles.filter.state.date.active\" ng-class=\"{ 'active': battles.filter.state.date.active }\"><div class=icon-sprite ng-class=\"{ 'icon-checked':battles.filter.state.date.active,\n" +
    "                       'icon-unchecked':!battles.filter.state.date.active\n" +
    "                       }\"></div><h5 class=panel-title>Date</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.date.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.date.is><option value=\"==\">==</option><option value=\"!=\">!=</option><option value=&gt;>&gt;</option><option value=\"&gt;=\">&gt;=</option><option value=\"<\">&lt;</option><option value=\"<=\">&lt;=</option></select></div><div class=col-xs-9><input type=number class=form-control style=display:inline-block;width:40%;max-width:6em ng-model=\"battles.filter.state.date.value.year\"> <input type=number class=form-control style=display:inline-block;width:40%;max-width:6em ng-model=\"battles.filter.state.date.value.month\"> <input type=number class=form-control style=display:inline-block;width:40%;max-width:6em ng-model=\"battles.filter.state.date.value.day\"></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.my_army.active=!battles.filter.state.my_army.active\" ng-class=\"{\n" +
    "                     'active': battles.filter.state.my_army.active\n" +
    "                     }\"><div class=icon-sprite ng-class=\"{ 'icon-checked':battles.filter.state.my_army.active,\n" +
    "                        'icon-unchecked':!battles.filter.state.my_army.active\n" +
    "                        }\"></div><h5 class=panel-title>My caster</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.my_army.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.my_army.is><option value=true selected>is</option><option value=false>is not</option></select></div><div class=col-xs-9><select class=form-control ng-model=battles.filter.state.my_army.value.faction ng-options=\"f.key as f.name for f in factions\"><option value=\"\" ng-if=!battles.filter.state.my_army.value.faction>Please select</option></select></div><div class=col-xs-3></div><div class=col-xs-9><select class=\"form-control multiple\" ng-model=battles.filter.state.my_army.value.caster ng-options=\"c.key as c.key|capitalise\n" +
    "                              for c in factions |\n" +
    "                              factions:'castersFor':battles.filter.state.my_army.value.faction\n" +
    "                              \" multiple></select></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.opp_name.active = !battles.filter.state.opp_name.active\" ng-class=\"{\n" +
    "           'active': battles.filter.state.opp_name.active\n" +
    "           }\"><div class=icon-sprite ng-class=\"{ 'icon-checked': battles.filter.state.opp_name.active,\n" +
    "                       'icon-unchecked': !battles.filter.state.opp_name.active\n" +
    "                       }\"></div><h5 class=panel-title>Opponent</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.opp_name.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.opp_name.is><option value=true>is</option><option value=false>is not</option></select></div><div class=col-xs-9><select class=\"form-control multiple\" ng-model=battles.filter.state.opp_name.value ng-options=\"o as o | capitalise for o in battles.opponents\" multiple></select></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.opp_caster.active=!battles.filter.state.opp_caster.active\" ng-class=\"{ 'active': battles.filter.state.opp_caster.active\n" +
    "                     }\"><div class=icon-sprite ng-class=\"{ 'icon-checked':battles.filter.state.opp_caster.active,\n" +
    "                        'icon-unchecked':!battles.filter.state.opp_caster.active\n" +
    "                        }\"></div><h5 class=panel-title>Opponent Caster</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.opp_caster.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.opp_caster.is><option value=true selected>is</option><option value=false>is not</option></select></div><div class=col-xs-9><select class=form-control ng-model=battles.filter.state.opp_caster.value.faction ng-options=\"f.key as f.name for f in factions\"><option value=\"\" ng-if=!battles.filter.state.opp_caster.value.faction>Please select</option></select></div><div class=col-xs-3></div><div class=col-xs-9><select class=\"form-control multiple\" ng-model=battles.filter.state.opp_caster.value.caster ng-options=\"\n" +
    "                  c.key as c.key|capitalise\n" +
    "                  for c in factions\n" +
    "                  | factions:'castersFor':battles.filter.state.opp_caster.value.faction\" multiple></select></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.result.active=!battles.filter.state.result.active\" ng-class=\"{\n" +
    "           'active': battles.filter.state.result.active\n" +
    "           }\"><div class=icon-sprite ng-class=\"{\n" +
    "              'icon-checked':battles.filter.state.result.active,\n" +
    "              'icon-unchecked':!battles.filter.state.result.active\n" +
    "              }\"></div><h5 class=panel-title>Result</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.result.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.result.is><option value=true>is</option><option value=false>is not</option></select></div><div class=col-xs-9><select class=\"form-control multiple\" ng-model=battles.filter.state.result.value ng-options=\"\n" +
    "                  id as s.type | capitalise\n" +
    "                  group by s.result | capitalise\n" +
    "                  for (id, s) in scores\n" +
    "                  \" multiple></select></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.scenario.active=!battles.filter.state.scenario.active\" ng-class=\"{\n" +
    "           'active': battles.filter.state.scenario.active\n" +
    "           }\"><div class=icon-sprite ng-class=\"{\n" +
    "              'icon-checked':battles.filter.state.scenario.active,\n" +
    "              'icon-unchecked':!battles.filter.state.scenario.active\n" +
    "              }\"></div><h5 class=panel-title>Scenario</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.scenario.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.scenario.is><option value=true>is</option><option value=false>is not</option></select></div><div class=col-xs-9><select class=\"form-control multiple\" ng-model=battles.filter.state.scenario.value ng-options=\"\n" +
    "                  s.key as s.name\n" +
    "                  for s in battles.scenarios\n" +
    "                  \" multiple></select></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.size.active=!battles.filter.state.size.active\" ng-class=\"{\n" +
    "           'active': battles.filter.state.size.active\n" +
    "           }\"><div class=icon-sprite ng-class=\"{\n" +
    "              'icon-checked':battles.filter.state.size.active,\n" +
    "              'icon-unchecked':!battles.filter.state.size.active\n" +
    "              }\"></div><h5 class=panel-title>Size</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.size.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.size.is><option value=\"==\">==</option><option value=\"!=\">!=</option><option value=&gt;>&gt;</option><option value=\"&gt;=\">&gt;=</option><option value=\"<\">&lt;</option><option value=\"<=\">&lt;=</option></select></div><div class=col-xs-9><input type=number class=\"form-control filter-input-3\" style=max-width:6em ng-model=\"battles.filter.state.size.value\"></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.event.active=!battles.filter.state.event.active\" ng-class=\"{\n" +
    "           'active': battles.filter.state.event.active\n" +
    "           }\"><div class=icon-sprite ng-class=\"{\n" +
    "              'icon-checked':battles.filter.state.event.active,\n" +
    "              'icon-unchecked':!battles.filter.state.event.active\n" +
    "              }\"></div><h5 class=panel-title>Event</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.event.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.event.is><option value=true>is</option><option value=false>is not</option></select></div><div class=col-xs-9><select class=\"form-control multiple\" ng-model=battles.filter.state.event.value ng-options=\"e for e in battles.events\" multiple></select></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.initiative.active=!battles.filter.state.initiative.active\" ng-class=\"{\n" +
    "           'active': battles.filter.state.initiative.active\n" +
    "           }\"><div class=icon-sprite ng-class=\"{\n" +
    "              'icon-checked':battles.filter.state.initiative.active,\n" +
    "              'icon-unchecked':!battles.filter.state.initiative.active\n" +
    "              }\"></div><h5 class=panel-title>Initiative</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.initiative.active><div class=\"col-xs-3 is\"><select class=form-control ng-model=battles.filter.state.initiative.is><option value=true>is</option><option value=false>is not</option></select></div><div class=col-xs-4 style=padding-right:5px><select class=form-control ng-model=battles.filter.state.initiative.value.won_roll><option selected value=\"\"></option><option selected value=true>Won roll</option><option selected value=false>Lost roll</option></select></div><div class=col-xs-5 style=padding-right:5px><select class=form-control ng-model=battles.filter.state.initiative.value.started><option selected value=\"\"></option><option selected value=true>started game</option><option selected value=false>chose side</option></select></div></div></div><div class=\"panel panel-default\"><div class=panel-heading ng-click=\"battles.filter.state.tags.active=!battles.filter.state.tags.active\" ng-class=\"{\n" +
    "           'active': battles.filter.state.tags.active\n" +
    "           }\"><div class=icon-sprite ng-class=\"{\n" +
    "              'icon-checked':battles.filter.state.tags.active,\n" +
    "              'icon-unchecked':!battles.filter.state.tags.active\n" +
    "              }\"></div><h5 class=panel-title>Tags</h5></div><div class=\"panel-body row\" ng-show=battles.filter.state.tags.active><div class=\"col-xs-5 is\"><select class=form-control ng-model=battles.filter.state.tags.is><option value=any>include any of</option><option value=all>include all of</option><option value=not_all>do not include all of</option><option value=none>include none of</option></select></div><div class=col-xs-7><select class=\"form-control multiple\" ng-model=battles.filter.state.tags.value ng-options=\"t for t in battles.tags\" multiple></select></div></div></div></form></div>"
  );


  $templateCache.put('partials/filter_menu.html',
    "<div><button class=\"btn btn-default\" ng-click=doBack()><span>Back</span></button></div>"
  );


  $templateCache.put('partials/help.html',
    "<div id=help class=container><h4>Table Of Contents</h4><ul><li><a ng-click=\"scrollTo('help-general')\">General</a></li><li><a ng-click=\"scrollTo('help-battle-list')\">Battle List</a></li><li><a ng-click=\"scrollTo('help-battle-view')\">Battle View</a></li><li><a ng-click=\"scrollTo('help-battle-edition')\">Battle Input</a></li><li><a ng-click=\"scrollTo('help-stats')\">Statistics</a></li><li><a ng-click=\"scrollTo('help-filter-edition')\">Filter Configuration</a></li><li><a ng-click=\"scrollTo('help-backup')\">Backup</a></li></ul><div ng-include=\"'partials/help/general.html'\"></div><div ng-include=\"'partials/help/battle_list.html'\"></div><div ng-include=\"'partials/help/battle_view.html'\"></div><div ng-include=\"'partials/help/battle_edition.html'\"></div><div ng-include=\"'partials/help/stats.html'\"></div><div ng-include=\"'partials/help/filter_edition.html'\"></div><div ng-include=\"'partials/help/backup.html'\"></div></div>"
  );


  $templateCache.put('partials/help/backup.html',
    "<div id=help-backup style=height:3em></div><div><h3>Backup</h3><img class=\"img-responsive img-thumbnail hidden-xs\" src=data/sample/backup_lg.png style=\"max-height:400px\"> <img class=\"img-responsive img-thumbnail visible-xs\" src=data/sample/backup_sm.png style=\"max-height:400px\"><h4>Where is your data ?</h4><p>The data representing your current battle list is stored <b>in your browser cache</b>.<br>This allows the app to \"remember\" your battles each time you visit the website.<br>Also, the app can work offline while you are not connected to the internet.<br><b>Your data is NOT stored in the webserver</b>, it is purely local to your device.<br></p><p>The app can be seen as a simple \"battle editor\".<br>Although it remembers your current battles between each session,<br>it can also open/save files containing all your battles data.<br>Those \"backup files\" are the primary backup mecanism for your battle list.</p><p>The app is also capable of synchronizing the current battle list<br>between to instances of the app running on to different devices<br>through the web server (of course you need to be online at that time).</p><p>It is recommended to regularly backup your data<br>since a lot of things can go wrong with a browser's cache :P</p><p><b>Note for IPhone users :</b> it is strongly recommended to backup your data before a firmware upgrade.</p><h4>Open / Save Backup files</h4><p>The app can be seen as a simple \"battle editor\", juste like any document editor.<br>You can open and save files to the local filesystem, containing your battles list.</p><p><b>Note for IPhone users :</b> the IPhone does not allow access to its filesystem from the browser.<br>Thus, you cannot Open / Save Backup files from your IPhone.<br>Instead, you can directly copy/paste the JSON text from/to the text inputs,<br>or Synchronize/Upload you IPhone data to a PC.</p><h5>Save file</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/backup_save.png\"><p>This section allows you to save a file to the local filesystem, containing a battle list.<br>Click on the file link on the top right.<br>Your browser should open a file manager window to save the file.</p><p>You can also directly copy the JSON text in the text input bellow,<br>then save it somewhere convenient (emails, notes, whatever).</p><h5>Open file</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/backup_open.png\"><p>This section allows you to open a file stored on the local filesystem, containing a battle list.<br>Click on the file selection input and choose a file.<br>The app should switch to the Battle List page after loading the new battles.</p><p>You can also directly paste the JSON string into the text input, then click \"Read JSON\".</p><p><b>Note :</b> if the file is not read correctly, an error message should appear besides the file selector input.<br><b>Note :</b> when you open a backup file, the current battle list is discarded, and all its data are lost !<br></p><h4>Synchronize</h4><p>The app is also capable of synchronizing the current battle list<br>between to instances of the app running on to different devices.<br></p><img class=\"img-responsive img-thumbnail\" src=\"data/sample/sync.jpeg\"><p>Basically, one device (say, a smartphone) can upload its battle list to the server.<br>Then another device (say, a PC) can download this battle list from the server.<br>Of cource, both devices need to visit the app webpage with a web browser :)</p><h5>Upload file</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/backup_upload.png\"><p>This section allows you to upload your current battle list to the webserver.<br>Just click on the big nice button.</p><img class=\"img-responsive img-thumbnail\" src=\"data/sample/backup_upload_ok.png\"><p>A <b>Sync ID number</b> should appear when the upload is complete.<br>You'll need this Sync ID number to download your data on the other device.</p><p><b>Note :</b> data uploaded to the server is only stored temporarily.<br>The Sync ID number is only valid for a few hours after the upload.<br></p><h5>Download</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/backup_download.png\"><p>This section allows you to download a battle list from the server.<br>Type the <b>Sync ID number</b> you got when uploading, then click on the button.<br>The app should switch to the Battle List page after loading the new battles.</p><p><b>Note :</b> if the ID is not correct, an error message should appear besides the input.<br><b>Note :</b> when you download a battle list, the current battle list is discarded, and all its data are lost !<br></p><h4>Import Iron Grudge data</h4><p>The app can import your Iron Grudge data so you don't lose your last 2 years of victories !<br>You can also see this app as just a glorified statistics viewer and continue to use Iron Grude.</p><p>The import process is a bit convoluted because the Iron Grudge backup file is a SQLite database.<br>And loading an SQLite data base file directly into a WebApp is not possible AFAIK.<br>So you'll need to convert your backup file to a Text-CSV file, before importing it into this app.</p><h5>Converting to CSV file</h5><p>First you need to get an SQLite Manager tool.<br>Personnally I use <a href=\"https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/\">the Firefox SQLite Manager plugin</a>.</p><p>The plugin is available through Tools > SQLite Manager in FirefoxMenu.<br>In the Manager choose the menu Database > Connect database, choose your Iron Grudge backup file.<br>The tables for the backup file should appear in the tree view on the left.<br>In the panel on the right, choose the Execute SQL tab.<br>Paste the following SQL into the Enter SQL input :</p><code>SELECT battle.date, my_faction.name, my_caster.shortname, player.name, opp_faction.name, opp_caster.shortname, battle.result, battle.controlPoints, battle.armyPoints, battle.killPoints, battle.opponentControlPoints, battle.opponentArmyPoints, battle.opponentKillPoints, scenario.name, battle.points, event.name, battle.initiative, battle.comment FROM battle LEFT JOIN army my_army ON battle.armyId=my_army._id LEFT JOIN faction my_faction ON my_army.factionId=my_faction._id LEFT JOIN caster my_caster ON my_army.casterId=my_caster._id LEFT JOIN player ON battle.opponentId=player._id LEFT JOIN army opp_army ON battle.opponentArmyId=opp_army._id LEFT JOIN faction opp_faction ON opp_army.factionId=opp_faction._id LEFT JOIN caster opp_caster ON opp_army.casterId=opp_caster._id LEFT JOIN scenario ON battle.scenarioId=scenario._id LEFT JOIN event ON battle.eventId=event._id;</code><p>Click on Execute SQL.<br>You should see the following result :</p><img class=\"img-responsive img-thumbnail\" src=\"data/sample/sqlite_import.png\"><p>Click on Actions > Save Result (CSV) to file.<br>And save your CSV file !</p><h5>Import the CSV file</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/backup_import_ig.png\"><p>Click on the file selection input and choose your Iron Grudge CSV file (see above).<br>You can also directly paste the CSV text in the input bellow.<br>The app should switch to the Battle List page after loading the new battles.</p><p><b>Note :</b> if the file is not read correctly, an error message should appear besides the file selector input.<br><b>Note :</b> when you import a CSV file, the current battle list is discarded, and all its data are lost !<br></p></div>"
  );


  $templateCache.put('partials/help/battle_edition.html',
    "<div id=help-battle-edition style=height:3em></div><div><h3>Battle Input</h3><img class=\"img-responsive img-thumbnail hidden-xs\" src=data/sample/battle_edition_lg.png style=\"max-height:500px\"><br><img class=\"img-responsive img-thumbnail visible-xs\" src=\"data/sample/battle_edition_sm.png\"><br><p>This page allows full modification of a battle information.</p><p><b>Tip :</b> You can get there by clicking on \"Edit\" button in the <a ng-click=\"scrollTo('help-battle-view')\">Battle View</a> page,<br>or by clicking the \"Add Battle\" in the <a ng-click=\"scrollTo('help-battle-list')\">Battle List</a> page.</p><p>Available actions :</p><dl class=dl-horizontal><dt><span class=\"glyphicon glyphicon-save\"></span> Save</dt><dd>save/create battle and go back to <a ng-click=\"scrollTo('help-battle-list')\">Battle List</a> page.</dd><dt><span class=\"glyphicon glyphicon-remove\"></span> Close</dt><dd>discard changes and go back to <a ng-click=\"scrollTo('help-battle-list')\">Battle List</a> page.</dd></dl><h5>User Lists</h5><p>When you see an input that looks like this :</p><img class=\"img-responsive img-thumbnail\" src=\"data/sample/battle_edition_user_list.png\"><br><p>it means the value can be selected amongst a list defined by the user (you).</p><p>The <span class=\"glyphicon glyphicon-plus\"></span> button on left allows you to enter a new value for the list.</p><p>The dropbox list in the middle allows the selection of a previously defined value.</p><p>The <span class=\"glyphicon glyphicon-minus\"></span> button on right allows you to delete the currently selected value from the list.</p><p><b>Note :</b> lists are computed from the current battle list.<br>This means that values that are no longer referenced by any battle<br>(either after a battle modification or deletion) will automatically be removed from the list</p><h5>Scenarios</h5><p>The scenario list automatically includes Steam Roller scenarios names</p><h5>Tags</h5><p>Tags are user-defined labels that can be attached to any battle.</p><p>The app extract all tags names from the current battle list, and can use them to filter or compute statistics.</p><h5>Comment</h5><p>Comment is for free text information.</p></div>"
  );


  $templateCache.put('partials/help/battle_list.html',
    "<div id=help-battle-list style=height:3em></div><div><h3>Battles List</h3><img class=\"img-responsive img-thumbnail hidden-xs\" src=data/sample/battle_list_lg.png style=\"max-height:400px\"> <img class=\"img-responsive img-thumbnail visible-xs\" src=data/sample/battle_list_sm.png style=\"max-height:400px\"><p>The battles list display all your recorded battles.</p><p><b>Tip :</b> You can get there by clicking on \"Battle list\" button in the Main Menu.</p><p>The last column display the result of the game :</p><dl class=dl-horizontal><dt>Red</dt><dd>Defeat</dd><dt>Yellow</dt><dd>Draw</dd><dt>Green</dt><dd>Victory</dd><dt>A</dt><dd>by assassination</dd><dt>S</dt><dd>by scenario</dd><dt>C</dt><dd>by clock</dd><dt>T</dt><dd>by tiebreaker</dd><p>Available actions :</p><dl class=dl-horizontal><dt>&lt;click on battle row&gt;</dt><dd>display/edit battle information.</dd><dt><span class=\"glyphicon glyphicon-plus\"></span> Add Battle</dt><dd>enter new battle.</dd><dt><span class=\"glyphicon glyphicon-filter\"></span> Filter</dt><dd>You can filter the displayed battles according to multiple settings.</dd><dt><span class=\"glyphicon glyphicon-sort\"></span> Sort By</dt><dd>You can choose the sort settings for the displayed battles.</dd><dt><span class=\"glyphicon glyphicon-export\"></span> Export</dt><dd>You can export the displayed battle list (ie after filtering and sorting) to various file formats.</dd></dl><h5>Filter Action</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/battle_list_filter.png\"><dl class=dl-horizontal style=display:inline-block><dt><span class=\"glyphicon glyphicon-edit\"></span> Edit</dt><dd>Brings you to the <a ng-click=\"scrollTo('help-filter-edition')\">Filter Configuration</a> page.</dd><dt><span class=\"glyphicon glyphicon-random\"></span> Invert</dt><dd>display battles that do NOT match the current filter.</dd><dt><span class=\"glyphicon glyphicon-refresh\"></span> Restore</dt><dd>undo \"Invert\" filter.</dd><dt><span class=\"glyphicon glyphicon-ok-circle\"></span> Enable</dt><dd>activate filter.</dd><dt><span class=\"glyphicon glyphicon-ban-circle\"></span> Disable</dt><dd>disactivate filter (current filter configuration is not lost, just disabled).</dd></dl><p>The filter button color change depending on the state of the filter :</p><dl class=dl-horizontal><dt>white</dt><dd>filter inactive</dd><dt>green</dt><dd>filter active</dd><dt>blue</dt><dd>filter active and inverted</dd><h5>Sort Action</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/battle_list_sort.png\"><p>You can sort the displayed battle according to different criterions</p><p>The active sort is marked with a chevron <span class=\"glyphicon glyphicon-collapse-down\"></span></p><p>The default sort is by \"Date, descending\" (newest battles at the top).</p><p><b>Tip :</b> You can revert the sort order by clicking on the active criterion. The chevron will change orientation.</p><dl class=dl-horizontal><dt><span class=\"glyphicon glyphicon-collapse-down\"></span></dt><dd>sort ascending</dd><dt><span class=\"glyphicon glyphicon-collapse-up\"></span></dt><dd>sort descending</dd><h5>Export Action</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/battle_list_export.png\"><p>You can export the currently displayed battles to different file formats.</p><dl class=dl-horizontal><dt>BB Code</dt><dd>convert to internet forums table</dd><dt>CSV</dt><dd>Comma Separated Values text file, for use in spreadsheet editors</dd><dt>JSon</dt><dd>JSON text file, for use in other web applications</dd><p>The export take into account filtering and sorting, so you can export only the set of battles you want.</p><p><b>Note :</b> this is not the correct way to backup your battle list. Backup options are in the <a ng-click=\"scrollTo('help-backup')\">Backup</a> page.</p></dl></dl></dl></dl></div>"
  );


  $templateCache.put('partials/help/battle_view.html',
    "<div id=help-battle-view style=height:3em></div><div><h3>Battle View</h3><img class=\"img-responsive img-thumbnail hidden-xs\" src=\"data/sample/battle_view_lg.png\"><br><img class=\"img-responsive img-thumbnail visible-xs\" src=\"data/sample/battle_view_sm.png\"><br><p>This page displays detailed information about a battle.</p><p><b>Tip :</b> You can get there by clicking on a battle row in the <a ng-click=\"scrollTo('help-battle-list')\">Battle List</a> page.</p><p>Available actions :</p><dl class=dl-horizontal><dt><span class=\"glyphicon glyphicon-edit\"></span> Edit</dt><dd>go to <a ng-click=\"scrollTo('help-battle-edition')\">Battle Input</a> page.</dd><dt><span class=\"glyphicon glyphicon-trash\"></span> Delete</dt><dd>drop the battle from your battle list.</dd><dt><span class=\"glyphicon glyphicon-remove\"></span> Close</dt><dd>go back to <a ng-click=\"scrollTo('help-battle-list')\">Battle List</a> page.</dd></dl></div>"
  );


  $templateCache.put('partials/help/filter_edition.html',
    "<div id=help-filter-edition style=height:3em></div><div><h3>Filter Configuration</h3><img class=\"img-responsive img-thumbnail\" src=\"data/sample/filter_edition.png\"><br><p>On this page you can see/edit your current filter settings.</p><p><b>Tip :</b> You can get there through \"Filter\" menus in the <a ng-click=\"scrollTo('help-battle-list')\">Battle List</a> and <a ng-click=\"scrollTo('help-stats')\">Statistics</a> pages.</p><p>A filter is composed of a list of <b>criterions</b>. Each criterion can be enabled/disabled indepently.<br>In the image above, the \"My Caster\" criterion is enabled, while all other criterions are disabled.<br>You can <b>enable/disable</b> criterion by <b>clicking on their label line</b>.</p><p>To match the filter, a battle must match <b>ALL</b> active criterions (logical AND).</p><p>Disabled criterions settings are not forgotten, they're just, well, disabled when matching battles.</p><p><b>Note :</b> the application remembers the filter state between sessions.</p><h5>Date</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/filter_edition_date.png\"><br><p>You can see a select box for the matching criterion, and 3 input boxes for the reference date</p><p>You can filter battles by date relative to the reference date.<ul><li>superior (&gt;),</li><li>superior or equal (&gt;=),</li><li>equal (==),</li><li>not equal (!=),</li><li>inferior or equal (&lt;=),</li><li>inferior (&gt;)</li></ul></p><h5>My Caster / Opp. Caster</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/filter_edition_mycaster.png\"><br><p>You can see a select box for the matching criterion, a select box for the faction, and a multiple selection for the caster.</p><p>You can filter battles by your army's / your opponent's faction / caster.<br>If multiple casters are selected, the filter will match <b>ANY</b> of these (logical OR).<br>If no caster is selected, the filter will match <b>the whole faction</b></p><p><b>Note :</b> the multiple selection for the caster is empty until a faction is selected.</p><h5>Opponent / Result / Scenario / Event</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/filter_edition_opponent.png\"><br><p>For all those criterion, you see a select box for the matching criterion, and a multiple selection for the value.</p><p>You can filter battles by your opponent's name / the result / the scenario / the event.<br>If multiple values are selected, the filter will match <b>ANY</b> of these (logical OR).<br>If no value is selected, the filter will match any battle (ie, it's useless).</p><h5>Size</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/filter_edition_size.png\"><br><p>You see a select box for the matching criterion, and an input for the reference size.</p><p>You can filter battles by game size relative to the reference size.<ul><li>superior (&gt;),</li><li>superior or equal (&gt;=),</li><li>equal (==),</li><li>not equal (!=),</li><li>inferior or equal (&lt;=),</li><li>inferior (&gt;)</li></ul></p><h5>Initiative</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/filter_edition_init.png\"><br><p>You see a select box for the matching criterion, a select box for the starting roll, and a select box for the first player.</p><p>You can filter battles by intitiative.<br>When both values are selected, the filter match battles with the exact same initiative (logical AND).<br>If no starting roll is selected, the filter match battle with any starting roll, and the selected first player.<br>Idem for the first player.</p><h5>Tags</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/filter_edition_tags.png\"><br><p>You see a select box for the matching criterion, and a multiple select box for the tag values.</p><p>You can filter battles by tags.<br><dl class=dl-horizontal><dt>include any of</dt><dd>the filter match battles that include <b>at least one</b> of the selected tags.</dd><dt>include all of</dt><dd>the filter match battles that include <b>all</b> the selected tags (they can include other tags).</dd><dt>do not include all of</dt><dd>the filter match battles that <b>do not</b> include <b>at least one</b> of the selected tags.</dd><dt>include none of</dt><dd>the filter match battles that <b>do not</b> include <b>any</b> of the selected tags.</dd></dl>(fun, right ?)</p></div>"
  );


  $templateCache.put('partials/help/general.html',
    "<div id=help-general style=height:3em></div><div><h3>General</h3><h4>Smartphone Installation</h4><p>The app can be installed to smartphones homescreens.<br>This allow the app to run fullscreen without the browser URL bar / menus.</p><a href=\"http://www.howtogeek.com/196087/how-to-add-websites-to-the-home-screen-on-any-smartphone-or-tablet/\">How to add the app to your phone homescreen.</a><h4>Adaptive Display</h4><p>The app display change according to the screen size, button labels are removed on small screen, etc.</p><p>As much as possible, the version corresponding to the current screen size will be presented in this help page.</p><h4>Main Menu</h4><img class=\"img-responsive img-thumbnail hidden-xs\" src=\"data/sample/main_menu_lg.png\"><br><img class=\"img-responsive img-thumbnail visible-xs\" src=\"data/sample/main_menu_sm.png\"><p>The main menu gives you acces to the different parts of the application:</p><dl class=dl-horizontal><dt><span class=\"glyphicon glyphicon-list\"></span> Battle List</dt><dd>the main battle list where you can Add/Edit/Delete/Sort/Export battles.</dd><dt><span class=\"glyphicon glyphicon-stats\"></span> Statistics</dt><dd>the statistics module to compute and display all your results.</dd><dt><span class=\"glyphicon glyphicon-floppy-disk\"></span> Backup</dt><dd>the page where you can save your battles list to a backup file, load previous backup files,<br>sync your battles to another device through the web, import your Iron Grudge Data.</dd><dt><span class=\"glyphicon glyphicon-question-sign\"></span> Help</dt><dt><span class=\"glyphicon glyphicon-info-sign\"></span> Info</dt><dd>legal info.</dd></dl><p>The number under the title is the app version number (here #test)</p><p><strong>Tip :</strong> you can force-reload the app by clicking on the title</p><h4>Bottom Bar</h4><img class=\"img-responsive img-thumbnail hidden-xs\" src=\"data/sample/bottom_bar_lg.png\"><br><img class=\"img-responsive img-thumbnail visible-xs\" src=\"data/sample/bottom_bar_sm.png\"><p>The bottom bar contains page-specific actions (here the battles list page actions).</p><p>When no actions are available for a page it is not displayed.</p></div>"
  );


  $templateCache.put('partials/help/stats.html',
    "<div id=help-stats style=height:3em></div><div><h3>Statistics</h3><img class=\"img-responsive img-thumbnail hidden-xs\" src=data/sample/stats_pie_lg.png style=\"max-height:500px\"><br><img class=\"img-responsive img-thumbnail visible-xs\" src=\"data/sample/stats_sm.png\"><br><p>This page allows visualization of battles statistics.</p><p><b>Tip :</b> You can get there by clicking on \"Statistics\" button in the Main Menu.</p><p>Available actions :</p><dl class=dl-horizontal><dt><span style=font-weight:bold>%</span> &lt;stats criterion&gt;</dt><dd>display the stats type. You can compute various statistics about your battles.</dd><dt><span class=\"glyphicon glyphicon-sort\"></span> &lt;group by criterion&gt;</dt><dd>display the stats groups. You can group the computed statistics by various values.</dd><dt><span class=\"glyphicon glyphicon-filter\"></span> Filter</dt><dd>You can filter the battles used for computing the stats, according to multiple settings.</dd></dl><h5>Statistics Type</h5><p>You can choose which statistic to compute from your battles.<br>Basically, the app is able to count (almost) each of the informations available for battles<br>The default type is \"Result\".</p><dl class=dl-horizontal><dt>Event</dt><dd>count references to each event (bar graph).</dd><dt>Initiative</dt><dd>count references to each initiative combination (pie chart).</dd><dt>My Caster/Opp. Caster</dt><dd>count references to each caster for all factions (bar graph).</dd><dt>My Faction/Opp. Faction</dt><dd>count references to each faction (bar graph).</dd><dt>Opp. Name</dt><dd>count references to each opponent name (bar graph).</dd><dt>Points</dt><dd>count the mean points scored by you and your opponents (balance graph).</dd><dt>Result</dt><dd>count your victories/defeats (pie chart).</dd><dt>Result Over Time</dt><dd>accumulate your victories/defeats over time (chart).</dd><dt>Scenario</dt><dd>count references to each scenario (bar graph).</dd><dt>Size</dt><dd>count references to each size (bar graph).</dd><dt>Tags</dt><dd>count references to each tag (bar graph).</dd></dl><h5>Statistics Group By</h5><p>You can choose to compute group statistics from your battles.<br>Basically, the app is able to group battles by (almost) each information available<br>The default group is \"Total\".</p><dl class=dl-horizontal><dt>Event</dt><dd>group battles by event.</dd><dt>Initiative</dt><dd>group battle by each initiative combination.</dd><dt>My Caster/Opp. Caster</dt><dd>group battles by each caster (you must first select a faction a the top of the page).</dd><dt>My Faction/Opp. Faction</dt><dd>group battles by faction.</dd><dt>Opp. Name</dt><dd>group battle by opponent name (bar graph).</dd><dt>Result</dt><dd>group battles by game result.</dd><dt>Scenario</dt><dd>group battles by scenario.</dd><dt>Size</dt><dd>group battles by game size.</dd><dt>Tags</dt><dd>group battles by tag reference.</dd><dt>Total</dt><dd>one group, all battles.</dd></dl><h5>Filter Action</h5><img class=\"img-responsive img-thumbnail\" src=\"data/sample/battle_list_filter.png\"><dl class=dl-horizontal style=display:inline-block><dt><span class=\"glyphicon glyphicon-edit\"></span> Edit</dt><dd>Brings you to the <a ng-click=\"scrollTo('help-filter-edition')\">Filter Configuration</a> page.</dd><dt><span class=\"glyphicon glyphicon-random\"></span> Invert</dt><dd>use battles that do NOT match the current filter.</dd><dt><span class=\"glyphicon glyphicon-refresh\"></span> Restore</dt><dd>undo \"Invert\" filter.</dd><dt><span class=\"glyphicon glyphicon-ok-circle\"></span> Enable</dt><dd>activate filter.</dd><dt><span class=\"glyphicon glyphicon-ban-circle\"></span> Disable</dt><dd>disactivate filter (current filter configuration is not lost, just disabled).</dd></dl><p>The filter button color change depending on the state of the filter :</p><dl class=dl-horizontal><dt>white</dt><dd>filter inactive</dd><dt>green</dt><dd>filter active</dd><dt>blue</dt><dd>filter active and inverted</dd></dl></div>"
  );


  $templateCache.put('partials/info.html',
    "<div id=Info class=container><h3>Legal Information</h3><p>Images originating from the Privateer Press website are &copy; 2001-2014 Privateer Press, Inc. All Rights Reserved.</p><p>Privateer Press&reg;, WARMACHINE&reg;, Cryx&trade;, Cygnar&trade;, Khador&trade;, Protectorate of Menoth&trade;, Retribution of Scyrah&trade;, Convergence of Cyriss&trade;, Warcaster&trade;, HORDES&trade;, Circle Oroboros&trade;, Legion of Everblight&trade;, Skorne&trade;, TrollBloods&trade;, and their logos are trademarks of Privateer Press, Inc.</p><p>Images and trademarks used without permission</p><p>This application is unofficial and is not endorsed by Privateer Press</p><h3>License and Source code <img src=\"data/img/agplv3.png\"></h3><p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.</p></div>"
  );


  $templateCache.put('partials/stats.html',
    "<div id=stats class=container><form ng-if=\"state.selector==='my_caster' ||\n" +
    "               state.selector==='opp_caster'\n" +
    "               \"><select class=form-control ng-model=state.selector_arg ng-options=\"f.key as f.name for f in factions\" ng-change=state.doGenerate()><option value=\"\" ng-if=!state.selector_arg>Please select</option></select></form><div ng-if=\"\n" +
    "       state.entry==='result' ||\n" +
    "       state.entry==='initiative'\n" +
    "       \"><div class=\"panel panel-info\" ng-repeat=\"s in stats[state.entry][state.selector+'.'+state.selector_arg]\"><div class=panel-heading><h4 class=panel-title>{{s.title}}</h4></div><div class=panel-body><pie-chart pie-values=s></pie-chart></div></div></div><div ng-if=\"state.entry==='result_time'\"><div class=\"panel panel-info\" ng-repeat=\"s in stats[state.entry][state.selector+'.'+state.selector_arg]\"><div class=panel-heading><h4 class=panel-title>{{s.title}}</h4></div><div class=panel-body><stack-graphs gph-values=s></stack-graphs></div></div></div><div ng-if=\"state.entry==='opp_name' ||\n" +
    "              state.entry==='scenario' ||\n" +
    "              state.entry==='event' ||\n" +
    "              state.entry==='size' ||\n" +
    "              state.entry==='tag'\n" +
    "              \"><div class=\"panel panel-info\" ng-repeat=\"s in stats[state.entry][state.selector+'.'+state.selector_arg]\"><div class=panel-heading><h4 class=panel-title>{{s.title}}</h4></div><div class=panel-body><bars bars-values=s.values></bars></div></div></div><div ng-if=\"state.entry==='my_faction' ||\n" +
    "              state.entry==='opp_faction'\n" +
    "              \"><div class=\"panel panel-info\" ng-repeat=\"s in stats[state.entry][state.selector+'.'+state.selector_arg]\"><div class=panel-heading><h4 class=panel-title>{{s.title}}</h4></div><div class=panel-body><bars bars-values=s.values bars-hues=s.hues></bars></div></div></div><div ng-if=\"state.entry==='my_caster' ||\n" +
    "              state.entry==='opp_caster'\n" +
    "              \"><div class=\"panel panel-info\" ng-repeat=\"s in stats[state.entry][state.selector+'.'+state.selector_arg]\"><div class=panel-heading><h4 class=panel-title>{{s.title}}</h4></div><div class=panel-body><div ng-repeat=\"(f, v) in s.values\"><strong>{{::f}}</strong><bars bars-values=v bars-hue={{::s.hues[f][0]}} bars-saturation={{::s.hues[f][1]}}></bars></div></div></div></div><div ng-if=\"state.entry==='points'\"><div class=\"panel panel-info\" ng-repeat=\"s in stats[state.entry][state.selector+'.'+state.selector_arg]\"><div class=panel-heading><h4 class=panel-title>{{s.title}}</h4></div><div class=panel-body><stacks stacks-values=s></stacks></div></div></div></div>"
  );


  $templateCache.put('partials/stats_menu.html',
    "<div class=btn-group><div class=\"btn-group drop\"><button class=\"btn btn-default\" open-dropdown><span style=font-weight:bold>%</span> <span>{{ENTRIES[state.entry].desc}}</span></button><div class=drop-mask><ul class=drop-menu><li class=dropdown-header>Show</li><li ng-repeat=\"(id, e) in ::ENTRIES\"><a ng-click=::doSetEntry(id)>{{::e.desc}}</a></li></ul></div></div><div class=\"btn-group drop\"><button class=\"btn btn-default\" open-dropdown><div class=\"icon-sprite icon-sort\"></div><span>{{SELECTORS[state.selector].desc}}</span></button><div class=drop-mask><ul class=drop-menu><li class=dropdown-header>Sorted By</li><li ng-repeat=\"(id, s) in ::SELECTORS\"><a ng-click=::doSetSelector(id)>{{::s.desc}}</a></li></ul></div></div><div class=\"btn-group drop\"><button class=btn ng-class=\"{\n" +
    "            'btn-default': !battles.filter.active,\n" +
    "            'btn-success': battles.filter.active && !battles.filter.invert,\n" +
    "            'btn-primary': battles.filter.active && battles.filter.invert\n" +
    "            }\" open-dropdown><div class=\"icon-sprite icon-filter\"></div><span class=lbl>Filter</span></button><div class=drop-mask><ul class=\"drop-menu text-left\"><li class=dropdown-header>Filter</li><li><a href=#/filter><div class=\"icon-sprite icon-edit\"></div>Edit</a></li><li ng-show=\"battles.filter.active &&\n" +
    "                     !battles.filter.invert\n" +
    "                     \"><a ng-click=doToggleFilterInvert()><div class=\"icon-sprite icon-invert\"></div>Invert</a></li><li ng-show=\"battles.filter.active &&\n" +
    "                     battles.filter.invert\n" +
    "                     \"><a ng-click=doToggleFilterInvert()><div class=\"icon-sprite icon-invert\"></div>Restore</a></li><li ng-hide=battles.filter.active><a ng-click=doToggleFilterActive()><div class=\"icon-sprite icon-enable\"></div>Enable</a></li><li ng-show=battles.filter.active><a ng-click=doToggleFilterActive()><div class=\"icon-sprite icon-disable\"></div>Disable</a></li></ul></div></div></div>"
  );

}]);
