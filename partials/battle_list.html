<div ui-view></div>
<div class="container"
     ng-show="show_list">
  <p>
    <button class="btn btn-primary" ng-click="addBattle()">
      <span class="glyphicon glyphicon-plus"></span>
      Add Battle
    </button>
    <button class="btn btn-default" ng-click="toggleFilter()">
      <span class="glyphicon glyphicon-search"></span>
      <span ng-hide="filter_active">Enable</span>
      <span ng-show="filter_active">Disable</span>
      Filter
    </button>
  </p>
  <form class="visible-xs">
    <label for="sort-by">Sort by</label>
    <select id="sort-by"
            ng-model="sort.type"
            ng-options="id as t.name for (id, t) in sort_types">
    </select>
    <input id="sort-reverse" type="checkbox" ng-model="sort.reverse" />
    <label for="sort-reverse" class="clickable">reverse</label>
  </form>
  <table class="table result">
    <tr>
      <th class="hidden-xs" sortable="date" sort="sort">
        Date
      </th>
      <th sortable="my_caster" sort="sort">
        Caster
      </th>
      <th sortable="opponent" sort="sort">
        Opponent
      </th>
      <th sortable="opp_caster" sort="sort">
        Caster
      </th>
      <th class="hidden-xs" sortable="size" sort="sort">
        Size
      </th>
      <th class="visible-lg" sortable="scenario" sort="sort">
        Scenario
      </th>
      <th class="visible-lg" sortable="event" sort="sort">
        Event
      </th>
      <th sortable="result" sort="sort">
        Result
      </th>
    </tr>
    <tr class="clickable"
        ng-repeat="battle in battles | filterBattle:filter:filter_active | orderBy:sort_types[sort.type].key:sort.reverse"
        ng-click="viewBattle(battle.index)">
      <td class="hidden-xs">
        {{battle.date.year}} /
        {{battle.date.month}} /
        {{battle.date.day}}
      </td>
      <td>
        <img class="faction-icon"
             alt="{{battle.my_army.faction}}"
             ng-src="img/{{factions[battle.my_army.faction].icon}}" />
        {{battle.my_army.caster | capitalise}}
      </td>
      <td>{{battle.opponent.name | capitalise}}</td>
      <td>
        <img class="faction-icon"
             alt="{{battle.opponent.faction}}"
             ng-src="img/{{factions[battle.opponent.faction].icon}}" />
        {{battle.opponent.caster | capitalise}}
      </td>
      <td class="hidden-xs">{{battle.setup.size}}</td>
      <td class="visible-lg">{{scenarios[battle.setup.scenario].name}}</td>
      <td class="visible-lg">{{battle.setup.event}}</td>
      <td class="{{scores[battle.score].result | scoreResultColor}}">
        <strong class="score-result">{{scores[battle.score].type | scoreTypeLetter}}</strong>
      </td>
    </tr>
  </table>
</div>
